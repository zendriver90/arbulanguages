
Stw√≥rz zdania wed≈Çug wzoru czyli oko≈Ço 6 s≈Ç√≥w z podstawowego s≈Çownictwa, z tymi s≈Çowami:
const searchInput = document.querySelector("[data-search]");
console.log("Element input:", searchInput); // Sprawdzenie czy input istnieje

let matchingKeys = []; // Globalna tablica pasujƒÖcych s≈Ç√≥w
let matchingKeysB = [];
document.getElementById("polski").addEventListener("click", function () {
    const searchValue = document.getElementById("search").value.toLowerCase();
    findMatchingKeys(fiszki, searchValue, "key2");
});

document.getElementById("angielski").addEventListener("click", function () {
    const searchValue = document.getElementById("search").value.toLowerCase();
    findMatchingKeys(fiszki, searchValue, "key");
});

function findMatchingKeys(fiszki, searchValue, searchKey) {
    console.log("Rozpoczynam filtrowanie fiszek dla frazy:", searchValue);
    
    matchingKeys = fiszki
        .filter(fiszka => {
            if (!fiszka[searchKey]) return false; // Je≈õli brak klucza, pomijamy
            return fiszka[searchKey].toLowerCase().startsWith(searchValue);
        })
        .map(fiszka => fiszka[searchKey]);

    console.log("PasujƒÖce s≈Çowa:", matchingKeys);

        matchingKeysB = fiszki
        .filter(fiszka => {
            if (!fiszka[searchKey]) return false; // Je≈õli brak klucza, pomijamy
            return fiszka[searchKey].toLowerCase().startsWith(searchValue);
        })
        .map(fiszka => fiszka[searchKey]);

    console.log("PasujƒÖce s≈Çowa2:", matchingKeysB);
}
function findMatchingKeys(fiszki, searchValue) {
    console.log("Rozpoczynam filtrowanie fiszek dla frazy:", searchValue);
    
    matchingKeys = fiszki
        .filter(fiszka => {
            if (!fiszka.key) return false; // Je≈õli brak key, pomijamy
            return fiszka.key.toLowerCase().startsWith(searchValue);
        })
        .map(fiszka => fiszka.key);

    console.log("PasujƒÖce s≈Çowa:", matchingKeys);
        matchingKeysB = fiszki
        .filter(fiszka => {
            if (!fiszka.key) return false; // Je≈õli brak key, pomijamy
            return fiszka.key.toLowerCase().startsWith(searchValue);
        })
        .map(fiszka => fiszka.key);

    console.log("PasujƒÖce s≈Çowa:", matchingKeysB);
}
function findLessonsForWords(fiszki) {
    let lessonIds = new Set();

    fiszki.forEach(fiszka => {
        if (!fiszka.key || !fiszka.id) return; // Je≈õli brak danych, pomijamy
        if (matchingKeys.includes(fiszka.key)) {
            lessonIds.add(fiszka.id[1]);
        }
    });

    console.log("Lekcje zawierajƒÖce szukane s≈Çowo:", Array.from(lessonIds));
    return Array.from(lessonIds);
    
}

function findLessonsForWordsB(fiszki) {
    let lessonIdsB = new Set();

    fiszki.forEach(fiszka => {
        if (!fiszka.key || !fiszka.id) return; // Je≈õli brak danych, pomijamy
        if (matchingKeysB.includes(fiszka.key)) {
            lessonIdsB.add(fiszka.id[0]);
        }
    });

        console.log("Ustawienia fiszek5", Array.from(lessonIdsB));
    return Array.from(lessonIdsB);

}

let isSearching = false;
let isSearching2 = false;
let tablica40 = []; // Aktualna tablica
let tablica41 = [];
let staraTablica40 = null; // Przechowuje wersjƒô sprzed zmiany

searchInput.addEventListener("input", (e) => {
    const searchTerm = e.target.value.trim();
    const searchValue = searchTerm.toLowerCase();

    findMatchingKeys(fiszki, searchValue);

    const matchingLessons5 = findLessonsForWords(fiszki);
    const matchingLessons5b = findLessonsForWordsB(fiszki);

    let nowaTablica40 = Array.isArray(matchingLessons5b) ? matchingLessons5b.flat() : [];

    // ‚úÖ ZAPISUJEMY STARƒÑ TABLICƒò TYLKO JE≈öLI ISTNIEJE I NIE JEST PUSTA
    if (tablica40.length > 0) {
        staraTablica40 = [...tablica40]; // KOPIUJEMY STARƒÑ TABLICƒò PRZED JEJ ZMIANƒÑ
        console.log('Stara tablica (zanim zmienimy):', staraTablica40);
    }

    // üîÑ AKTUALIZUJEMY `tablica40` DOPIERO PO ZAPISANIU STAREJ
    tablica40 = [...nowaTablica40];

    // üîç SZUKAMY POMINIƒòTYCH NUMER√ìW
    let pominiete = (staraTablica40 || []).filter(num => !nowaTablica40.includes(num));
    console.log('Pominiƒôte numery:', staraTablica40);

    if (searchTerm.length === 1) {
        isSearching = true;
        console.log("Rozpoczƒôto wyszukiwanie:", isSearching);
    } 
    
    if (searchTerm.length === 0) {
        isSearching = false;
        if (isSearching2) {
        przekazArgument0(tablica3[2], '', false, '', true, true, tablica3[1], tablica3[4], false, null, null, false, staraTablica40);
        }
        console.log("Pusty input - przerywamy");
        matchingKeys = [];
        tablica40 = []; // Resetujemy tablicƒô
        przekazArgument0(tablica3[2], '', false, 'fiszki', true, true, tablica3[1], tablica3[4], false, '', '');
        return;
    }

    document.getElementById("singleSentenceBtn").addEventListener("click", () => {
        tablica3[0] = 'zdania';
        przekazArgument0(tablica3[2], '', false, 'zdania', false, false, tablica3[1], tablica3[4], true, matchingLessons5, matchingLessons5b, false);
    });

    document.getElementById("threeSentencesBtn").addEventListener("click", () => {
        tablica3[0] = 'fiszki';
        przekazArgument0(tablica3[2], '', false, 'fiszki', false, false, tablica3[1], tablica3[4], true, matchingLessons5, matchingLessons5b, false);
    });

    przekazArgument0(tablica3[2], '', false, tablica3[0], false, false, tablica3[1], tablica3[4], true, matchingLessons5, matchingLessons5b, isSearching2, staraTablica40);

});

document.getElementById("singleWordBtn").addEventListener("click", function() {
    console.log("Klikniƒôto singleWordBtn");
isSearching2 = true;
    console.log("Wy≈õwietlam zawarto≈õƒá tablica40 (tylko raz):", tablica40);

    function showFiszkiForLesson5dd(tablica40, tablica41, fiszki) {
        console.log("Wybrany rodzaj: ", tablica40);

        setTimeout(() => {
            let matchingFiszki122 = [];

            tablica40.forEach(t40 => {
                fiszki.forEach(fiszka => {
                    if (fiszka.id[0] === t40) {
                        matchingFiszki122.push(fiszka); // Zapisujemy ca≈Çy obiekt, nie tylko fiszka.id
                    }
                });
            });

            console.log("Wy≈õwietlam:", matchingFiszki122);

            // Przyk≈Çadowe u≈ºycie funkcji generateFiszkaBlock3
            matchingFiszki122.forEach(fiszka => {
                generateFiszkaBlock3(fiszka, "lessonId2"); // Przekazujemy ca≈Çy obiekt fiszka
            });

        }, 1000);
    }

    setTimeout(() => {
        showFiszkiForLesson5dd(tablica40, tablica41, fiszki);
    }, 1000);
});



    // Dodanie zdarzenia klikniƒôcia do przycisku
document.getElementById("singleSentenceBtn").addEventListener("click", () => {
    function showFiszkiForLesson5ddb(tablica40, tablica41, fiszki) {
    console.log("Wybrany rodzaj: ", tablica40);

    setTimeout(() => {
        let idFiszki = [];

        // Pobieranie id pasujƒÖcych do tablica40
        tablica40.forEach(t40 => {
            fiszki.forEach(fiszka => {
                if (fiszka.id[0] === t40) {
                    idFiszki.push(fiszka.id); // Zapisujemy ca≈Çy obiekt
                }
            });
        });

        console.log("Wy≈õwietlam4:", idFiszki);

        // Podzia≈Ç na mniejsze grupy po 3 elementy
        let chunkedIdFiszki = [];
        for (let i = 0; i < idFiszki.length; i += 3) {
            chunkedIdFiszki.push(idFiszki.slice(i, i + 3));
        }

        console.log("Podzielone grupy ID:", chunkedIdFiszki);

        // Usuwanie ka≈ºdej grupy osobno
        chunkedIdFiszki.forEach(group => {
            removeFiszka(group);
        });

    }, 0);
}

function removeFiszka(idFiszkiGroup) {
    idFiszkiGroup.forEach(singleId => {
        // Je≈õli singleId jest tablicƒÖ, ≈ÇƒÖczymy jej elementy separatorem ','
        let idString = Array.isArray(singleId) ? singleId.join(',') : singleId;
        const className = `fiszka5 fiszka-${idString}`;
        
        // Escape'owanie przecink√≥w w selektorze CSS
        const selector = `.${className.replace(/,/g, '\\,').replace(/\s+/g, '.')}`; 

        console.log("Wy≈õwietlam4b:", selector);
    
        const $fiszkaToRemove = $('.grid-container').find(selector);
        if ($fiszkaToRemove.length) {
            console.log('Element znaleziony po op√≥≈∫nieniu, usuwam...');
            $fiszkaToRemove.remove();
        } else {
            console.log('Element nadal nie znaleziony.');
        }
    });
}

        setTimeout(() => {
        showFiszkiForLesson5ddb(tablica40, tablica41, fiszki);
    }, 0);
        tablica3[0] = 'zdania';
        przekazArgument0(tablica3[2], '', false, 'zdania', true, true, tablica3[1], tablica3[4], false, '', '');
    });
        // Dodanie zdarzenia klikniƒôcia do przycisku
document.getElementById("threeSentencesBtn").addEventListener("click", () => {

function showFiszkiForLesson5ddb(tablica40, tablica41, fiszki) {
    console.log("Wybrany rodzaj: ", tablica40);

    setTimeout(() => {
        let idFiszki = [];

        // Pobieranie id pasujƒÖcych do tablica40
        tablica40.forEach(t40 => {
            fiszki.forEach(fiszka => {
                if (fiszka.id[0] === t40) {
                    idFiszki.push(fiszka.id); // Zapisujemy ca≈Çy obiekt
                }
            });
        });

        console.log("Wy≈õwietlam4:", idFiszki);

        // Podzia≈Ç na mniejsze grupy po 3 elementy
        let chunkedIdFiszki = [];
        for (let i = 0; i < idFiszki.length; i += 3) {
            chunkedIdFiszki.push(idFiszki.slice(i, i + 3));
        }

        console.log("Podzielone grupy ID:", chunkedIdFiszki);

        // Usuwanie ka≈ºdej grupy osobno
        chunkedIdFiszki.forEach(group => {
            removeFiszka(group);
        });

    }, 0);
}

function removeFiszka(idFiszkiGroup) {
    idFiszkiGroup.forEach(singleId => {
        // Je≈õli singleId jest tablicƒÖ, ≈ÇƒÖczymy jej elementy separatorem ','
        let idString = Array.isArray(singleId) ? singleId.join(',') : singleId;
        const className = `fiszka5 fiszka-${idString}`;
        
        // Escape'owanie przecink√≥w w selektorze CSS
        const selector = `.${className.replace(/,/g, '\\,').replace(/\s+/g, '.')}`; 

        console.log("Wy≈õwietlam4b:", selector);
    
        const $fiszkaToRemove = $('.grid-container').find(selector);
        if ($fiszkaToRemove.length) {
            console.log('Element znaleziony po op√≥≈∫nieniu, usuwam...');
            $fiszkaToRemove.remove();
        } else {
            console.log('Element nadal nie znaleziony.');
        }
    });
}

        setTimeout(() => {
        showFiszkiForLesson5ddb(tablica40, tablica41, fiszki);
    }, 0);

        tablica3[0] = 'fiszki';
    przekazArgument0(tablica3[2], '', false, 'fiszki', true, true, tablica3[1], tablica3[4], false, '', '');
    });
    

        document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.czas40').forEach(btn => btn.style.border = '1px solid black');

    // Pobierz pierwszy przycisk z klasƒÖ 'czas40' i zaznacz go domy≈õlnie
    const firstButton = document.querySelector('#threeSentencesBtn');
    if (firstButton) {
        firstButton.style.border = '2px solid blue';
    }
        document.querySelectorAll('.rodzaj-button').forEach(button => {
            button.addEventListener('click', function() {
                document.querySelectorAll('.rodzaj-button').forEach(btn => btn.style.border = '1px solid black');
                this.style.border = '2px solid blue';
            });
        });
    });
    
function showFiszkiForLesson5d(matchingFiszki1v, tablica41) {
    if (tablica41.length > 0) {
    matchingFiszki1v.forEach((fiszka, index) => {
        let id = fiszka; // Pobranie id z matchingFiszki
        let parametr = tablica41[index] || ''; // Pobranie odpowiadajƒÖcej warto≈õci z tablica41

        if (Array.isArray(fiszka)) {
            // Po≈ÇƒÖcz warto≈õci z tablicy id w jeden ciƒÖg znak√≥w oddzielony przecinkami
            id = fiszka.slice(0, 3).join(',');
            // Obs≈Çuga dodatkowego parametru (np. czwartego elementu w tablicy)
            parametr = fiszka.length > 3 ? fiszka[3] : parametr;
        }

        // Tworzenie klasy CSS dla fiszki
        const className = `fiszka-${id}${parametr ? '\\,' + parametr : ''}`;
        console.log(`Tworzƒô fiszkƒô z klasƒÖ: ${className}`);

        generateFiszkaBlock3(id, parametr);
    });
}
}

let sentence1bba = "";
                    let sentence1bbab = "";
                    function addBackgroundToText1b(matchingFiszki1, matchingIndexes, aktualny, lesson1PartLength, polski) {
                        console.log('hejkk10', indexDiv);
                        $(document).ready(function () {
                            sentence1bba = "";
                            sentence1bbab = "";
                            setTimeout(() => {
                                for (let i = 0; i < matchingFiszki1.length; i++) {
                                    const fiszka = matchingFiszki1[i];
                                    console.log('fiszka:', fiszka);
                                    if (!fiszka.sentence1 || fiszka.sentence1.length === 0) {
                                        console.log('fiszka.sentence1 is undefined or empty');
                                        continue; // Je≈õli sentence1 nie istnieje lub jest puste, przejd≈∫ do nastƒôpnej fiszki
                                    }

                                    // Iteracja przez elementy sentence1
                                    for (let ki = 0; ki < fiszka.sentence1.length; ki++) {
                                        let sentencePart = fiszka.sentence1[ki];
                                        console.log('sentencePart5:', sentencePart);
                                        const indexToCheck = i + lesson1PartLength + 1;
                                        console.log('indexToCheck5:', indexToCheck);
                                        // Sprawd≈∫, czy indeks jest r√≥wny 0
                                        if (aktualny) {
                                            if (matchingIndexes.includes(indexToCheck)) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart = spanElement.outerHTML;
                                            }
                                        }

                                        sentence10 += sentencePart + " ";
                                    }
                                }
                                for (let ii = 0; ii < matchingFiszki1.length; ii++) {
                                    const fiszka = matchingFiszki1[ii];
                                    console.log('fiszka2:', fiszka);
                                    if (!fiszka.sentence2 || fiszka.sentence2.length === 0) {
                                        console.log('fiszka.sentence2 is undefined or empty');
                                        continue;
                                    }

                                    // Iteracja przez elementy sentence1
                                    for (let kii = 0; kii < fiszka.sentence2.length; kii++) {
                                        let sentencePart2 = fiszka.sentence2[kii];
                                        console.log('sentencePart5:', sentencePart2);
                                        const indexToCheck = ii + lesson1PartLength + 1;
                                        console.log('indexToCheck77:', indexToCheck);
                                        if (aktualny) {
                                            if (matchingIndexes.includes(indexToCheck)) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart2;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart2 = spanElement.outerHTML;
                                            }
                                        }
                                        sentence11 += sentencePart2 + " ";
                                    }
                                }
                                for (let li = 0; li < matchingFiszki1.length; li++) {
                                    const fiszka = matchingFiszki1[li];
                                    console.log('fiszka:', fiszka);
                                    let sentencePart3 = fiszka.translateb;
                                    console.log('sentencePart3:', sentencePart3);
                                    if (aktualny) {
                                        // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                        const spanElement = document.createElement('span');
                                        spanElement.textContent = sentencePart3;
                                        sentencePart3 = spanElement.outerHTML;

                                    }
                                    sentence1bba += sentencePart3 + " ";
                                }
                                for (let li = 0; li < matchingFiszki1.length; li++) {
                                    const fiszka = matchingFiszki1[li];
                                    console.log('fiszka:', fiszka);
                                    let sentencePart3 = fiszka.translate;
                                    console.log('sentencePart3:', sentencePart3);
                                    if (aktualny) {
                                        // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                        const spanElement = document.createElement('span');
                                        spanElement.textContent = sentencePart3;
                                        sentencePart3 = spanElement.outerHTML;

                                    }
                                    sentence1bbab += sentencePart3 + " ";
                                }

                                console.log('hej20', sentence1bba);

                                $sentenceDiv.html(`
${sentence10}${sentence11}<br>
<div class="sentence1bba">${sentence1bba}</div>
<div class="sentence1bbab">${sentence1bbab}</div>
`);

                                console.log('hej465', polski);
                                $sentence1bba.css({
                                    'top': '0px',
                                    'position': 'relative'
                                });
                                $sentence1bbab.css({
                                    'top': '40px',
                                    'position': 'relative'
                                });

                            }, 300);
                        });
                        console.log('Zawarto≈õƒá zmiennej sentence1:', sentence1b); // Wy≈õwietlenie zawarto≈õci zmiennej sentence1                          
                    }

                    
                    /////
                    let sentence1bba = "";
                    let sentence1bbab = "";
                    function addBackgroundToText1b(matchingFiszki1, matchingIndexes, aktualny, lesson1PartLength, matchingIndexes2, rodzaj, matchingIndexes3, matchingLessons5b) {
                        $(document).ready(function () {

                            console.log('hejkh', lesson1PartLength);
                            sentence1bba = "";
                            sentence1bbab = "";
                            setTimeout(() => {
                                for (let i = 0; i < matchingFiszki1.length; i++) {
                                    const fiszka = matchingFiszki1[i];
                                    console.log('fiszka:', fiszka);
                                    if (!fiszka.sentence1 || fiszka.sentence1.length === 0) {
                                        console.log('fiszka.sentence2 is undefined or empty');
                                        continue;
                                    }

                                    // Iteracja przez elementy sentence1
                                    for (let ki = 0; ki < fiszka.sentence1.length; ki++) {
                                        let sentencePart = fiszka.sentence1[ki];
                                        console.log('matchingIndexes1000:', matchingLessons5b);
                                        const indexToCheck = i + lesson1PartLength + 1;
                                        const indexToCheck2 = i + lesson1PartLength + 1;
                                            if (matchingIndexes.includes(indexToCheck) && matchingLessons5b === null) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart = spanElement.outerHTML;
                                            }
                                            if (matchingLessons5b.includes(indexToCheck2) && matchingLessons5b !== null) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart = spanElement.outerHTML;
                                            }
                                        
                                        function countCategoryInFiszki(matchingFiszki1, category) {
                                            // Zmienna do przechowywania sumy wystƒÖpie≈Ñ
                                            let totalCount = 0;

                                            // Iteracja przez wszystkie fiszki
                                            for (let i = 0; i < matchingFiszki1.length; i++) {
                                                const fiszka = matchingFiszki1[i];

                                                // Zlicz wystƒÖpienia kategorii w category3
                                                if (fiszka.category3 && Array.isArray(fiszka.category3)) {
                                                    const count = fiszka.category3.filter(cat => cat === category).length;
                                                    totalCount += count; // Dodaj do sumy
                                                }
                                            }

                                            return [totalCount]; // Zwr√≥ƒá tablicƒô z jednƒÖ sumarycznƒÖ warto≈õciƒÖ
                                        }

// U≈ºycie funkcji
                                        const categoryToCount = "PresentSimplePodmiot";
                                        const categoryToCount2 = "PresentSimpleCzasownik";
                                        const occurrences = countCategoryInFiszki(matchingFiszki1, categoryToCount);
                                        const occurrences2 = countCategoryInFiszki(matchingFiszki1, categoryToCount2);
// Wypisywanie wynik√≥w
                                        console.log('Suma wystƒÖpie≈Ñ:', occurrences2);
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Flaga sprawdzajƒÖca, czy podmiot zosta≈Ç ju≈º dodany

                                        if (aktualny && rodzaj === "play" && matchingIndexes2.includes(indexToCheck2)) {
                                            console.log('hej123', occurrences);
                                            // Sprawd≈∫, czy to jest pierwsze s≈Çowo
                                            if (i === 0 && occurrences[0] === 2) {
                                                console.log('Pod≈õwietlono pierwsze s≈Çowo:', fiszka.sentence1[ki]);
                                                const firstWordElement = document.createElement('span');
                                                firstWordElement.textContent = sentencePart;
                                                firstWordElement.classList.add('green'); // Dodaj klasƒô, kt√≥ra pod≈õwietla s≈Çowo na zielono
                                                sentencePart = firstWordElement.outerHTML; // Zamie≈Ñ pierwsze s≈Çowo na jego wersjƒô z "span"
                                            }
                                            // Dodaj podmiot po drugim s≈Çowie, je≈õli occurrences wynosi 2
                                            if (i === 1 && occurrences[0] === 2) {
                                                console.log('Dodano "podmiot" po drugim s≈Çowie:', fiszka.sentence1[ki]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('green');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(podmiot)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(2, 0, podmiotElement.outerHTML); // Dodaj podmiot po drugim s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            } else if (i === 0 && occurrences[0] === 1) {
                                                console.log('Dodano "podmiot" po pierwszym s≈Çowie:', fiszka.sentence1[ki]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('green');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(podmiot)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(3, 0, podmiotElement.outerHTML); // Dodaj podmiot po pierwszym s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            }
                                        }
                                        if (aktualny && rodzaj === "play" && matchingIndexes3.includes(indexToCheck2)) {
                                            console.log('hej123', occurrences);
                                            // Sprawd≈∫, czy to jest pierwsze s≈Çowo
                                            // Dodaj podmiot po drugim s≈Çowie, je≈õli occurrences wynosi 2

                                            if (i === 2 && occurrences2[0] === 2) {
                                                console.log('Dodano "podmiot" po drugim s≈Çowie:', fiszka.sentence1[ki]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('blue');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(2, 1, podmiotElement.outerHTML); // Dodaj podmiot po drugim s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            } else if (i === 2 && occurrences2[0] === 1) {
                                                console.log('Dodano "podmiot" po drugim s≈Çowie:', fiszka.sentence1[ki]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('blue');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(3, 0, podmiotElement.outerHTML); // Dodaj podmiot po drugim s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            } else if (i === 1 && occurrences2[0] === 1) {
                                                console.log('Dodano "podmiot" po pierwszym s≈Çowie:', fiszka.sentence1[ki]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('blue');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(3, 0, podmiotElement.outerHTML); // Dodaj podmiot po pierwszym s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            }
                                        }
                                        // Dodaj sentencePart do sentence10
                                        sentence10 += sentencePart + " ";

                                    }

                                }
                                for (let ii = 0; ii < matchingFiszki1.length; ii++) {
                                    const fiszka = matchingFiszki1[ii];
                                    console.log('fiszka2:', fiszka);
                                    if (!fiszka.sentence2 || fiszka.sentence2.length === 0) {
                                        console.log('fiszka.sentence2 is undefined or empty');
                                        continue;
                                    }

                                    // Iteracja przez elementy sentence1
                                    for (let kii = 0; kii < fiszka.sentence2.length; kii++) {
                                        let sentencePart2 = fiszka.sentence2[kii];
                                        console.log('sentencePart5:', ii);
                                        const indexToCheck = ii + lesson1PartLength + 1;
                                        const indexToCheck2 = ii + lesson1PartLength + 1;
                                        console.log('indexToCheck77:', indexToCheck);
                                        if (aktualny) {
                                            if (matchingIndexes.includes(indexToCheck)) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart2;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart2 = spanElement.outerHTML;
                                            }
                                        }
                                        
                                        function countCategoryInFiszki1b(matchingFiszki1, category) {
                                            // Zmienna do przechowywania sumy wystƒÖpie≈Ñ
                                            let totalCount = 0;

                                            // Iteracja przez wszystkie fiszki
                                            for (let ii = 0; ii < matchingFiszki1.length; ii++) {
                                                const fiszka = matchingFiszki1[ii];

                                                // Zlicz wystƒÖpienia kategorii w category3
                                                if (fiszka.category3 && Array.isArray(fiszka.category3)) {
                                                    const count = fiszka.category3.filter(cat => cat === category).length;
                                                    totalCount += count; // Dodaj do sumy
                                                }
                                            }

                                            return [totalCount]; // Zwr√≥ƒá tablicƒô z jednƒÖ sumarycznƒÖ warto≈õciƒÖ
                                        }
                                        const categoryToCount2 = "PresentSimpleCzasownik";
                                        const occurrences2 = countCategoryInFiszki1b(matchingFiszki1, categoryToCount2);
// Wypisywanie wynik√≥w
                                        console.log('Suma wystƒÖpie≈Ñ5:', occurrences2);
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Flaga sprawdzajƒÖca, czy podmiot zosta≈Ç ju≈º dodany

                                        if (aktualny && rodzaj === "play" && matchingIndexes3.includes(indexToCheck)) {
                                            // Sprawd≈∫, czy to jest pierwsze s≈Çowo
                                            // Dodaj podmiot po drugim s≈Çowie, je≈õli occurrences wynosi 2

                                            if (ii === 6 && occurrences2[0] === 1) {
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart2;
                                                podmiotElement.classList.add('blue');
                                                sentencePart2 = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart2.split(' ');
                                                words.splice(2, 0, podmiotElement.outerHTML); // Dodaj podmiot po pierwszym s≈Çowie
                                                sentencePart2 = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            }
                                        }
                                        // Dodaj sentencePart do sentence10
                                        sentence11 += sentencePart2 + " ";

                                    }
                                }

                                for (let li = 0; li < matchingFiszki1.length; li++) {
                                    const fiszka = matchingFiszki1[li];
                                    console.log('fiszka:', fiszka);
                                    let sentencePart3 = fiszka.translateb;
                                    console.log('sentencePart3:', sentencePart3);
                                    if (aktualny) {
                                        // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                        const spanElement = document.createElement('span');
                                        spanElement.textContent = sentencePart3;
                                        sentencePart3 = spanElement.outerHTML;

                                    }
                                    sentence1bba += sentencePart3 + " ";
                                }
                                for (let li = 0; li < matchingFiszki1.length; li++) {
                                    const fiszka = matchingFiszki1[li];
                                    console.log('fiszka:', fiszka);
                                    let sentencePart3 = fiszka.translate;
                                    console.log('sentencePart3:', sentencePart3);
                                    if (aktualny) {
                                        // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                        const spanElement = document.createElement('span');
                                        spanElement.textContent = sentencePart3;
                                        sentencePart3 = spanElement.outerHTML;

                                    }
                                    sentence1bbab += sentencePart3 + " ";
                                }

                                console.log('hej20', sentence1bba);
                                $sentenceDiv.html(`
<button class="left-button first-button">+<br></button>
${sentence10}${sentence11}<br>
<div class="sentence1bba">${sentence1bba}</div>
<div class="sentence1bba">${sentence1bbab}</div>
<button class="left-buttonb second-button">+<br></button>
${sentence20}${sentence22}<br>
<div class="sentence1bb1b">${sentence1bb1b}</div>
<div class="sentence1bba2">${sentence1bba2}</div>
<button class="left-buttonbb third-button">+<br></button>
${sentence30}${sentence33}<br>
        <div class="sentence1bb3">${sentence1bb3}</div>
        <div class="sentence1bb1c">${sentence1bb1c}</div>
`);
                                $('.sentence1bba').html('');
                                $sentenceDiv.on('click', '.left-button', function () {

                                    // Dodawanie zdania tylko je≈õli sentence1bb2 jest puste
                                    if (sentence1bba === "") {
                                        let sentencePart3 = fiszka.translateb ? fiszka.translateb : "";
                                        sentence1bba += sentencePart3 + " ";
                                    }
                                    if (sentence1bbab === "") {
                                        let sentencePart33 = fiszka.translate ? fiszka.translate : "";
                                        sentence1bbab += sentencePart33 + " ";
                                    }
                                    console.log('hej20', sentence1bba);

                                    // Dodanie tre≈õci do diva wraz z przyciskiem
                                    $sentenceDiv.html(`
<button class="left-button first-button">+<br></button>
${sentence10}${sentence11}<br>
<div class="sentence1bba">${sentence1bba}</div>
        <div class="sentence1bba">${sentence1bbab}</div>
<button class="left-buttonb second-button">+<br></button>
${sentence20}${sentence22}<br>
<div class="sentence1bb1b">${sentence1bb1b}</div>
<div class="sentence1bba2">${sentence1bba2}</div>
<button class="left-buttonbb third-button">+<br></button>
${sentence30}${sentence33}<br>
        <div class="sentence1bb3">${sentence1bb3}</div>
        <div class="sentence1bb1c">${sentence1bb1c}</div>
`);
                                    // Ustawienie stylu dla przycisk√≥w .left-button
                                    $('.sentence1bb1b').html('');
                                    $('.sentence1bba2').html('');
                                    $('.left-button').css('position', 'relative');
                                    $('.left-buttonb').css('position', 'relative');
                                    $('.left-buttonbb').css('position', 'relative');
                                    let sentencePart1 = fiszka.translate ? fiszka.translate : ""; // Sprawd≈∫, czy translate istnieje
                                    let sentencePart3 = fiszka.translateb ? fiszka.translateb : ""; // Sprawd≈∫, czy translate istnieje
                                    console.log('Klikniƒôto przycisk');
                                    if ($sentence1bba.css('display') === 'none' || sentence1bVisible) {
                                        $sentence1bba.css('display', 'block');
                                        $sentence1bba.css({
                                            'margin-bottom': '-20px',
                                            'top': '0px',
                                            'position': 'relative'
                                        });
                                    }
                                    if ($sentence1bbab.css('display') === 'none' || sentence1bVisible) {
                                        $sentence1bbab.css('display', 'block');
                                        $sentence1bbab.css({
                                            'margin-bottom': '-20px',
                                            'top': '0px',
                                            'position': 'relative'
                                        });
                                    }
                                    // Dodanie stylizacji na hover

                                    $sentence1bb1b.html('');
                                    $sentence1bb1b.empty();
                                });
                                $sentence1bb1b.html('');
                                $sentence1bb1b.empty();
                            }, 0);
                        });
                        console.log('Zawarto≈õƒá zmiennej sentence1:', sentence1b); // Wy≈õwietlenie zawarto≈õci zmiennej sentence1                          
                    }

                    
                    <!DOCTYPE html>
<html>
    <head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-N1YHS2Y62J"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-N1YHS2Y62J');
</script>

        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
        <link rel="stylesheet" type="text/css" href="css/alert.css">
        <link rel="stylesheet" type="text/css" href="css/lista.css">
                <link rel="stylesheet" type="text/css" href="js/fiszki.css">
        <link rel="stylesheet" type="text/css" href="css/styl7.css">
        <link rel="stylesheet" type="text/css" href="js/audioaudio.css">
        <link rel="stylesheet" type="text/css" href="css/1nowe-pc.css">
        <script src="js/story.js"></script>
        <script src="js/storage.js"></script>
        <script src="js/testowyb.js"></script>
                <script src="js/lista.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            @media (min-width: 999px) {
                .search-container {
    display: flex;
    align-items: center;
    gap: 0px; /* Odstƒôp miƒôdzy elementami */
}
                .search-wrapper {
  display: flex;
  width: 300px;
  flex-direction: column;
  gap: 20px;
}

.button-container {
    position: relative;
    gap: 0px;
    top: 96px;
}

input {
  font-size: 1rem;
}

.user-cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: .25rem;
  margin-top: 1rem;
}

.card {
  border: 1px solid black;
  background-color: white;
  padding: .5rem;
}

.card > .header {
  margin-bottom: .25rem;
}

.card > .body {
  font-size: .8rem;
  color: #777;
}

.hide {
  display: none;
}
                .sentence-container {
                    display: flex; /* U≈ºyj flexboxa dla wyr√≥wnania w linii */
                    align-items: center; /* Wyr√≥wnaj pionowo do ≈õrodka */
                }
.sentence-container {
    display: inline-block; /* Pozwala zachowaƒá uk≈Çad inline, ale z kontrolƒÖ nad pozycjonowaniem */
    position: relative; /* Kontener, kt√≥ry pozwala na absolutne pozycjonowanie categoryHTML */
}

.category-container {
    font-size: 10px;
    position: absolute; /* Pozycjonowanie absolutne */
    left: 200px;
    top: 0px; /* Wyr√≥wnanie w pionie na ≈õrodek */
    margin-top: 0px;
    left: -120px; /* Ustawienie na lewo od zdania, dostosuj warto≈õƒá, aby pasowa≈Ço */
    transform: translateY(-50%); /* Centrowanie w pionie */
    z-index: 10; /* Zapewnia, ≈ºe categoryHTML bƒôdzie na wierzchu */
}

.left-button {
    position: relative; /* Pozostaje w normalnym przep≈Çywie */
}
.left-button2 {
    position: relative; /* Pozostaje w normalnym przep≈Çywie */
    height: 25px;
    width: 25px;
    background-color: blue;
    border-radius: 8px;
}
span.highlight {
    margin-left: 200px;
}
                .nav-button {
                    font-size: 0.8em; /* Dostosuj rozmiar czcionki przycisk√≥w */
                    margin: 0 5px; /* Marginesy miƒôdzy przyciskami a tekstem */
                }
                                .next-button {
                    font-size: 0.8em; /* Dostosuj rozmiar czcionki przycisk√≥w */
                    margin: 0 5px; /* Marginesy miƒôdzy przyciskami a tekstem */
                }

                .highlighted {
                    color: green; /* Kolor dla wyr√≥≈ºnionego s≈Çowa */
                    font-weight: bold; /* Opcjonalnie: pogrubienie dla wyr√≥≈ºnionego s≈Çowa */
                }

                .blink {
                    animation: blink-animation 1s steps(5, start) infinite; /* Przyk≈Çad animacji mrugania */
                }

                @keyframes blink-animation {
                    to {
                        visibility: hidden;
                    }
                }
                .bottom-bar {
                    display: none;
                }

                .show {
                    transform: translateY(-60px); /* Pasek widoczny po za≈Çadowaniu */
                }
                .hidden {
                    transform: translateY(100%); /* Schowanie paska poza ekran */
                }
                .bottom-button {
                    background-color: #4CAF50;
                    color: white;
                    border: none;
                    padding: 10px;
                    font-size: 8px;
                    border-radius: 5px;
                    cursor: pointer;
                }

                .bottom-button:hover {
                    background-color: #45a049;
                }

                .lupka {
                    position: absolute;
                    width: auto;
                    height: 30px;
                    cursor: pointer;
                }

                .toggle-button {
                    display: none;
                }

                #arrow {
                    font-size: 20px;
                }

                .show-toggle-button {
                    bottom: 60px; /* Strza≈Çka przesuwa siƒô do g√≥ry gdy pasek jest widoczny */
                }
                /* Styl dla g≈Ç√≥wnego kontenera */
                .container {
                    position: relative;
                    display: flex;
                    align-items: flex-start; /* Ustawienie wyr√≥wnania element√≥w wertykalnie */
                    justify-content: space-between;
                    z-index: 99999999;
                }
                .content-container {
                    max-width: 100%;
                    position: relative;
                }
                /* Styl dla menu pionowego */
                .side-menu {
                    width: 118px;
                    margin-right: 20px;
                }
                .left-button,
                .left-buttonb,
                .left-buttonbb{
                    color: orange;
                    border-radius: 5px;
                }
                .white-text {
                    color: white !important;
                }
                .side-menu button {
                    display: block;
                    margin-bottom: 10px;
                    width: 100%;
                    padding: 8px 15px;
                    font-size: 16px;
                    border: none;
                    cursor: pointer;
                }

                @keyframes blinkBackground {
                    0% {
                        background-color: yellow;
                    }
                    50% {
                        background-color: transparent;
                    }
                    100% {
                        background-color: yellow;
                    }
                }

                .blinking {
                    animation: blinkBackground 1s infinite;
                }
                .image-container {
                    width: 330px;
                    position: relative;
                    height: auto;
                    left: 0px;
                    margin-right: 0px;
                }

                .image-container2 {
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    background-color: blue;
                    width: 330px;
                    position: relative;
                    height: 80px;
                    margin-bottom: 0px;
                    align-items: center;
                    font-size: 20px;
                }

                .image-container3 {
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    background-color: blue;
                    width: 100%;
                    position: relative;
                    min-height: 100px;
                    height: auto;
                    margin-bottom: 0px;
                    align-items: center;
                    font-size: 20px;
                    margin-top: 10px;
                    order: -1; /* Kolejno≈õƒá odwrotna - spycha w d√≥≈Ç */
                }
                .background-overlay {
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-color: yellow;
                    opacity: 0.7;
                    z-index: 1000; /* Wysoki z-index, aby by≈Ço na wierzchu */
                }

                .background-video {
                    position: absolute;
                    z-index: 1; /* Wideo, ustaw na ni≈ºszy z-index */
                }
                                .image-container4 {
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    background-color: blue;
                    width: 100%;
                    position: relative;
                    min-height: 100px;
                    min-width: 330px;
                    height: auto;
                    margin-bottom: 0px;
                    align-items: center;
                    font-size: 20px;
                    margin-top: 10px;
                    order: -1; /* Kolejno≈õƒá odwrotna - spycha w d√≥≈Ç */
                }
                #wordDisplay {
    position: absolute;
    bottom: 0px;
    cursor: pointer;
    font-size: 22px;
    right: -140px;
    width: 130px;
    height: 30px;
    text-align: center;
    line-height: 30px;
    color: black;
    z-index: 101;
    background-color: lightgray;
    border-radius: 8px;
    border: 2px solid black;
}
                .image-container5 {
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    background-color: blue;
                    width: 100%;
                    position: relative;
                    min-height: 100px;
                    height: auto;
                    margin-bottom: 0px;
                    align-items: center;
                    font-size: 20px;
                    margin-top: 10px;
                    order: -1; /* Kolejno≈õƒá odwrotna - spycha w d√≥≈Ç */
                    z-index: 10; /* T≈Ço kontenera, ustaw na wiƒôkszy z-index ni≈º wideo */
                }
                .scene-description {
                    position: absolute;
                    font-size: 15px;
                    top: 10px; /* Odleg≈Ço≈õƒá od g√≥rnej krawƒôdzi kontenera */
                    right: -120px; /* Przesuniƒôcie w lewo o 120 pikseli, aby wystawa≈Ç poza prawƒÖ krawƒôd≈∫ */
                    background-color: #000;
                    color: #fff;
                    padding: 5px 10px;
                    z-index: 1000;
                    white-space: nowrap; /* Zapobiega zawijaniu tekstu */
                }
                .scene-description2 {
                    position: absolute;
                    font-size: 15px;
                    top: 10px; /* Odleg≈Ço≈õƒá od g√≥rnej krawƒôdzi kontenera */
                    left: -100px; /* Odleg≈Ço≈õƒá od g√≥rnej krawƒôdzi kontenera */
                    background-color: #000;
                    color: #fff;
                    padding: 5px 10px;
                    z-index: 1000;
                    white-space: nowrap; /* Zapobiega zawijaniu tekstu */
                }
                .overlay-button {
                    position: absolute;
                    z-index: 1000;
                    white-space: nowrap; /* Zapobiega zawijaniu tekstu */
                    bottom: 10px;
                    right: 10px;
                    width: 18px;
                    height: 18px;
                    cursor: pointer;
                    border-radius: 8px;
                }
                .slide-button {
                    position: relative; /* Position relative to the container */
                    bottom: 10px;
                    right: -40px; /* Start position off-screen */
                    width: 30px;
                    height: 30px;
                    cursor: pointer;
                    border-radius: 8px;
                    background-color: blue;
                    color: white;
                    display: none; /* Hide initially */
                    z-index: 1000;
                    white-space: nowrap; /* Zapobiega zawijaniu tekstu */
                }
                .container:hover .overlay {
                    transform: translateX(0); /* Przesuwanie div-a na swoje miejsce */
                }
                .image-container3:hover .overlay {
                    opacity: 1; /* Nak≈Çadka widoczna przy najechaniu */
                }

                .run-button {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    display: none; /* Ukrycie przycisku */
                    z-index: 2; /* Wy≈ºszy z-index, aby przycisk by≈Ç na wierzchu */
                }

                .image-container3:hover .run-button {
                    display: block; /* Wy≈õwietlenie przycisku na hover */
                }
                .image-container3:hover .run-button3 {
                    display: block; /* Wy≈õwietlenie przycisku na hover */
                }
                .run-button2 {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    display: none; /* Ukrycie przycisku */
                    z-index: 2; /* Wy≈ºszy z-index, aby przycisk by≈Ç na wierzchu */
                }
                .run-button3 {
                    position: absolute;
                    top: 165px;
                    right: 20px;
                    display: none; /* Ukrycie przycisku */
                    z-index: 99999; /* Wy≈ºszy z-index, aby przycisk by≈Ç na wierzchu */
                }
                .dynamic-div {
                    position: absolute;
                    bottom: 5px; /* Ustawienie w dowolnym miejscu w kontenerze */
                    left: 10px;
                    font-size: 15px;
                    width: 150px; /* Szeroko≈õƒá dynamicznego div-a */
                    height: 20px; /* Wysoko≈õƒá dynamicznego div-a */
                    background-color: rgba(255, 0, 0, 0.5); /* Przezroczyste t≈Ço */
                    color: white;
                    z-index: 1000; /* Wy≈ºszy z-index, aby by≈Ç nad overlay */
                    display: none; /* PoczƒÖtkowo ukryty */
                    font-size: 10px;
                }
                                                .dynamic-div2 {
                    position: absolute;
                    bottom: 5px; /* Ustawienie w dowolnym miejscu w kontenerze */
                    left: 10px;
                    font-size: 15px;
                    width: 150px; /* Szeroko≈õƒá dynamicznego div-a */
                    height: 20px; /* Wysoko≈õƒá dynamicznego div-a */
                    background-color: rgba(0, 0, 255, 0.5); /* Przezroczyste niebieskie t≈Ço */
                    color: white;
                    z-index: 1000; /* Wy≈ºszy z-index, aby by≈Ç nad overlay */
                    display: none; /* PoczƒÖtkowo ukryty */
                    font-size: 10px;
                }
                                               .dynamic-div3 {
                    position: absolute;
                    bottom: 5px; /* Ustawienie w dowolnym miejscu w kontenerze */
                    left: 10px;
                    font-size: 15px;
                    width: 150px; /* Szeroko≈õƒá dynamicznego div-a */
                    height: 20px; /* Wysoko≈õƒá dynamicznego div-a */
                    background-color: orange; /* Przezroczyste niebieskie t≈Ço */
                    color: white;
                    z-index: 1000; /* Wy≈ºszy z-index, aby by≈Ç nad overlay */
                    display: none; /* PoczƒÖtkowo ukryty */
                    font-size: 10px;
                }
                .image-container4:hover .run-button2 {
                    display: block; /* Wy≈õwietlenie przycisku na hover */
                }
                .image-container4:hover .run-button3 {
                    display: block; /* Wy≈õwietlenie przycisku na hover */
                }

                .sentence1bba,
                .sentence1bbab,
                sentence1bb1b,
                sentence1bba2,
                sentence1bb3,
                sentence1bb1c {
                    font-size: 16px;
                    margin-bottom: 0px;
                    z-index: 9999;
                    color: white;
                }
                .sentence1b,
                .sentence1b2,
                .sentence1b2a,
                .sentence1b22,
                .sentence1c2a,
                .sentence1c22 {
                    font-size: 16px;
                    margin-top: 0px;
                    z-index: 9999;
                    color: white;
                }
                .sentence {
                    margin-bottom: -90px;
                    color: white;
                    z-index: 9999;
                    font-size: 15px;
                }

                .sentenceB {
                    margin-top: 80px;
                    color: white;
                    z-index: 9999;
                }
                .sentenceBA {
                    margin-top: 80px;
                    color: white;
                    z-index: 9999;
                    color: blue;
                }
                .sentenceBB {
                    margin-top: 80px;
                    color: white;
                    z-index: 9999;
                }
                .sentenceBC {
                    margin-top: 80px;
                    z-index: 9999;
                    color: white;
                }
                .sentence10,
                .sentence11,
                .sentence20,
                .sentence22,
                .sentence30,
                .sentence33 {
                    margin-bottom: 20px;
                    font-size: 15px;
                    color: white;
                    z-index: 9999;
                }

                .button1,
                .button2 {
                    height: 0px;
                    width: 0px;
                }
                .highlighted-sentence {
                    background-color: rgba(255, 255, 0, 0.5); /* Kolor t≈Ça z opacity */
                    color: white;
                }
                .highlighted-sentence1 {
                    background-color: rgba(255, 255, 0, 0.5); /* Kolor t≈Ça z opacity */
                    color: white;
                }
                .highlighted {
                    background-color: #2ecc71;
                    color: red; /* Lub dowolny styl */
                }
                .yellow {
                    color: yellow;
                }
                .green {
                    background-color: rgba(0, 255, 0, 0.5);
                }
                .blue {
                    background-color: rgba(0, 0, 255, 0.5);
                }
                .flashcard-container {
                    width: 1350px;
                    height: 260px;
                    background-color: #2ecc71; /* Zielony kolor, mo≈ºesz dostosowaƒá wed≈Çug potrzeb */
                    display: flex;
                    justify-content: space-around;
                    align-items: center;
                    gap: 10px;
                    padding: 10px;
                    box-sizing: border-box;
                    position: absolute;
                    left: 50%;
                    transform: translateX(-50%);
                    left: 675px;
                    margin-top: 470px;
                }
                #buttoncreate {
                    background-color: blue;
                }
                #buttoncreate.active {
                    background-color: #2ecc71;
                }

                .flashcard-container #konsola {
                    width: 500px;
                    margin-left: -10px;
                    margin-right: -10px;
                }

                #konsola button {
                    border-radius: 8px; /* Tutaj mo≈ºesz dostosowaƒá wielko≈õƒá zaokrƒÖglenia */
                    /* Dodatkowe style przycisk√≥w */
                    border: 1px solid black;
                    padding: 3px;
                    margin: 3px;
                    background-color: #2ecc71;
                    color: white;
                    cursor: pointer;
                }
                .grid-containera {
                    width: 0px;
                    height: 0px;
                    display: grid;
                    grid-template-columns: repeat(4, 1fr);
                    gap: 10px;
                    text-align: center;
                    position: relative;
                    align-items: center;
                }

                .grid-container {
                    display: grid;
                    grid-template-columns: repeat(4, 1fr);
                    margin-bottom: 20px;
                    gap: 20px;
                    position: relative;
                    margin-right: 0px;
                    top: 0px;
                }
                .spacer {
                    height: 20px; /* Dostosuj wysoko≈õƒá przestrzeni spacerowej */
                }

                .image {
                    position: relative;
                    width: 100%;
                    height: auto;
                }

                video {
                    position: relative;
                    width: 100%;
                    height: auto;
                }
                @keyframes scaleAnimation {
                    from {
                        transform: scale(1);
                    }
                    to {
                        transform: scale(1.1); /* Dostosuj poziom powiƒôkszenia wed≈Çug preferencji */
                    }
                }

                .scaled-video {
                    animation: scaleAnimation 2s ease-in-out forwards;
                }
                .next-video {
                    transform: scale(1.1);
                }
                .progress-bar {
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    height: 5px; /* Wysoko≈õƒá paska postƒôpu */
                    background-color: #007bff; /* Kolor paska postƒôpu */
                }
                .progress-bar2 {
                    position: absolute;
                    bottom: 0;
                    height: 10px; /* Wysoko≈õƒá paska postƒôpu */
                    background-color: #007bff; /* Kolor paska postƒôpu */
                }

                #mojeVideo::-webkit-media-controls {
                    /* Ukryj kontrolki dla przeglƒÖdarek opartych na silniku Chromium (np. Chrome) */
                    display: none !important;
                }

                #mojeVideo::-webkit-media-controls-enclosure {
                    /* Ukryj kontrolki dla przeglƒÖdarek opartych na silniku Chromium (np. Chrome) */
                    display: none !important;
                }

                #mojeVideo::-webkit-media-controls-panel {
                    /* Ukryj kontrolki dla przeglƒÖdarek opartych na silniku Chromium (np. Chrome) */
                    display: none !important;
                }

                #mojeVideo {
                    /* Ukryj kontrolki dla innych przeglƒÖdarek */
                    appearance: none;
                    outline: none;
                    width: 100%; /* Dostosuj szeroko≈õƒá wideo */
                    height: auto; /* Dostosuj wysoko≈õƒá wideo */
                }

                .caption {
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    font-size: 10px;
                    color: white;
                    width: 100%;
                    text-align: left;
                    box-sizing: border-box;
                    z-index: 1;
                }

                .image:hover .caption {
                    opacity: 1;
                }

                .image {
                    width: 100%;
                    height: auto;
                }

                .caption {
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    padding-bottom: 8px;
                    font-size: 15px; /* Rozmiar czcionki */
                    font-family: Arial, sans-serif; /* Wyb√≥r czcionki */
                    color: white; /* Ustawienie koloru tekstu na bia≈Çy */
                    -webkit-text-stroke: 1px blue; /* Obramowanie tekstu w przeglƒÖdarkach opartych na silniku WebKit */
                    text-stroke: 1px white; /* Obramowanie tekstu */
                    width: 100%;
                    text-align: left;
                    box-sizing: border-box;
                    z-index: 1;
                }

                .image-container:hover .caption {
                    opacity: 1;
                }

                /* Styl dla paska poziomego z tagami */
                .horizontal-bar {
                    display: flex;
                    justify-content: center;
                    width: 100%;
                    margin-bottom: 10px;
                }

                .horizontal-bar button {
                    padding: 8px 15px;
                    font-size: 16px;
                    border: none;
                    cursor: pointer;
                    border: solid;
                    border-radius: 8px;
                }
                .green-button {
                    background-color: green;
                    color: white;
                }
                .zaznaczony-rodzaj {
                    border: 3px solid green;
                }

                .zaznaczony-charakter {
                    border: 3px solid blue;
                }
            }
            @media (max-width: 999px) {
                                .search-wrapper {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-top: -100px;
}

input {
  font-size: 1rem;
}

.user-cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: .25rem;
  margin-top: 1rem;
}

.card {
  border: 1px solid black;
  background-color: white;
  padding: .5rem;
}

.card > .header {
  margin-bottom: .25rem;
}

.card > .body {
  font-size: .8rem;
  color: #777;
}

.hide {
  display: none;
}
                /* Stylizacja modala */
                #part {
                    text-align: center;
                }
                .modal {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    position: fixed;
                    z-index: 1000;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    background-color: rgba(0, 0, 0, 0.7);
                }

                .modal-content {
                    background-color: white;
                    padding: 20px;
                    border-radius: 8px;
                    text-align: center;
                }

                button123 {
                    padding: 10px 20px;
                    margin-top: 10px;
                    border: none;
                    background-color: #4CAF50;
                    color: white;
                    cursor: pointer;
                    border-radius: 5px;
                }

                button123:hover {
                    background-color: #45a049;
                }
                /* Styl dla g≈Ç√≥wnego kontenera */
                .container {
                    display: flex;
                    max-width: 100%; /* Zapobiega przekroczeniu szeroko≈õci ekranu */
                    box-sizing: border-box;
                }
                .content-container {
                                        max-width: 100%;
                    position: relative;
                }
                /* Styl dla menu pionowego */
                .side-menu {
                    display: none;
                    width: 118px;
                    margin-right: 20px;
                }

                .side-menu button {
                    display: none;
                    margin-bottom: 10px;
                    width: 100%;
                    padding: 8px 15px;
                    font-size: 16px;
                    border: none;
                    cursor: pointer;
                }
                .left-button,
                .left-buttonb,
                .left-buttonbb {
                    font-size: 7px;
                    width: 20px;
                    height: 20px;
                    color: orange;
                    border-radius: 5px;
                }
                @keyframes blinkBackground {
                    0% {
                        background-color: yellow;
                    }
                    50% {
                        background-color: transparent;
                    }
                    100% {
                        background-color: yellow;
                    }
                }

                .blinking {
                    animation: blinkBackground 1s infinite;
                }
                .image-container {
                    width: 330px;
                    position: relative;
                    height: auto;
                    left: 0px;
                    margin-right: 0px;
                }

                .image-container2 {
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    background-color: blue;
                    max-width: 100%; /* Zapobiega przekroczeniu szeroko≈õci ekranu */
                    position: relative;
                    height: 100px;
                    margin-bottom: 0px;
                    align-items: center;
                    font-size: 20px;
                }

                .image-container3 {
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    position: relative;
                    height: 100%;
                    min-height: 100px;
                    width: 100%;
                    box-sizing: border-box;
                    align-items: center;
                    font-size: 20px;
                    z-index: 999;
                }/* T≈Ço */
                .image-container3b {
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    background-color: blue;
                    position: relative;
                    height: 240px;
                    min-width: 330px;
                    box-sizing: border-box;
                    align-items: center;
                    font-size: 20px;
                    z-index: 999;
                    order: 0; /* Domy≈õlna kolejno≈õƒá */
                    z-index: 1;
                }/* T≈Ço */
                .background-overlay {
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-color: yellow;
                    opacity: 0.7;
                    z-index: 1000; /* Wysoki z-index, aby by≈Ço na wierzchu */
                }

                .background-video {
                    height: 100%;
                    min-height: 100px;
                    width: 100%;
                    position: absolute;
                    border-left: 3px solid orange;
                    border-top: 3px solid orange;
                    border-right: 3px solid orange;
                    border-bottom: 3px solid orange;
                    z-index: 1; /* Wideo, ustaw na ni≈ºszy z-index */
                }
                .background-video22 {
                    height: 100%;
                    min-height: 100px;
                    width: 100%;
                    position: absolute;
                    border-left: 3px solid orange;
                    border-top: 3px solid orange;
                    border-right: 3px solid orange;
                    border-bottom: 3px solid orange;
                    z-index: 1; /* Wideo, ustaw na ni≈ºszy z-index */
                }

                                                .image-container4 {
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    position: relative;
                    height: auto;
                    min-height: 100px;
                    width: 100%;
                    box-sizing: border-box;
                    margin-bottom: 0px;
                    align-items: center;
                    font-size: 20px;
                    margin-top: 10px;
                    order: -1; /* Kolejno≈õƒá odwrotna - spycha w d√≥≈Ç */
                }
                                                                .image-container4:hover {
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    position: relative;
                    height: auto;
                    min-height: 100px;
                    width: 100%;
                    box-sizing: border-box;
                    margin-bottom: 0px;
                    align-items: center;
                    font-size: 20px;
                    margin-top: 10px;
                    order: -1; /* Kolejno≈õƒá odwrotna - spycha w d√≥≈Ç */
                    z-index: 110;
                }
                                #wordDisplay {
    position: absolute;
    bottom: -20px;
    cursor: pointer;
    font-size: 18px;
    left: 20px;
    width: 130px;
    height: 27px;
    text-align: center;
    line-height: 30px;
    color: black;
    z-index: 101;
    background-color: lightgray;
    border-radius: 8px;
    border: 2px solid black;
}
                .image-container5 {
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    background-color: blue;
                    position: relative;
                    height: auto;
                    min-height: 100px;
                    width: 100%;
                    box-sizing: border-box;
                    margin-bottom: 0px;
                    align-items: center;
                    font-size: 15px;
                    margin-top: 10px;
                    order: -1; /* Kolejno≈õƒá odwrotna - spycha w d√≥≈Ç */
                }/* T≈Ço */
                .scene-description {
                    position: absolute;
                    font-size: 10px;
                    top: 5px; /* Odleg≈Ço≈õƒá od g√≥rnej krawƒôdzi kontenera */
                    right: -120px; /* Przesuniƒôcie w lewo o 120 pikseli, aby wystawa≈Ç poza prawƒÖ krawƒôd≈∫ */
                    background-color: #000;
                    color: #fff;
                    padding: 5px 10px;
                    z-index: 1000;
                    white-space: nowrap; /* Zapobiega zawijaniu tekstu */
                }
                .scene-description2 {
                    position: absolute;
                    font-size: 10px;
                    top: 5px; /* Odleg≈Ço≈õƒá od g√≥rnej krawƒôdzi kontenera */
                    left: -100px; /* Odleg≈Ço≈õƒá od g√≥rnej krawƒôdzi kontenera */
                    background-color: #000;
                    color: #fff;
                    padding: 5px 10px;
                    z-index: 1000;
                    white-space: nowrap; /* Zapobiega zawijaniu tekstu */
                }
                .overlay-button {
                    position: absolute;
                    z-index: 1000000;
                    bottom: 10px;
                    right: -70px;
                    width: 18px;
                    height: 18px;
                    cursor: pointer;
                    border-radius: 8px;
                }
                .slide-button {
                    position: absolute; /* Position relative to the container */
                    bottom: 10px;
                    right: -40px; /* Start position off-screen */
                    width: 30px;
                    height: 30px;
                    cursor: pointer;
                    border-radius: 8px;
                    background-color: blue;
                    color: white;
                    display: none; /* Hide initially */
                    z-index: 1000001; /* Ensure it's above other elements */
                }
                .container:hover .overlay {
                    transform: translateX(0); /* Przesuwanie div-a na swoje miejsce */
                }
                .image-container3:hover .overlay {
                    opacity: 1; /* Nak≈Çadka widoczna przy najechaniu */
                }

                .run-button {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    width: 330px;
                    transform: translate(-50%, -50%);
                    display: none; /* Ukrycie przycisku */
                    z-index: 999999999; /* Wy≈ºszy z-index, aby przycisk by≈Ç na wierzchu */
                }

                .image-container3:hover .run-button {
                    display: block; /* Wy≈õwietlenie przycisku na hover */
                    z-index: 99999; /* Wy≈ºszy z-index na hover */
                }
                .image-container3b:hover .run-button {
                    display: block; /* Wy≈õwietlenie przycisku na hover */
                    z-index: 99999; /* Wy≈ºszy z-index na hover */
                }

                button.left-button.first-button:hover {
                    z-index: 99999; /* Wy≈ºszy z-index na hover */
                    display: block; /* Wy≈õwietlenie przycisku na hover */
                }
                .image-container3:hover {
                    z-index: 99999; /* Wy≈ºszy z-index na hover */
                }

                .image-container3 .run-button3 {
                    display: none; /* Domy≈õlnie ukryty przycisk */
                }

                .image-container3:hover .run-button3 {
                    display: block; /* Pokazywanie przycisku na hover */
                    z-index: 999999; /* Z-index wy≈ºszy ni≈º inne elementy */
                }
                .image-container3b:hover {
                    z-index: 99999; /* Wy≈ºszy z-index na hover */
                }

                .image-container3b .run-button3 {
                    display: none; /* Domy≈õlnie ukryty przycisk */
                }

                .image-container3b:hover .run-button3 {
                    display: block; /* Pokazywanie przycisku na hover */
                    z-index: 999999; /* Z-index wy≈ºszy ni≈º inne elementy */
                }
                .run-button2 {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    display: none; /* Ukrycie przycisku */
                    z-index: 2; /* Wy≈ºszy z-index, aby przycisk by≈Ç na wierzchu */
                }
                .run-button3 {
                    display: none;
                    position: absolute;
                    margin-bottom: 130px;
                    z-index: 9999999;
                }
                .dynamic-div {
                    position: absolute;
                    top: 10px; /* Ustawienie w dowolnym miejscu w kontenerze */
                    left: 10px;
                    font-size: 10px;
                    width: 70px; /* Szeroko≈õƒá dynamicznego div-a */
                    height: 20px; /* Wysoko≈õƒá dynamicznego div-a */
                    background-color: rgba(255, 0, 0, 0.5); /* Przezroczyste t≈Ço */
                    color: white;
                    z-index: 1000; /* Wy≈ºszy z-index, aby by≈Ç nad overlay */
                    display: none; /* PoczƒÖtkowo ukryty */
                }
                                .dynamic-div2 {
                    position: absolute;
                    top: 10px; /* Ustawienie w dowolnym miejscu w kontenerze */
                    left: 10px;
                    font-size: 10px;
                    width: 70px; /* Szeroko≈õƒá dynamicznego div-a */
                    height: 20px; /* Wysoko≈õƒá dynamicznego div-a */
                    background-color: rgba(0, 0, 255, 0.5);
                    color: white;
                    z-index: 1000; /* Wy≈ºszy z-index, aby by≈Ç nad overlay */
                    display: none; /* PoczƒÖtkowo ukryty */
                }
                                               .dynamic-div3 {
                    position: absolute;
                    bottom: 5px; /* Ustawienie w dowolnym miejscu w kontenerze */
                    left: 10px;
                    font-size: 15px;
                    width: 150px; /* Szeroko≈õƒá dynamicznego div-a */
                    height: 20px; /* Wysoko≈õƒá dynamicznego div-a */
                    background-color: orange; /* Przezroczyste niebieskie t≈Ço */
                    color: white;
                    z-index: 1000; /* Wy≈ºszy z-index, aby by≈Ç nad overlay */
                    display: none; /* PoczƒÖtkowo ukryty */
                    font-size: 10px;
                }
                                .image-container4:hover .run-button {
                                    z-index: 105;
                    display: block; /* Wy≈õwietlenie przycisku na hover */
                }
                .image-container4:hover .run-button2 {
                    display: block; /* Wy≈õwietlenie przycisku na hover */
                }
                .image-container4:hover .run-button3 {
                    display: block; /* Wy≈õwietlenie przycisku na hover */
                }
                .image-container4b:hover .run-button2 {
                    display: block; /* Wy≈õwietlenie przycisku na hover */
                }
                .image-container4b:hover .run-button3 {
                    display: block; /* Wy≈õwietlenie przycisku na hover */
                }
                .sentence1b,
                .sentence1b2,
                .sentence1b22,
                .sentence1b2a,
                .sentence1c22,
                .sentence1c2a {
                    font-size: 7px;
                    z-index: 99999999;
                    color: white;
                }
                .sentence1bba,
                .sentence1bbab {
                    font-size: 10px;
                    z-index: 9999;
                }

                .sentence {
                    font-size: 8px;
                    margin-bottom: -60px;
                    color: white;
                    z-index: 9999;
                }

                .sentenceBA {
                    font-size: 9px;
                    margin-top: 150px;
                    color: white;
                    z-index: 9999;
                }
                .sentenceBB {
                    font-size: 10px;
                    margin-bottom: -25px;
                    color: white;
                    z-index: 9999;
                }
                .sentenceBC {
                    font-size: 12px;
                    margin-bottom: 60px;
                    color: white;
                    z-index: 9999;
                }

                .sentence10,
                .sentence11,
                .sentence20,
                .sentence22,
                .sentence30,
                .sentence33 {
                    font-size: 8px;
                    color: white;
                    z-index: 1;
                }

                .button1,
                .button2 {
                    height: 0px;
                    width: 0px;
                }
                .highlighted-sentence {
                    background-color: rgba(255, 255, 0, 0.5); /* Kolor t≈Ça z opacity */
                    color: white;
                }
                .highlighted-sentence1 {
                    background-color: rgba(255, 255, 0, 0.5); /* Kolor t≈Ça z opacity */
                    color: white;
                }
                .yellow {
                    color: yellow;
                }
                .green {
                    background-color: green;
                }
                .flashcard-container {
        max-width: 100%;
        height: 470px;
        background-color: #2ecc71;
        display: flex
;
        justify-content: space-around;
        align-items: center;
        padding: 10px;
        box-sizing: border-box;
        position: absolute;
        margin-top: 770px;
                }
                #buttoncreate {
                    background-color: blue;
                }
                #buttoncreate.active {
                    background-color: #2ecc71;
                }

    .flashcard-container #konsola {
        display: block;
        width: 100%;
        max-width: 100%; /* Zapobiega wychodzeniu poza ekran */
        margin-left: auto;
        margin-right: auto;
        box-sizing: border-box;
        overflow-x: hidden; /* Wymusza brak poziomego przesuniƒôcia */
    }
    .flashcard-container #konsola2 {
        display: block;
        width: 100%;
        max-width: 100%; /* Zapobiega wychodzeniu poza ekran */
        margin-left: auto;
        margin-right: auto;
        box-sizing: border-box;
        overflow-x: hidden; /* Wymusza brak poziomego przesuniƒôcia */
    }
                .flashcard-container #konsola3 {
                    display: none;
        width: 100%;
        max-width: 100%; /* Zapobiega wychodzeniu poza ekran */
        margin-left: auto;
        margin-right: auto;
        box-sizing: border-box;
        overflow-x: hidden; /* Wymusza brak poziomego przesuniƒôcia */
                }
                .flashcard-container #konsola4 {
                    display: none;
        width: 100%;
        max-width: 100%; /* Zapobiega wychodzeniu poza ekran */
        margin-left: auto;
        margin-right: auto;
        box-sizing: border-box;
        overflow-x: hidden; /* Wymusza brak poziomego przesuniƒôcia */
                }
                .word-span.current {
                    background-color: yellow; /* lub inny kolor */
                    font-weight: bold;
                }
    .word-span {
        font-size: 9px;
        height: 9px; /* Ustaw sta≈ÇƒÖ wysoko≈õƒá */
        line-height: 9px; /* Dopasuj do wysoko≈õci */
        text-align: center;
        color: yellow;
        cursor: pointer;
        display: inline-block;
        padding: 5px;
        margin: 3px;
        background-color: blue;
        border-radius: 5px;
    }

                .word-span:hover {
                    cursor: pointer; /* Zmiana kursora na pointer */
                    background-color: #007BFF; /* Zmiana koloru t≈Ça po najechaniu */
                    color: white; /* Zmiana koloru tekstu po najechaniu */
                }
                /* Styl dla pod≈õwietlonego s≈Çowa */
                .highlighted {
                    cursor: pointer; /* Zmiana kursora na pointer */
                    background-color: green; /* Kolor pod≈õwietlenia */
                }
                #konsola button {
                    border-radius: 8px; /* Tutaj mo≈ºesz dostosowaƒá wielko≈õƒá zaokrƒÖglenia */
                    /* Dodatkowe style przycisk√≥w */
                    border: 1px solid black;
                    padding: 3px;
                    margin: 3px;
                    background-color: #2ecc71;
                    color: white;
                    cursor: pointer;
                }
                #konsola2 button {
                    display: none;
                    border-radius: 8px; /* Tutaj mo≈ºesz dostosowaƒá wielko≈õƒá zaokrƒÖglenia */
                    /* Dodatkowe style przycisk√≥w */
                    border: 1px solid black;
                    padding: 3px;
                    margin: 3px;
                    background-color: #2ecc71;
                    color: white;
                    cursor: pointer;
                }
                .grid-containera {
                    display: grid;
                    max-width: 100%;
                    grid-template-columns: repeat(2, 1fr);
                    position: relative;
                    gap: 0px;
                    text-align: center;
                    align-items: center;
                    z-index: 1;
                }

                .grid-container {
                    display: grid;
                    box-sizing: border-box; /* Ustawienie box-sizing */
                    max-width: 100%; /* Zapewnienie, ≈ºe kontener zajmuje 100% szeroko≈õci */
                    grid-template-columns: repeat(2, 1fr);
                    gap: 3px; /* Mo≈ºna dostosowaƒá zgodnie z potrzebami */
                    position: relative;
                    padding-top: 30px; /* Ustawienie margines√≥w zgodnie z potrzebami */
                    margin-bottom: 0; /* Ustawienie margines√≥w zgodnie z potrzebami */
                    z-index: 1;
                }
                .grid-containerb {
                    display: grid;
                    box-sizing: border-box; /* Ustawienie box-sizing */
                    max-width: 100%; /* Zapewnienie, ≈ºe kontener zajmuje 100% szeroko≈õci */
                    grid-template-columns: repeat(1, 1fr);
                    gap: 3px; /* Mo≈ºna dostosowaƒá zgodnie z potrzebami */
                    position: relative;
                    padding-top: 30px; /* Ustawienie margines√≥w zgodnie z potrzebami */
                    margin-right: 0; /* Ustawienie margines√≥w zgodnie z potrzebami */
                    overflow: hidden; /* Ukrywanie wszelkiego poziomego przewijania */
                    z-index: 1;
                }

                body {
                    overflow-x: hidden; /* Ukrywanie poziomego przewijania w body */
                }
                .spacer {
                    height: 20px; /* Dostosuj wysoko≈õƒá przestrzeni spacerowej */
                }

                .image {
                    position: relative;
                    width: 100%;
                    height: auto;
                }

                video {
                    position: relative;
                    max-width: 100%;
                    height: 100%;
                    top: 0px;
                    bottom: 0px;
                    margin-top: 0px;
                    margin-bottom: 0px;
                    object-fit: cover;  /* Zapewnia wype≈Çnienie ca≈Çego kontenera bez luk */
                }
                @keyframes scaleAnimation {
                    from {
                        transform: scale(1);
                    }
                    to {
                        transform: scale(1.1); /* Dostosuj poziom powiƒôkszenia wed≈Çug preferencji */
                    }
                }

                .scaled-video {
                    animation: scaleAnimation 2s ease-in-out forwards;
                }
                .next-video {
                    transform: scale(1.1);
                }
                .progress-bar {
                    position: absolute;
                    bottom: 3px;
                    left: 0;
                    height: 4px; /* Wysoko≈õƒá paska postƒôpu */
                    background-color: #007bff; /* Kolor paska postƒôpu */
                }
                .progress-bar2 {
                    position: absolute;
                    bottom: 3px;
                    height: 4px; /* Wysoko≈õƒá paska postƒôpu */
                    background-color: #007bff; /* Kolor paska postƒôpu */
                }

                #mojeVideo::-webkit-media-controls {
                    /* Ukryj kontrolki dla przeglƒÖdarek opartych na silniku Chromium (np. Chrome) */
                    display: none !important;
                }

                #mojeVideo::-webkit-media-controls-enclosure {
                    /* Ukryj kontrolki dla przeglƒÖdarek opartych na silniku Chromium (np. Chrome) */
                    display: none !important;
                }

                #mojeVideo::-webkit-media-controls-panel {
                    /* Ukryj kontrolki dla przeglƒÖdarek opartych na silniku Chromium (np. Chrome) */
                    display: none !important;
                }

                #mojeVideo {
                    /* Ukryj kontrolki dla innych przeglƒÖdarek */
                    appearance: none;
                    outline: none;
                    width: 100%; /* Dostosuj szeroko≈õƒá wideo */
                    height: auto; /* Dostosuj wysoko≈õƒá wideo */
                }

                .caption {
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    font-size: 10px;
                    color: white;
                    width: 100%;
                    text-align: left;
                    box-sizing: border-box;
                    z-index: 1;
                }

                .image:hover .caption {
                    opacity: 1;
                }

                .image {
                    width: 100%;
                    height: auto;
                }

                .caption {
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    padding-bottom: 8px;
                    font-size: 15px; /* Rozmiar czcionki */
                    font-family: Arial, sans-serif; /* Wyb√≥r czcionki */
                    color: white; /* Ustawienie koloru tekstu na bia≈Çy */
                    -webkit-text-stroke: 1px blue; /* Obramowanie tekstu w przeglƒÖdarkach opartych na silniku WebKit */
                    text-stroke: 1px white; /* Obramowanie tekstu */
                    width: 100%;
                    text-align: left;
                    box-sizing: border-box;
                    z-index: 1;
                }

                .image-container:hover .caption {
                    opacity: 1;
                }

                /* Styl dla paska poziomego z tagami */
                .horizontal-bar {
                    display: flex;
                    justify-content: center;
                    width: 100%;
                    margin-bottom: 10px;
                }

                .horizontal-bar button {
                    padding: 8px 15px;
                    font-size: 16px;
                    border: none;
                    cursor: pointer;
                    border: solid;
                    border-radius: 8px;
                }
                .green-button {
                    background-color: green;
                    color: white;
                }
                .zaznaczony-rodzaj {
                    border: 3px solid green;
                }

                .zaznaczony-charakter {
                    border: 3px solid blue;
                }
                .bottom-bar {
                    position: fixed;
                    bottom: -60px; /* Domy≈õlnie schowany */
                    left: 0;
                    max-width: 100%;
                    height: 60px;
                    background-color: #333;
                    display: flex;
                    justify-content: space-around;
                    align-items: center;
                    padding: 0 10px;
                    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
                    z-index: 1000;
                    transition: transform 0.3s ease;
                }

                .show {
                    transform: translateY(-60px); /* Pasek widoczny po za≈Çadowaniu */
                }
                .hidden {
                    transform: translateY(100%); /* Schowanie paska poza ekran */
                }
                .bottom-button {
                    background-color: #4CAF50;
                    color: white;
                    border: none;
                    padding: 10px;
                    font-size: 8px;
                    border-radius: 5px;
                    cursor: pointer;
                }
                .bottom-button2 {
                    width: 50px;                  /* Ustaw szeroko≈õƒá przycisku */
                    height: 30px;                 /* Ustaw wysoko≈õƒá przycisku (opcjonalnie) */
                    background-color: transparent; /* T≈Ço przezroczyste */
                    border: none;                 /* Usuwa obramowanie */
                    cursor: pointer;              /* Ustawia kursor na wska≈∫nik */
                    overflow: hidden;             /* Ukrywa wszelkie elementy wychodzƒÖce poza przycisk */
                    padding: 0;                   /* Ustawia padding na 0 */
                }
                .bottom-button:hover {
                    background-color: #45a049;
                }

                .lupka {
                    position: absolute; /* Pozwala na pozycjonowanie w kontek≈õcie rodzica */
                    width: 40px; /* Ustaw szeroko≈õƒá obrazka */
                    height: 40px; /* Ustaw wysoko≈õƒá obrazka */
                    cursor: pointer;
                    background-color: green;
                    border-radius: 8px;
                    right: 10px; /* Dostosuj pozycjonowanie, aby by≈Ç w prawym rogu */
                    top: 10px; /* Ustaw odleg≈Ço≈õƒá od do≈Çu */
                    right: 25px;
                }

                .toggle-button {
                    position: fixed;
                    bottom: 0;
                    right: 20px;
                    background-color: #333;
                    color: white;
                    padding: 10px;
                    border-radius: 50%;
                    cursor: pointer;
                    z-index: 1001;
                    transition: bottom 0.3s ease;
                }

                #arrow {
                    font-size: 20px;
                }

                .show-toggle-button {
                    bottom: 60px; /* Strza≈Çka przesuwa siƒô do g√≥ry gdy pasek jest widoczny */
                }
            }
        </style>
    </head>
    <body>
        <div class="horizontal-bar" id="horizontalBar1">
            <button id="myButton">ANGIELSKI</button>
            <button id="myButton2">HISZPA≈ÉSKI</button>
        </div>
        <div class="horizontal-bar" id="horizontalBar2">
        </div>
        <div class="container">
            <div class="side-menu">
                <button onclick="showImages('set1')">PRZEBYTE LEKCJE</button>
                <button onclick="showImages('set2')">LEKCJE STWORZONE INDYWIDUALNIE</button>
                <button onclick="showImages('set3')">S≈Å√ìWKA KT√ìRE ZNAM</button>
                <button onclick="showImages('set4')">S≈Å√ìWKA TRENING</button>
                <button onclick="showImages('set2')">S≈Å√ìWKA NAUCZONE</button>
                <button onclick="showImages('set1')">POLUBIONE S≈ÅOWKA</button>
                <button onclick="showImages('set2')">S≈Å√ìWKA TEMATYCZNE</button>
            </div>
            <div class="content-container">
                <div class="grid-containera">
                    <div class="image-container2">Standard<button onclick="showImages('set1')"> LOSUJ LEKCJE</button>
                    </div>
                    <div class="image-container2" id="buttoncreate">Generowanie fiszki<button id="flashcardButton" onclick="addFlashcardContainer()">OTW√ìRZ KONSOLE</button>
                    </div>
                    <div class="image-container2">Kartk√≥wka<button onclick="showImages('set1')">START</button>
                    </div>
                    <div class="image-container2">T≈Çumacz tekst<button onclick="showImages('set1')">START</button>
                    </div>
                </div>
<div class="search-container">
    <div class="search-wrapper">
        <label for="search">Search Word</label>
        <input type="search" id="search" data-search>
    </div>
    <div class="button-container">
        <button id="polski" class="rodzaj-button2">Polski</button>
        <button id="angielski" class="rodzaj-button2">Angielski</button>
    </div>
</div>
                <div>
    <button id="singleSentenceBtn" class="rodzaj-button">Jedno zdanie</button>
    <button id="threeSentencesBtn" class="rodzaj-button">Trzy zdania</button>
    <button id="singleWordBtn" class="rodzaj-button">Pojedyncze s≈Çowo</button>
                </div><br>
                <button class="left-button2">+<br></button>TE LEKCJE MAJƒÑ DOSTƒòPNE SKOJARZENIA W WIƒòKSZYM ZAKRESIE TEMAT√ìW
<div class="user-cards" data-user-cards-container></div>

<template data-user-template>
    <div class="card">
        <div class="header" data-header></div>
        <div class="body" data-body></div>
    </div>
</template>

                <div class="grid-container">
                </div>
            </div>
        </div>
        <div class="bottom-bar" id="bottomBar">
            <button class="bottom-button" onclick="ustawTryb('zdania', undefined); przekazArgument0(globalCategory, '', '', 'zdania', false, false, tablica3[1])">1 ZDANIE / LEKCJA</button>
            <button class="bottom-button" onclick="ustawTryb('fiszki', undefined); przekazArgument0(globalCategory, '', '', 'fiszki', false, false, tablica3[1])">3 ZDANIA / LEKCJA</button>
            <button class="bottom-button" onclick="ustawTryb(tablica3[0], 'frazy'); przekazArgument0(globalCategory, '', '', tablica3[0], true, true, tablica3[1])">FRAZY</button>
            <button class="bottom-button">S≈ÅOWA</button>
            <button id="searchButton" class="bottom-button2" onclick="zmienLupke()">
                <img src="img/lupki3fa.png" alt="Szukaj" class="lupka" id="lupkaImage">
            </button>
        </div>
          
        <div class="toggle-button" id="toggleButton">
            <span id="arrow">&#9660;</span> <!-- Strza≈Çka skierowana w d√≥≈Ç -->
        </div>
        <script>

const searchInput = document.querySelector("[data-search]");
console.log("Element input:", searchInput); // Sprawdzenie, czy input istnieje

let matchingKeys = [];
let matchingKeysB = [];
let searchKey = "key"; // Domy≈õlnie angielski
let searching1 = false;
let searching2 = false;
let polskiButton = document.getElementById("polski");
let angielskiButton = document.getElementById("angielski");

polskiButton.addEventListener("click", function () {
    searchKey = "key2"; // Prze≈ÇƒÖczamy na polski
    console.log("Prze≈ÇƒÖczono na polski, u≈ºywam klucza:", searchKey);
    isSearching = true;

    findMatchingKeys(fiszki, document.getElementById("search")?.value.toLowerCase().trim(), searchKey);
    matchingLessons5 = findLessonsForWords(fiszki, searchKey);
    matchingLessons5b = findLessonsForWordsB(fiszki, searchKey);

    przekazArgument0(tablica3[2], '', false, 'fiszki', false, false, tablica3[1], tablica3[4], true, matchingLessons5, matchingLessons5b, false);
});

angielskiButton.addEventListener("click", function () {
    searchKey = "key"; // Prze≈ÇƒÖczamy na polski
    console.log("Prze≈ÇƒÖczono na polski, u≈ºywam klucza:", searchKey);
    isSearching = true;

    findMatchingKeys(fiszki, document.getElementById("search")?.value.toLowerCase().trim(), searchKey);
    matchingLessons5 = findLessonsForWords(fiszki, searchKey);
    matchingLessons5b = findLessonsForWordsB(fiszki, searchKey);

    przekazArgument0(tablica3[2], '', false, 'fiszki', false, false, tablica3[1], tablica3[4], true, matchingLessons5, matchingLessons5b, false);
});

function updateSearch() {
    const searchValue = document.getElementById("search")?.value.toLowerCase().trim();
    if (!searchValue) {
        console.log("Pole wyszukiwania jest puste.");
        return;
    }
    findMatchingKeys(fiszki, searchValue, searchKey);
}

function findMatchingKeys(fiszki, searchValue, searchKey) {
    console.log("Rozpoczynam filtrowanie fiszek dla frazy:", searchValue, "przy u≈ºyciu klucza:", searchKey);

    matchingKeys = fiszki
        .filter(fiszka => {
            let keyValue = fiszka[searchKey];

            if (Array.isArray(keyValue)) {
                // Sprawdzamy, czy kt√≥rykolwiek element tablicy zaczyna siƒô od searchValue
                return keyValue.some(value => value.toLowerCase().startsWith(searchValue));
            } else if (typeof keyValue === "string") {
                // Normalne sprawdzenie dla string√≥w
                return keyValue.toLowerCase().startsWith(searchValue);
            }
            return false;
        })
        .map(fiszka => fiszka[searchKey]);

    matchingKeysB = [...matchingKeys];

    console.log("PasujƒÖce s≈Çowa:", matchingKeys);
    console.log("PasujƒÖce s≈Çowa2:", matchingKeysB);
}

function findLessonsForWords(fiszki, searchKey) {
    let lessonIds = new Set();

    fiszki.forEach(fiszka => {
        if (!fiszka[searchKey] || !fiszka.id) return;
        if (matchingKeys.includes(fiszka[searchKey])) {
            lessonIds.add(fiszka.id[1]);
        }
    });

    console.log("Lekcje zawierajƒÖce szukane s≈Çowo:", Array.from(lessonIds));
    return Array.from(lessonIds);
}

function findLessonsForWordsB(fiszki, searchKey) {
    let lessonIdsB = new Set();

    fiszki.forEach(fiszka => {
        if (!fiszka[searchKey] || !fiszka.id) return;
        if (matchingKeysB.includes(fiszka[searchKey])) {
            lessonIdsB.add(fiszka.id[0]);
        }
    });

    console.log("Ustawienia fiszek5:", Array.from(lessonIdsB));
    return Array.from(lessonIdsB);
}

let isSearching = false;
let isSearching2 = false;
let tablica40 = [];
let tablica41 = [];
let staraTablica40 = null;

polskiButton.addEventListener("click", function () {
    searchInput.placeholder = "przyk≈Çad"; 
});

angielskiButton.addEventListener("click", function () {
    searchInput.placeholder = "example"; 
});
searchInput.placeholder = "example"; 
searchInput?.addEventListener("input", (e) => {
    const searchTerm = e.target.value.trim().toLowerCase();
    if (!searchTerm) {
        console.log("Pusty input - przerywamy");
        matchingKeys = [];
        tablica40 = [];
        return;
    }

    findMatchingKeys(fiszki, searchTerm, searchKey);
    matchingLessons5 = findLessonsForWords(fiszki, searchKey);
    matchingLessons5b = findLessonsForWordsB(fiszki, searchKey);

    let nowaTablica40 = Array.isArray(matchingLessons5b) ? matchingLessons5b.flat() : [];

    if (tablica40.length > 0) {
        staraTablica40 = [...tablica40];
        console.log('Stara tablica (zanim zmienimy):', staraTablica40);
    }

    tablica40 = [...nowaTablica40];
    let pominiete = (staraTablica40 || []).filter(num => !nowaTablica40.includes(num));
    console.log('Pominiƒôte numery:', pominiete);

    if (searchTerm.length === 1) {
        isSearching = true;
        console.log("Rozpoczƒôto wyszukiwanie:", isSearching);
    }
    if (searchTerm.length === 0) {
        isSearching = false;
        if (isSearching2) {
        przekazArgument0(tablica3[2], '', false, '', true, true, tablica3[1], tablica3[4], false, null, null, false, staraTablica40);
        }
        console.log("Pusty input - przerywamy");
        matchingKeys = [];
        tablica40 = []; // Resetujemy tablicƒô
        przekazArgument0(tablica3[2], '', false, 'fiszki', true, true, tablica3[1], tablica3[4], false, '', '');
        return;
    }
    document.getElementById("singleSentenceBtn")?.addEventListener("click", () => {
        tablica3[0] = 'zdania';
        przekazArgument0(tablica3[2], '', false, 'zdania', false, false, tablica3[1], tablica3[4], true, matchingLessons5, matchingLessons5b, false);
    });

    document.getElementById("threeSentencesBtn")?.addEventListener("click", () => {
        tablica3[0] = 'fiszki';
        przekazArgument0(tablica3[2], '', false, 'fiszki', false, false, tablica3[1], tablica3[4], true, matchingLessons5, matchingLessons5b, false);
    });
polskiButton.addEventListener("click", function () {
przekazArgument0(tablica3[2], '', false, 'fiszki', false, false, tablica3[1], tablica3[4], true, matchingLessons5, matchingLessons5b, false);
});
    przekazArgument0(tablica3[2], '', false, tablica3[0], false, false, tablica3[1], tablica3[4], true, matchingLessons5, matchingLessons5b, isSearching2, staraTablica40);
});

document.getElementById("singleWordBtn").addEventListener("click", function() {
    console.log("Klikniƒôto singleWordBtn");
isSearching2 = true;

    console.log("Wy≈õwietlam zawarto≈õƒá tablica40 (tylko raz):", tablica40);

    function showFiszkiForLesson5dd(tablica40, tablica41, fiszki) {
        console.log("Wybrany rodzaj: ", tablica40);

        setTimeout(() => {
            let matchingFiszki122 = [];

            tablica40.forEach(t40 => {
                fiszki.forEach(fiszka => {
                    if (fiszka.id[0] === t40) {
                        matchingFiszki122.push(fiszka); // Zapisujemy ca≈Çy obiekt, nie tylko fiszka.id
                    }
                });
            });

            console.log("Wy≈õwietlam:", matchingFiszki122);

            // Przyk≈Çadowe u≈ºycie funkcji generateFiszkaBlock3
            matchingFiszki122.forEach(fiszka => {
                generateFiszkaBlock3(fiszka, "lessonId2"); // Przekazujemy ca≈Çy obiekt fiszka
            });

        }, 1000);
    }

    setTimeout(() => {
        showFiszkiForLesson5dd(tablica40, tablica41, fiszki);
    }, 1000);
});



    // Dodanie zdarzenia klikniƒôcia do przycisku
document.getElementById("singleSentenceBtn").addEventListener("click", () => {
    searching1 = true;
    function showFiszkiForLesson5ddb(tablica40, tablica41, fiszki) {
    console.log("Wybrany rodzaj: ", tablica40);

    setTimeout(() => {
        let idFiszki = [];

        // Pobieranie id pasujƒÖcych do tablica40
        tablica40.forEach(t40 => {
            fiszki.forEach(fiszka => {
                if (fiszka.id[0] === t40) {
                    idFiszki.push(fiszka.id); // Zapisujemy ca≈Çy obiekt
                }
            });
        });

        console.log("Wy≈õwietlam4:", idFiszki);

        // Podzia≈Ç na mniejsze grupy po 3 elementy
        let chunkedIdFiszki = [];
        for (let i = 0; i < idFiszki.length; i += 3) {
            chunkedIdFiszki.push(idFiszki.slice(i, i + 3));
        }

        console.log("Podzielone grupy ID:", chunkedIdFiszki);

        // Usuwanie ka≈ºdej grupy osobno
        chunkedIdFiszki.forEach(group => {
            removeFiszka(group);
        });

    }, 0);
}

function removeFiszka(idFiszkiGroup) {
    idFiszkiGroup.forEach(singleId => {
        // Je≈õli singleId jest tablicƒÖ, ≈ÇƒÖczymy jej elementy separatorem ','
        let idString = Array.isArray(singleId) ? singleId.join(',') : singleId;
        const className = `fiszka5 fiszka-${idString}`;
        
        // Escape'owanie przecink√≥w w selektorze CSS
        const selector = `.${className.replace(/,/g, '\\,').replace(/\s+/g, '.')}`; 

        console.log("Wy≈õwietlam4b:", selector);
    
        const $fiszkaToRemove = $('.grid-container').find(selector);
        if ($fiszkaToRemove.length) {
            console.log('Element znaleziony po op√≥≈∫nieniu, usuwam...');
            $fiszkaToRemove.remove();
        } else {
            console.log('Element nadal nie znaleziony.');
        }
    });
}

        setTimeout(() => {
        showFiszkiForLesson5ddb(tablica40, tablica41, fiszki);
    }, 0);
        tablica3[0] = 'zdania';
        przekazArgument0(tablica3[2], '', false, 'zdania', true, true, tablica3[1], tablica3[4], false, '', '');
    });
        // Dodanie zdarzenia klikniƒôcia do przycisku
document.getElementById("threeSentencesBtn").addEventListener("click", () => {
searching2 = true;
function showFiszkiForLesson5ddb(tablica40, tablica41, fiszki) {
    console.log("Wybrany rodzaj: ", tablica40);

    setTimeout(() => {
        let idFiszki = [];

        // Pobieranie id pasujƒÖcych do tablica40
        tablica40.forEach(t40 => {
            fiszki.forEach(fiszka => {
                if (fiszka.id[0] === t40) {
                    idFiszki.push(fiszka.id); // Zapisujemy ca≈Çy obiekt
                }
            });
        });

        console.log("Wy≈õwietlam4:", idFiszki);

        // Podzia≈Ç na mniejsze grupy po 3 elementy
        let chunkedIdFiszki = [];
        for (let i = 0; i < idFiszki.length; i += 3) {
            chunkedIdFiszki.push(idFiszki.slice(i, i + 3));
        }

        console.log("Podzielone grupy ID:", chunkedIdFiszki);

        // Usuwanie ka≈ºdej grupy osobno
        chunkedIdFiszki.forEach(group => {
            removeFiszka(group);
        });

    }, 0);
}

function removeFiszka(idFiszkiGroup) {
    idFiszkiGroup.forEach(singleId => {
        // Je≈õli singleId jest tablicƒÖ, ≈ÇƒÖczymy jej elementy separatorem ','
        let idString = Array.isArray(singleId) ? singleId.join(',') : singleId;
        const className = `fiszka5 fiszka-${idString}`;
        
        // Escape'owanie przecink√≥w w selektorze CSS
        const selector = `.${className.replace(/,/g, '\\,').replace(/\s+/g, '.')}`; 

        console.log("Wy≈õwietlam4b:", selector);
    
        const $fiszkaToRemove = $('.grid-container').find(selector);
        if ($fiszkaToRemove.length) {
            console.log('Element znaleziony po op√≥≈∫nieniu, usuwam...');
            $fiszkaToRemove.remove();
        } else {
            console.log('Element nadal nie znaleziony.');
        }
    });
}

        setTimeout(() => {
        showFiszkiForLesson5ddb(tablica40, tablica41, fiszki);
    }, 0);

        tablica3[0] = 'fiszki';
    przekazArgument0(tablica3[2], '', false, 'fiszki', true, true, tablica3[1], tablica3[4], false, '', '');
    });
    

        document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.czas40').forEach(btn => btn.style.border = '1px solid black');

    // Pobierz pierwszy przycisk z klasƒÖ 'czas40' i zaznacz go domy≈õlnie
    const firstButton = document.querySelector('#threeSentencesBtn');
    const secondButton = document.querySelector('#angielski');
    if (firstButton || secondButton) {
        firstButton.style.border = '2px solid blue';
        secondButton.style.border = '2px solid blue';
    }
        document.querySelectorAll('.rodzaj-button').forEach(button => {
            button.addEventListener('click', function() {
                document.querySelectorAll('.rodzaj-button').forEach(btn => btn.style.border = '1px solid black');
                this.style.border = '2px solid blue';
            });
        });
                document.querySelectorAll('.rodzaj-button2').forEach(button => {
            button.addEventListener('click', function() {
                document.querySelectorAll('.rodzaj-button2').forEach(btn => btn.style.border = '1px solid black');
                this.style.border = '2px solid blue';
            });
        });
    });
    
function showFiszkiForLesson5d(matchingFiszki1v, tablica41) {
    if (tablica41.length > 0) {
    matchingFiszki1v.forEach((fiszka, index) => {
        let id = fiszka; // Pobranie id z matchingFiszki
        let parametr = tablica41[index] || ''; // Pobranie odpowiadajƒÖcej warto≈õci z tablica41

        if (Array.isArray(fiszka)) {
            // Po≈ÇƒÖcz warto≈õci z tablicy id w jeden ciƒÖg znak√≥w oddzielony przecinkami
            id = fiszka.slice(0, 3).join(',');
            // Obs≈Çuga dodatkowego parametru (np. czwartego elementu w tablicy)
            parametr = fiszka.length > 3 ? fiszka[3] : parametr;
        }

        // Tworzenie klasy CSS dla fiszki
        const className = `fiszka-${id}${parametr ? '\\,' + parametr : ''}`;
        console.log(`Tworzƒô fiszkƒô z klasƒÖ: ${className}`);

        generateFiszkaBlock3(id, parametr);
    });
}
}
            var tablica3 = [];


            let aktualnyObraz = true; // Zmienna do ≈õledzenia aktualnego stanu obrazu

            function zmienLupke() {
                const lupkaImage = document.getElementById('lupkaImage');
                const obrazPierwszy = 'img/lupki3fa.png'; // ≈öcie≈ºka do pierwszego obrazka
                const obrazDrugi = 'img/lupki3g3.png'; // ≈öcie≈ºka do drugiego obrazka

                // Prze≈ÇƒÖczanie obrazka
                if (aktualnyObraz) {
                    lupkaImage.src = obrazDrugi; // Zmie≈Ñ na drugi obraz
                    // Zmie≈Ñ klasy na grid-containerb oraz image-container3b
                    $('.grid-container').removeClass('grid-container').addClass('grid-containerb');
                    $('.image-container3').removeClass('image-container3').addClass('image-container3b');
                } else {
                    lupkaImage.src = obrazPierwszy; // Zmie≈Ñ na pierwszy obraz
                    // Zmie≈Ñ klasy z powrotem na grid-container oraz image-container3
                    $('.grid-containerb').removeClass('grid-containerb').addClass('grid-container');
                    $('.image-container3b').removeClass('image-container3b').addClass('image-container3');
                }

                // Zmie≈Ñ stan na przeciwny
                aktualnyObraz = !aktualnyObraz;
            }
            // Funkcja do zmiany szeroko≈õci okna
            function simulateResize(width) {
                document.documentElement.style.setProperty('--viewport-width', width + 'px');
                window.dispatchEvent(new Event('resize'));
            }

            // Ustawienie szeroko≈õci na 768px dla widoku mobilnego
            simulateResize(768);
        </script>
        <script>

            const bottomBar = document.getElementById('bottomBar');
            const toggleButton = document.getElementById('toggleButton');
            const arrow = document.getElementById('arrow');

// Poka≈º pasek i strza≈Çkƒô nad nim po za≈Çadowaniu strony
            window.addEventListener('load', function () {
                bottomBar.classList.add('show'); // Pasek widoczny
                toggleButton.classList.add('show-toggle-button'); // Strza≈Çka nad paskiem

                // Automatyczne schowanie paska po 3 sekundach
                setTimeout(function () {
                    bottomBar.classList.remove('show');
                    bottomBar.classList.add('hidden'); // Schowanie paska
                    arrow.innerHTML = '&#9650;'; // Zmiana strza≈Çki na skierowanƒÖ w g√≥rƒô
                    toggleButton.classList.remove('show-toggle-button'); // Strza≈Çka wraca na d√≥≈Ç
                }, 3000); // 3000 ms = 3 sekundy
            });

// Strza≈Çka do rƒôcznego rozwijania i chowania paska
            toggleButton.addEventListener('click', function () {
                if (bottomBar.classList.contains('show')) {
                    bottomBar.classList.remove('show');
                    bottomBar.classList.add('hidden');
                    arrow.innerHTML = '&#9650;'; // Strza≈Çka w g√≥rƒô (chowanie paska)
                    toggleButton.classList.remove('show-toggle-button'); // Strza≈Çka wraca na d√≥≈Ç
                } else {
                    bottomBar.classList.remove('hidden');
                    bottomBar.classList.add('show');
                    arrow.innerHTML = '&#9660;'; // Strza≈Çka w d√≥≈Ç (rozwijanie paska)
                    toggleButton.classList.add('show-toggle-button'); // Strza≈Çka nad paskiem
                }
            });
            function blinkButton() {
                const button = document.getElementById('flashcardButton');
                let blinkCount = 0;

                const interval = setInterval(() => {
                    button.style.visibility = (button.style.visibility === 'hidden') ? 'visible' : 'hidden';
                    blinkCount++;

                    if (blinkCount === 4) { // 6 prze≈ÇƒÖcze≈Ñ widoczno≈õci (3 migniƒôcia)
                        clearInterval(interval);
                        button.style.visibility = 'visible'; // Upewnij siƒô, ≈ºe przycisk jest widoczny na ko≈Ñcu
                    }
                }, 200); // 300 ms przerwy pomiƒôdzy migniƒôciami
            }

// Uruchomienie migniƒôcia po za≈Çadowaniu strony
            window.onload = function () {
                blinkButton();
            };
            document.getElementById('myButton').addEventListener('click', function () {
                window.location.href = 'https://www.arbulang.com/matrix.html';
            });
            document.getElementById('myButton2').addEventListener('click', function () {
                window.location.href = 'https://www.arbulang.com/matrix2.html';
            });

            function showVideos(set) {
                const videoContainer = document.querySelector('.grid-container');
                switch (set) {
                    case 'set2':
                        selectedVideos = [
                            {
                            }
                            // Dodaj kolejne filmy dla set1
                        ];
                        break;
                        // Dodaj pozosta≈Çe przypadki dla innych zestaw√≥w
                    default:
                        break;
                }
                // Wy≈õwietl filmy dla wybranego zestawu
                selectedVideos.forEach(function (videoData) {
                    const videoContainer = document.createElement('div');
                    videoContainer.classList.add('image-container3');
                    document.querySelector('.grid-container').appendChild(videoContainer);
                });
            }
            showVideos('set2');


            function highlightButton(buttonId, horizontalBarId) {
                // Reset all buttons in the specified horizontal bar to default style
                document.querySelectorAll(`#${horizontalBarId} button`).forEach(button => {
                    button.classList.remove('green-button');
                });

                // Highlight the clicked button
                document.getElementById(buttonId).classList.add('green-button');
            }

            // Add event listeners to buttons in the first horizontal bar
            document.getElementById('myButton').addEventListener('click', function () {
                showVideos('set2');
                highlightButton('myButton', 'horizontalBar1');
            });

            document.getElementById('myButton2').addEventListener('click', function () {
                showVideos('set3');
                highlightButton('myButton2', 'horizontalBar1');
            });

            function addFlashcardContainer() {
                var $flashcardContainer = $('<div>', {class: 'flashcard-container'});
                $('#buttoncreate').addClass('active');

                // Dodaj buttony do diva
                $flashcardContainer.append(`
<div id="konsola">
    <div id="title">WIDOK</div>
<button id="inne" class="rodzaj-button" data-rodzaj="osoby">SPO≈ÅECZNO≈öCIOWY</button>        
        <button class="charakter-button" onclick="ustawTryb(tablica3[0]); przekazArgument0(globalCategory, '', '', 'fiszki', false, false, 'losowyuklad')">WYGENEROWANY JEDNORAZOWO</button>
            <div id="title">RODZAJ S≈ÅOWNICTWA</div>
                    <button id="inne" class="rodzaj-button" data-rodzaj="osoby">KOGNATY</button>
    <button id="osoby" class="rodzaj-button" data-rodzaj="osoby" onclick="przekazArgument0('all', '', '', '', '', '', tablica3[1], 'other', false, '', '')">Wszystkie</button>
    <button class="rodzaj-button" data-rodzaj="osoby" onclick="przekazArgument0('osoby', '', '', '', '', '', tablica3[1], 'other', false, '', '')">Osoby</button>
    <button class="rodzaj-button" data-rodzaj="zaimki osobowe" onclick="przekazArgument0('zaimkiosobowe', '', '', '', '', '', tablica3[1], 'other', false, '', '')">Zaimki osobowe</button>
    <button id="inne" onclick="przekazArgument0('emocje', '', '', '', '', '', tablica3[1])">Emocje</button>
    <button class="rodzaj-button" data-rodzaj="zaimki" onclick="przekazArgument0('spojniki', '', '', '', '', '', tablica3[1], '', false, '', '')">Sp√≥jniki</button>
    <button id="inne" onclick="przekazArgument0('kolory', '', '', '', '', '', tablica3[1])">Kolory</button>
    <button class="rodzaj-button" data-rodzaj="zwierzeta" onclick="przekazArgument0('zwierzeta', '', '', '', '', '', tablica3[1])">Zwierzƒôta</button>
    <button class="rodzaj-button" data-rodzaj="czasownik" onclick="przekazArgument0('czasownik', '', '', '', '', '', tablica3[1])">Czasowniki</button>
            <button class="rodzaj-button" data-rodzaj="czasownik" onclick="przekazArgument0('czas', '', '', '', '', '', tablica3[1])">Czas</button>
    <br>ILO≈öƒÜ MATERIA≈ÅU NA LEKCJE<br>
<button class="czas" onclick="ustawTryb('zdania', undefined); przekazArgument0(globalCategory, '', '', 'zdania', false, false, tablica3[1])">5 MINUT (JEDNO ZDANIE)</button>
<button id="english" class="czas" onclick="ustawTryb('fiszki', undefined); przekazArgument0(globalCategory, '', '', 'fiszki', true, true, tablica3[1])">10 MINUT (3 ZDANIA) - OPCJONALNIE</button>
<br>TRYB LEKCJI<br>
<button id="english" class="czas" onclick="ustawTryb(tablica3[0], ''); przekazArgument0(globalCategory, '', '', tablica3[0], false, false, tablica3[1])">ZDANIA</button>
<button class="czas" onclick="ustawTryb(tablica3[0], 'frazy'); przekazArgument0(globalCategory, '', '', tablica3[0], true, true, tablica3[1])">FRAZY</button>
    <button id="inne" class="czas">POJEDY≈ÉCZE S≈ÅOWA</button>
    <br>DOSTƒòPNE WERSJE T≈ÅUMACZENIA<br>
    <button id="english" class="charakter-button" onclick="wybierzCharakter()">NA ≈ªADANIE-OPCJONALNIE</button>
    <button id="inne" class="charakter-button" onclick="wybierzCharakter('fiszki')">TYLKO PO ANGIELSKU</button>
    <button id="inne" class="charakter-button" onclick="przekazArgument0('', '', '', 'zdania', true)">TYLKO PO POLSKU</button>
</div>
<div id="konsola">
            <div id="title">CZASY</div>
<button class="charakter-button" onclick="przekazArgument0(globalCategory, '', '', '', '', '', tablica3[1], 'play')">OZNACZ CZAS</button>
<br>
    <button class="charakter-button" onclick="przekazArgument0('PresentSimple', '', '', '', '', '', tablica3[1], 'play')">PRESENT SIMPLE</button>
            <button class="charakter-button" onclick="przekazArgument0('PresentContinous', '', '', '', '', '', tablica3[1], 'other')">PRESENT CONTINOUS</button>
                    <button class="charakter-button" onclick="przekazArgument0('PastSimple', '', '', '', '', '', tablica3[1])">PAST SIMPLE</button>
    <button id="inne">PAST SIMPLE</button>
    <br>
    <div id="title">OPCJE ZDANIA</div>
    <button id="inne" class="charakter-button">PODZIEL ZDANIA NA CZƒò≈öCI</button>
    <button id="inne" class="czas">WYSU≈É JEDNOCZE≈öNIE W DANEJ LEKCJI</button>
    <br>
    <div id="title">CHARAKTER ZDANIA</div>
    <button class="charakter-button" onclick="ustawTryb(tablica3[0]); przekazArgument0(globalCategory, '', '', 'fiszki', false, false, 'krotkie')">Kr√≥tkie</button>
    <button class="charakter-button" onclick="ustawTryb(tablica3[0]); przekazArgument0(globalCategory, '', '', 'fiszki', false, false, 'dlugie')">D≈Çugie(z≈Ço≈ºone)</button>
    <button class="charakter-button" onclick="ustawTryb(tablica3[0]); przekazArgument0(globalCategory, '', '', 'fiszki', false, false, '')">Dowolne</button>
    <div id="title">PRIORYTETY LINGWISTYCZNE</div>
    <button id="inne" onclick="wybierzCharakter('krotkie')">Wymowa</button>
<button id="inne" class="charakter-button" onclick="wybierzCharakter('krotkie')">Pisownia</button>
<button id="inne" onclick="wybierzCharakter('krotkie')">Sens zdania</button>
    <button id="inne" id="dowolne" onclick="wybierzCharakter('dowolne')">WSZYSTKIE</button>
</div>
<div id="konsola3">
    <h2>Ulubione Fiszki</h2>
    <button onclick="wplecUlubioneFiszki()">Ulubione Fiszki</button>
</div>
<div id="konsola4">
    <h2>Generuj intuicyjnie z pokrewnƒÖ tematykƒÖ</h2>
    <button onclick="wybierzTematyke('nauka')">Podobne</button>
    <button onclick="wybierzTematyke('podroze')">Eksporuj mojƒÖ nowƒÖ pasje</button>
    <button onclick="wybierzTematyke('podroze')">Odkryj mojƒÖ nowƒÖ pasje</button>
</div>
</div>
`);
                $flashcardContainer.find('#osoby, #fiszki, #english').css('border', '2px solid blue');
                $flashcardContainer.find('#inne').css('background-color', 'gray');
                // Dodaj do konsoli informacjƒô o pr√≥bie dodania diva
                console.log("Pr√≥ba dodania diva");

                // Znajd≈∫ kontener, do kt√≥rego chcesz dodaƒá .flashcard-container
                var $targetContainer = $('.grid-containera');

                // Dodaj div do znalezionego kontenera
                $targetContainer.append($flashcardContainer);

                var $gridContainer = $('.grid-container');
                var flashcardContainerHeight = $flashcardContainer.height();
                $gridContainer.css('margin-top', flashcardContainerHeight + 110 + 'px');


                function addBlueBorder(button) {
                    var category = $(button).attr('class').split(' ')[0]; // Pobierz klasƒô kategorii przycisku (rodzaj-button, charakter-button, czas)

                    // Usu≈Ñ poprzednie zaznaczenia z danej kategorii
                    $('.' + category).css('border', '1px solid black');

                    // Nastƒôpnie dodaj obramowanie do aktualnie klikniƒôtego przycisku
                    $(button).css('border', '2px solid blue');
                }



                // Funkcja obs≈ÇugujƒÖca klikniƒôcie w przyciski charakter-button
                function handleCharakterButtonClick() {
                    addBlueBorder(this);
                }

                // Funkcja obs≈ÇugujƒÖca klikniƒôcie w przyciski czas
                function handleCzasButtonClick() {
                    addBlueBorder(this);
                }
                // Funkcja obs≈ÇugujƒÖca klikniƒôcie w przyciski rodzaj-button
                function handleRodzajButtonClick() {
                    addBlueBorder(this);
                }
                // Dodaj zdarzenia do przycisk√≥w rodzaj-button
                $flashcardContainer.find('.rodzaj-button').on('click', handleRodzajButtonClick);
                // Dodaj zdarzenia do przycisk√≥w charakter-button
                $flashcardContainer.find('.charakter-button').on('click', handleCharakterButtonClick);

                // Dodaj zdarzenia do przycisk√≥w czas
                $flashcardContainer.find('.czas').on('click', handleCzasButtonClick);

                // Przekazanie argumentu 0

            }
            idpolski = false;
            let indexes = [];
            let pulpitstartowy = false;
            var czasv2;

            // Definicja zmiennej globalnej globalCategory
            var przyciskKlikniety = false;
            // Definicja zmiennej matchingIndexes
            let matchingIndexes = [];
            let tablica7 = [];
            let pierwszyFilmURL = '';
            function zapiszPierwszyFilmURL(url) {
                if (pierwszyFilmURL === '') {
                    pierwszyFilmURL = url;
                }
            }
            var globalCategory = '';
            // Funkcja przekazujƒÖca argument


            tablica3[0] = 'fiszki'; // Domy≈õlny tryb
            tablica3[1] = null; // Domy≈õlny tryb
            tablica3[2] = 'all'; // Domy≈õlny tryb
            tablica3[4] = null;
            function przekazArgument0(category, index55, buttonindex, czas, idpolski, idtranslate, id, rodzaj, isSearching, matchingLessons5, matchingLessons5b, isSearching2, staraTablica40) {
                $('.grid-container .image-container3').remove();
                $('.grid-container .image-container4').remove();
                tablica3[1] = id;
                tablica3[2] = category;
                tablica3[4] = rodzaj;
                console.log('hej55b', rodzaj);
                console.log('hej321b', idtranslate);
                console.log('hej453', buttonindex);
                console.log('hej453', czas);
                console.log('hej453', idpolski);
                pulpitstartowy = true;
                przyciskKlikniety = true;
                // Przypisz warto≈õƒá do zmiennej globalnej
                globalCategory = category;
                tablica10.length = 0;
                tablica15.length = 0;
                globalIdTranslate = idtranslate;
                                console.log('nowy30', rodzaj);
                // Wywo≈Çaj funkcjƒô wybierzCharakter na podstawie trybu
                wybierzCharakter(category, tablica3[0], index55, buttonindex, tablica3[1], tablica3[3], rodzaj, isSearching, matchingLessons5, matchingLessons5b, isSearching2, staraTablica40);

            }

            function ustawTryb(tryb, frazy) {
                // Zaktualizuj pierwszƒÖ warto≈õƒá w tablicy lub dodaj, je≈õli jest pusta
                tablica3[0] = tryb;
                tablica3[3] = frazy;
            }
            console.log('hej33bb', tablica3);
            // Funkcja wybierajƒÖca charakter
            function wybierzCharakter(category, czas, index55, buttonindex, idpolski, frazyid, rodzaj, isSearching, matchingLessons5, matchingLessons5b, isSearching2, staraTablica40) {
                console.log('hej223', czas, category, frazyid);

                pulpitstartowy = false;
                console.log('hej555', czas);
                // Aktualizuj matchingIndexes na podstawie nowej kategorii
                matchingIndexes = findXForMatchingFiszka(globalCategory, fiszki);
                matchingIndexes2 = findXForMatchingFiszka2(globalCategory, fiszki);
                matchingIndexes3 = findXForMatchingFiszka3(globalCategory, fiszki);

                wybierzRodzaj(globalCategory, czas, matchingIndexes, index55, buttonindex, idpolski, frazyid, matchingIndexes2, rodzaj, matchingIndexes3, isSearching, matchingLessons5, matchingLessons5b, isSearching2, staraTablica40);
                // Wy≈õwietl na konsoli zaktualizowane matchingIndexes
                console.log("Zaktualizowane matchingIndexes:", matchingIndexes);
                console.log("wykonuje sie hej", matchingIndexes2);
                czasv2 = czas;
            }

            // Funkcja znajdujƒÖca indeksy dla pasujƒÖcych "fiszek"
            function findXForMatchingFiszka(category, fiszki) {
                const matchingIndexes = [];
                // Iteruj przez tablicƒô fiszki
                console.log('hej234', category);
                for (let i = 0; i < fiszki.length; i++) {
                    // Upewnij siƒô, ≈ºe fiszki[i] oraz fiszki[i].category3 sƒÖ zdefiniowane
                    if (fiszki[i].category2.includes(category)) {
                        // Je≈õli warunek jest spe≈Çniony, dodajemy indeks "fiszki" do tablicy
                        matchingIndexes.push(i + 1);
                        console.log('hej7vvv', matchingIndexes);
                    }
                }
                // Zwracamy tablicƒô indeks√≥w pasujƒÖcych "fiszek"
                console.log('wykonuje siƒô 6', matchingIndexes);
                return matchingIndexes;
            }
            // Funkcja znajdujƒÖca indeksy dla pasujƒÖcych "fiszek"
            function findXForMatchingFiszka2(category, fiszki) {
                const matchingIndexes2 = [];
                // Iteruj przez tablicƒô fiszki
                console.log('hej234', category);
                for (let i = 0; i < fiszki.length; i++) {
                    // Upewnij siƒô, ≈ºe fiszki[i] oraz fiszki[i].category3 sƒÖ zdefiniowane
                    if (fiszki[i] && fiszki[i].category3 && fiszki[i].category3.includes("PresentSimplePodmiot")) {
                        matchingIndexes2.push(i + 1);
                        console.log('hej7xxv', matchingIndexes2);
                    }
                }
                // Zwracamy tablicƒô indeks√≥w pasujƒÖcych "fiszek"
                console.log('wykonuje siƒô 6bb', matchingIndexes2);
                return matchingIndexes2;
            }
            function findXForMatchingFiszka3(category, fiszki) {
                const matchingIndexes3 = [];
                // Iteruj przez tablicƒô fiszki
                console.log('hej234', category);
                for (let i = 0; i < fiszki.length; i++) {
                    // Upewnij siƒô, ≈ºe fiszki[i] oraz fiszki[i].category3 sƒÖ zdefiniowane
                    if (fiszki[i] && fiszki[i].category3 && fiszki[i].category3.includes("PresentSimpleCzasownik")) {
                        matchingIndexes3.push(i + 1);
                        console.log('hej7xxv', matchingIndexes3);
                    }
                }
                // Zwracamy tablicƒô indeks√≥w pasujƒÖcych "fiszek"
                console.log('wykonuje siƒô 6bb', matchingIndexes3);
                return matchingIndexes3;
            }
            function countCorrelationsForId0(fiszki) {
                const correlationsCount = [];

                fiszki.forEach(fiszka => {
                    const id0 = fiszka.id[1];
                    const id1 = fiszka.id[0];

                    let found = false;
                    for (let i = 0; i < correlationsCount.length; i++) {
                        if (correlationsCount[i][0] === id0) {
                            correlationsCount[i][1]++;
                            found = true;
                            break;
                        }
                    }

                    if (!found) {
                        correlationsCount.push([id0, 1]);
                    }
                });

                return correlationsCount;
            }

            const correlationsCount = countCorrelationsForId0(fiszki);
            console.log('hej12', correlationsCount);

            function calculatePartLengths(fiszki) {
                const idToLengthsMap = new Map(); // Mapa dla d≈Çugo≈õci czƒô≈õci zdania dla ka≈ºdego identyfikatora y

                fiszki.forEach(fiszka => {
                    const y = fiszka.id[1];

                    if (!fiszka.sentence2)
                        return; // Zabezpieczenie przed obiektami fiszki, kt√≥re nie majƒÖ w≈Ça≈õciwo≈õci sentence2

                    // Je≈õli identyfikator y nie jest jeszcze w mapie, dodaj go z poczƒÖtkowymi d≈Çugo≈õciami i licznikiem
                    if (!idToLengthsMap.has(y)) {
                        const secondPartLength = fiszka.sentence2.length;

                        idToLengthsMap.set(y, {
                            totalLength: secondPartLength,
                            count: 1
                        });
                    } else {
                        // Je≈õli identyfikator y ju≈º jest w mapie, zaktualizuj d≈Çugo≈õci i licznik
                        const lengths = idToLengthsMap.get(y);
                        lengths.totalLength += fiszka.sentence2.length;
                        lengths.count += 1;
                        idToLengthsMap.set(y, lengths);
                    }
                });

                // Konwersja mapy na tablicƒô wynikowƒÖ
                const result = [];
                idToLengthsMap.forEach((lengths, id) => {
                    result.push({id: id, ...lengths});
                });

                return result;
            }



            const partLengths = calculatePartLengths(fiszki);
            console.log('Part lengths:', partLengths);



            function calculatePartLengths1(fiszki) {
                const idToLengthsMap = new Map(); // Mapa dla d≈Çugo≈õci czƒô≈õci zdania dla ka≈ºdego identyfikatora y

                fiszki.forEach(fiszka => {
                    const y = fiszka.id[1];

                    if (!fiszka.sentence1)
                        return; // Zabezpieczenie przed obiektami fiszki, kt√≥re nie majƒÖ w≈Ça≈õciwo≈õci sentence1

                    // Je≈õli identyfikator y nie jest jeszcze w mapie, dodaj go z poczƒÖtkowymi d≈Çugo≈õciami i licznikiem
                    if (!idToLengthsMap.has(y)) {
                        const secondPartLength = fiszka.sentence1.length;

                        idToLengthsMap.set(y, {
                            count2: 1
                        });
                    } else {
                        // Je≈õli identyfikator y ju≈º jest w mapie, zwiƒôksz licznik
                        const lengths = idToLengthsMap.get(y);
                        lengths.count2 += 1;
                        idToLengthsMap.set(y, lengths);
                    }
                });

                // Konwersja mapy na tablicƒô wynikowƒÖ
                const result = [];
                idToLengthsMap.forEach((lengths, id) => {
                    result.push({id: id, ...lengths});
                });

                return result;
            }

            const partLengths1 = calculatePartLengths1(fiszki);
            console.log('Part lengths1:', partLengths1);
            function calculatePartLengths2(fiszki) {
                const idToLengthsMap = new Map(); // Mapa dla d≈Çugo≈õci czƒô≈õci zdania dla ka≈ºdego identyfikatora y

                fiszki.forEach(fiszka => {
                    const y = fiszka.id[1];

                    if (!fiszka.sentence2)
                        return; // Zabezpieczenie przed obiektami fiszki, kt√≥re nie majƒÖ w≈Ça≈õciwo≈õci sentence1

                    // Je≈õli identyfikator y nie jest jeszcze w mapie, dodaj go z poczƒÖtkowymi d≈Çugo≈õciami i licznikiem
                    if (!idToLengthsMap.has(y)) {
                        const secondPartLength = fiszka.sentence2.length;

                        idToLengthsMap.set(y, {
                            count2: 1
                        });
                    } else {
                        // Je≈õli identyfikator y ju≈º jest w mapie, zwiƒôksz licznik
                        const lengths = idToLengthsMap.get(y);
                        lengths.count2 += 1;
                        idToLengthsMap.set(y, lengths);
                    }
                });

                // Konwersja mapy na tablicƒô wynikowƒÖ
                const result = [];
                idToLengthsMap.forEach((lengths, id) => {
                    result.push({id: id, ...lengths});
                });

                return result;
            }

            const partLengths2 = calculatePartLengths2(fiszki);
            console.log('Part lengths2:', partLengths2);


            function calculatePartLengths3(fiszki) {
                const idToLengthsMap = new Map(); // Mapa dla d≈Çugo≈õci czƒô≈õci zdania dla ka≈ºdego identyfikatora y

                // Pierwsza iteracja: zliczanie d≈Çugo≈õci zda≈Ñ dla ka≈ºdego identyfikatora y
                fiszki.forEach(fiszka => {
                    const y = fiszka.id[1];
                    const totalLength = (fiszka.sentence1 ? fiszka.sentence1.length : 0) + (fiszka.sentence2 ? fiszka.sentence2.length : 0);

                    if (!idToLengthsMap.has(y)) {
                        idToLengthsMap.set(y, {
                            totalLength: totalLength,
                            count: 1
                        });
                    } else {
                        const lengths = idToLengthsMap.get(y);
                        lengths.totalLength += totalLength;
                        lengths.count += 1;
                        idToLengthsMap.set(y, lengths);
                    }
                });

                // Druga iteracja: tworzenie wynikowej tablicy ze skumulowanymi warto≈õciami
                const result = [];
                let cumulativeCount = 0; // Zmienna do ≈õledzenia sumy count

                idToLengthsMap.forEach((lengths, id) => {
                    result.push({id: id, cumulativeCount: cumulativeCount}); // Pierwsza warto≈õƒá wynosi 0
                    cumulativeCount += lengths.count; // Odejmowanie aktualnej warto≈õci count od sumy
                });

                return result;
            }


            const partLengths3 = calculatePartLengths3(fiszki);
            console.log('Cumulative counts:', partLengths3);



            const lessonsArray = [];
            const lessonsArrayA = [];
            const lessonsArrayB = [];
            const lessonsArrayZ = [];
            console.log('hej45', lessonsArray);
            // Wy≈õwietlenie wyniku
            // Funkcja odtwarzajƒÖca losowy kontener image-container3
            // Funkcja odtwarzajƒÖca losowy kontener image-container3
            let imageContainer3Array = [];
            console.log('hej44', imageContainer3Array);
            let currentVideoIndex = 0; // Indeks bie≈ºƒÖcego filmu do odtworzenia

            // Funkcja obs≈ÇugujƒÖca zdarzenie zako≈Ñczenia odtwarzania filmu
            function videoEndedHandler() {
                currentVideoIndex = (currentVideoIndex + 1) % imageContainer3Array.length; // Przej≈õcie do nastƒôpnego filmu
                playRandomImageContainer3(); // Odtw√≥rz kolejny losowy film
            }
            console.log("Matching indexes:", matchingIndexes);
            let polski = false;
            let losowaniaCounter = 0; // Zmienna licznika losowa≈Ñ
            let losowaniaCounter2 = 0; // Zmienna licznika losowa≈Ñ
            let tablica33 = [];
            let tablica33b = [];
            function wybierzRodzaj(category, czas, matchingIndexes, index55, buttonindex, idpolski, frazyid, matchingIndexes2, rodzaj, matchingIndexes3, isSearching, matchingLessons5, matchingLessons5b, isSearching2, staraTablica40) {
                category = category || globalCategory;
                czasv2 = czas;
                console.log("Wybrany rodzaj s≈Çownictwa: ", fiszki);
                console.log('hej5b', index55);
                console.log('hej755', matchingIndexes);

                const matchingLessons = new Set();
                const matchingLessons1b = new Set(matchingLessons5);
                const matchingLessons2 = new Set();
// Iteracja przez fiszki
console.log('hej755', matchingLessons1b);
                for (const fiszka of fiszki) {
                    let matchingFiszka = false;
                    // Sprawdzenie warunk√≥w dla category
                    if (category === 'all' || !category) {
                        matchingFiszka = true;
                    } else if (category !== 'PresentSimple' && category !== 'PresentContinous' && category !== 'PastSimple') {
                        matchingFiszka = fiszka.category2.includes(category);
                    } else {
                        matchingFiszka = fiszka.category3 && fiszka.category3.includes(category);
                    }

                    // Dodanie fiszki do matchingLessons na podstawie warunk√≥w
                    if (matchingFiszka) {
                        if (frazyid === 'frazy') {
                            matchingLessons2.add(fiszka.id[2]);
                        } else {
                            // Dodawanie id do matchingLessons, je≈õli czas nie jest 'frazy'
                            matchingLessons.add(fiszka.id[1]);
                        }
                    }
                }
                console.log('matchingLessons2:', matchingLessons2);
                const uniqueMatchingLessons = Array.from(matchingLessons);
                const uniqueMatchingLessons2 = Array.from(matchingLessons2);
                const uniqueMatchingLessons2b = Array.from(matchingLessons1b);
                    // Pobranie lekcji dla pasujƒÖcych s≈Ç√≥w
                console.log('Unikalne dopasowane lekcjenn:', uniqueMatchingLessons2b);

                let myVariable;

                if (!isSearching) {
                    myVariable = uniqueMatchingLessons;
                } else if (isSearching) {
                    myVariable = uniqueMatchingLessons2b;
                    console.log('myVariable8:', uniqueMatchingLessons2b);
                }
                if (isSearching2) {
    console.log("Klikniƒôto singleWordBtn", staraTablica40);

    console.log("Wy≈õwietlam zawarto≈õƒá tablica40 (tylko raz):", tablica40);

    function showFiszkiForLesson5dd(tablica40, tablica41, fiszki) {
        console.log("Wybrany rodzaj: ", tablica40);

        setTimeout(() => {
            let matchingFiszki122 = [];

            tablica40.forEach(t40 => {
                fiszki.forEach(fiszka => {
                    if (fiszka.id[0] === t40) {
                        matchingFiszki122.push(fiszka); // Zapisujemy ca≈Çy obiekt, nie tylko fiszka.id
                    }
                });
            });

            console.log("Wy≈õwietlam:", matchingFiszki122);

            // Przyk≈Çadowe u≈ºycie funkcji generateFiszkaBlock3
            matchingFiszki122.forEach(fiszka => {
                generateFiszkaBlock3(fiszka, "lessonId2"); // Przekazujemy ca≈Çy obiekt fiszka
            });

        }, 1000);
    }

    setTimeout(() => {
        showFiszkiForLesson5dd(tablica40, tablica41, fiszki);
    }, 100);
    function showFiszkiForLesson5ddb(staraTablica40, tablica41, fiszki) {
    console.log("Wybrany rodzaj4vv: ", staraTablica40);

    setTimeout(() => {
        let idFiszki = [];

        // Pobieranie id pasujƒÖcych do tablica40
        staraTablica40.forEach(t40 => {
            fiszki.forEach(fiszka => {
                if (fiszka.id[0] === t40) {
                    idFiszki.push(fiszka.id); // Zapisujemy ca≈Çy obiekt
                }
            });
        });

        console.log("Wy≈õwietlam4vv:", idFiszki);

        // Podzia≈Ç na mniejsze grupy po 3 elementy
        let chunkedIdFiszki = [];
        for (let i = 0; i < idFiszki.length; i += 3) {
            chunkedIdFiszki.push(idFiszki.slice(i, i + 3));
        }

        console.log("Podzielone grupy ID:", chunkedIdFiszki);

        // Usuwanie ka≈ºdej grupy osobno
        chunkedIdFiszki.forEach(group => {
            removeFiszka(group);
        });

    }, 600);
}

function removeFiszka(idFiszkiGroup) {
    idFiszkiGroup.forEach(singleId => {
        // Je≈õli singleId jest tablicƒÖ, ≈ÇƒÖczymy jej elementy separatorem ','
        let idString = Array.isArray(singleId) ? singleId.join(',') : singleId;
        const className = `fiszka5 fiszka-${idString}`;
        
        // Escape'owanie przecink√≥w w selektorze CSS
        const selector = `.${className.replace(/,/g, '\\,').replace(/\s+/g, '.')}`; 

        console.log("Wy≈õwietlam4b:", selector);
    
        const $fiszkaToRemove = $('.grid-container').find(selector);
        if ($fiszkaToRemove.length) {
            console.log('Element znaleziony po op√≥≈∫nieniu, usuwam...');
            $fiszkaToRemove.remove();
        } else {
            console.log('Element nadal nie znaleziony.');
        }
    });
}

        setTimeout(() => {
        showFiszkiForLesson5ddb(staraTablica40, tablica41, fiszki);
    }, 0);
}
if (!isSearching2) {
    console.log('hej350');
    $('.grid-container .image-container3').remove();
        function showFiszkiForLesson5ddb(tablica40, tablica41, fiszki) {
    console.log("Wybrany rodzaj4vv: ", staraTablica40);

    setTimeout(() => {
        let idFiszki = [];

        // Pobieranie id pasujƒÖcych do tablica40
        tablica40.forEach(t40 => {
            fiszki.forEach(fiszka => {
                if (fiszka.id[0] === t40) {
                    idFiszki.push(fiszka.id); // Zapisujemy ca≈Çy obiekt
                }
            });
        });

        console.log("Wy≈õwietlam4vv:", idFiszki);

        // Podzia≈Ç na mniejsze grupy po 3 elementy
        let chunkedIdFiszki = [];
        for (let i = 0; i < idFiszki.length; i += 3) {
            chunkedIdFiszki.push(idFiszki.slice(i, i + 3));
        }

        console.log("Podzielone grupy ID:", chunkedIdFiszki);

        // Usuwanie ka≈ºdej grupy osobno
        chunkedIdFiszki.forEach(group => {
            removeFiszka(group);
        });

    }, 600);
}

function removeFiszka(idFiszkiGroup) {
    idFiszkiGroup.forEach(singleId => {
        // Je≈õli singleId jest tablicƒÖ, ≈ÇƒÖczymy jej elementy separatorem ','
        let idString = Array.isArray(singleId) ? singleId.join(',') : singleId;
        const className = `fiszka5 fiszka-${idString}`;
        
        // Escape'owanie przecink√≥w w selektorze CSS
        const selector = `.${className.replace(/,/g, '\\,').replace(/\s+/g, '.')}`; 

        console.log("Wy≈õwietlam4b:", selector);
    
        const $fiszkaToRemove = $('.grid-container').find(selector);
        if ($fiszkaToRemove.length) {
            console.log('Element znaleziony po op√≥≈∫nieniu, usuwam...');
            $fiszkaToRemove.remove();
        } else {
            console.log('Element nadal nie znaleziony.');
        }
    });
}

        setTimeout(() => {
        showFiszkiForLesson5ddb(tablica40, tablica41, fiszki);
    }, 0);
}
                let powiadomienieCounter = 0; // Licznik wy≈õwietle≈Ñ powiadomie≈Ñ
                                if (czas === 'fiszki' && czas !== "zdania" && isSearching) {
                    console.log('Warunek czas === "fiszki" jest spe≈Çniony');
                    $('.grid-container .image-container4').remove();
                    $('.grid-container .image-container5').remove();

if (myVariable.length > 0) {
    let zeroWylosowane = false;
    let indexDiv = 0;
    let cumulativeFirstPartLength1 = 0;
    let cumulativeFirstPartLength2 = 0;
    let cumulativeFirstPartLength3 = 0;

    let startIndex = 0;
    const lengthDividedByThree = Math.floor(myVariable.length / 3);

    let indices = Array.from({ length: lengthDividedByThree }, (_, i) => i + 1);
    let indices2 = [...indices];

    console.log('hej12', indices2);

    let zeroIndex = Math.floor(Math.random() * lengthDividedByThree);
    let zeroIndex2 = zeroIndex;  // Assuming you want zeroIndex2 to mirror zeroIndex

    if (isSearching) {
        zeroIndex = undefined;
    } else {
        indices[zeroIndex] = 0; 
    }

    indices2[zeroIndex2] = 0;

                        tablica33.push(losowaniaCounter); // Dodaj zaktualizowany licznik do tablicy
                        console.log('hej1113', tablica33); // Wy≈õwietl zawarto≈õƒá tablicy
                        for (let i = 0; i < myVariable.length; i += 3) {
                            indexDiv++;
                            const lessonId1 = myVariable[i];
                            const lessonId2 = myVariable[i + 1];
                            const lessonId3 = myVariable[i + 2];
                            const newIndex = indices[Math.floor(i / 3)];
                            const index50 = indices2[Math.floor(i / 3)];
                            console.log('hej16e', indexDiv);

                            const lesson1Sentences = correlationsCount.find(item => item[0] === lessonId1) || [lessonId1, 0];
                            const lesson2Sentences = correlationsCount.find(item => item[0] === lessonId2) || [lessonId2, 0];
                            const lesson3Sentences = correlationsCount.find(item => item[0] === lessonId3) || [lessonId3, 0];

                            const lesson1SecondPartLength = partLengths2.find(item => item.id === lessonId1)?.count2 || 0;
                            const lesson2SecondPartLength = partLengths2.find(item => item.id === lessonId2)?.count2 || 0;
                            const lesson3SecondPartLength = partLengths2.find(item => item.id === lessonId3)?.count2 || 0;

                            const lesson1FirstPartLength = partLengths1.find(item => item.id === lessonId1)?.count2 || 0;
                            const lesson2FirstPartLength = partLengths1.find(item => item.id === lessonId2)?.count2 || 0;
                            const lesson3FirstPartLength = partLengths1.find(item => item.id === lessonId3)?.count2 || 0;

                            const lesson1PartLength = partLengths3.find(item => item.id === lessonId1)?.cumulativeCount || 0;
                            const lesson2PartLength = partLengths3.find(item => item.id === lessonId2)?.cumulativeCount || 0;
                            const lesson3PartLength = partLengths3.find(item => item.id === lessonId3)?.cumulativeCount || 0;

                            cumulativeFirstPartLength1 += lesson1PartLength;
                            cumulativeFirstPartLength2 += lesson2PartLength;
                            cumulativeFirstPartLength3 += lesson3PartLength;

                            const lessonObjectZ = {
                                lessonId1: lessonId1,
                                lessonId2: lessonId2,
                                lessonId3: lessonId3,
                                index50: index50,
                                newIndex: newIndex,
                                lesson1Sentences: lesson1Sentences,
                                lesson2Sentences: lesson2Sentences,
                                lesson3Sentences: lesson3Sentences,
                                lesson1PartLength: lesson1PartLength,
                                lesson2PartLength: lesson2PartLength,
                                lesson3PartLength: lesson3PartLength,
                                lesson1FirstPartLength: lesson1FirstPartLength,
                                lesson2FirstPartLength: lesson2FirstPartLength,
                                lesson3FirstPartLength: lesson3FirstPartLength,
                                lesson1SecondPartLength: lesson1SecondPartLength,
                                lesson2SecondPartLength: lesson2SecondPartLength,
                                lesson3SecondPartLength: lesson3SecondPartLength,
                                indexDiv: indexDiv
                            };

                            lessonsArrayZ.push(lessonObjectZ);
                            console.log('hej3334vv', lessonObjectZ);

                            // Zwiƒôkszenie licznika losowa≈Ñ
                            console.log('Liczba losowa≈Ñ:', losowaniaCounter); // Dodano log licznika losowa≈Ñ



                            if (tablica10.length <= 17 || tablica10.length === 0) {
                                console.log('wykonuje siƒô 8');
                                console.log('hej32', newIndex);
                                console.log('hej18vv', matchingLessons5b);
                                showCombinedSentenceForLesson(matchingIndexes3, rodzaj, matchingIndexes2, buttonindex, index50, lessonId1, lessonId2, lessonId3, fiszki, matchingIndexes, startIndex, newIndex, indexDiv, lessonsArray, lesson1PartLength, lesson2PartLength, lesson3PartLength, lesson1Sentences, lesson2Sentences, lesson3Sentences, lesson1FirstPartLength, lesson2FirstPartLength, lesson3FirstPartLength, lesson1SecondPartLength, lesson2SecondPartLength, lesson3SecondPartLength, cumulativeFirstPartLength1, cumulativeFirstPartLength2, cumulativeFirstPartLength3, lessonsArrayZ, matchingLessons5, matchingLessons5b, isSearching);
                            }

                        }

                        console.log('Aktualna zawarto≈õƒá tablicy lessonsArray:', lessonsArray);
                        const numberOfContainers = $('.image-container3').length;
                        console.log('Liczba dodanych div√≥w:', numberOfContainers);
                    }
                }
                if (czas === 'zdania' && czas !== 'fiszki' && isSearching) {
                    $('.grid-container .image-container3').remove();
                    $('.grid-container .image-container5').remove();
                    // Wy≈õwietl pojedyncze zdania dla znalezionych lekcji
                    console.log('Warunek czas === "fiszki" jest spe≈Çniony');

                    if (myVariable.length > 0) {
                        // Inicjuj flagƒô dla wystƒÖpienia zera
                        let zeroWylosowane = false;
                        // Losowy indeks, w kt√≥rym pojawi siƒô zero
                        let indexDiv = 0;
                        // Zmienna do kumulowania d≈Çugo≈õci zda≈Ñ
                        let previousCumulativeFirstPartLength3 = 0;  // Przechowywanie poprzedniej kumulacji dla lesson3
                        let cumulativeFirstPartLength1 = 0;
                        let cumulativeFirstPartLength2 = 0;
                        let cumulativeFirstPartLength3 = 0;

                        // Wy≈õwietl fiszki dla ka≈ºdej znalezionej pary lekcji
                        let startIndex = 0; // Zainicjuj startIndex poza pƒôtlƒÖ
                        const lengthDividedByThree = myVariable.length;
                        let indices2 = [];
                        for (let i = 1; i <= lengthDividedByThree; i++) {
                            indices2.push(i);
                        }
                        let indices = [];
                        for (let i = 1; i <= lengthDividedByThree; i++) {
                            indices.push(i);
                        }
// Losowanie indeksu, kt√≥ry bƒôdzie mia≈Ç warto≈õƒá 0
                        const zeroIndex = Math.floor(Math.random() * (indexes.length)); // +1 aby uwzglƒôdniƒá dodanie zera na ko≈Ñcu
                        indexes[zeroIndex] = 0;

// Sprawd≈∫ czy tablica indexes zawiera zero

                        let shouldInsertNumbers = indexes.includes(0);

                        if (shouldInsertNumbers) {
                            let firstValue = indexes.length > 0 ? indexes[0] : 0;

                            // Utworzenie tablicy do wstawienia przed indexes, je≈õli obie warto≈õci nie sƒÖ zerami
                            if (firstValue !== 0) {
                                let numbersToInsert = [];
                                for (let i = 1; i < firstValue; i++) {
                                    numbersToInsert.push(i);
                                }

                                // Wstawienie numbersToInsert przed indexes
                                indexes = [...numbersToInsert, ...indexes];
                            }
                        }

// Wy≈õwietlenie zaktualizowanej tablicy indexes
                        console.log('Aktualizowane indeksy:', indexes);

                        const zeroIndex2 = index55 - 1;
                        // Wstawienie 0 na wylosowane miejsce
                        indices2[zeroIndex2] = 0;
                        console.log('hej166');
                        let indices3 = [];
                        // Inicjalizacja tablicy indices2 jako pustej tablicy
                        if (idpolski) {
                            for (let i = 1; i <= lengthDividedByThree; i++) {
                                // Dodawanie warto≈õci true do tablicy indices2 dla ka≈ºdej iteracji
                                indices3.push(true);
                            }
                            console.log('indices3:', indices3);
                        }
                        tablica33b.push(losowaniaCounter2); // Dodaj zaktualizowany licznik do tablicy
                        console.log('hej1113', tablica33b); // Wy≈õwietl zawarto≈õƒá tablicy
                        for (let i = 0; i < myVariable.length; i += 1) {
                            indexDiv++;
                            const lessonId1 = myVariable[i];
                            const newIndex = indexes[Math.floor(i)];
                            const index50 = indices2[Math.floor(i)];
                            const polski = idpolski ? indices3[i % indices3.length] : false;
                            console.log(`Iteration ${i}: polski =`, polski);

                            console.log('hej16d', myVariable[i]);
                            // Dodanie warto≈õci true dla ka≈ºdego lessonId w polski


                            // Znajd≈∫ d≈Çugo≈õci drugiej czƒô≈õci zdania dla ka≈ºdej lekcji
                            const lesson1PartLength = partLengths3.find(item => item.id === lessonId1)?.cumulativeCount || 0;

                            // Obliczanie skumulowanych d≈Çugo≈õci
                            cumulativeFirstPartLength1 += lesson1PartLength;

                            const cumulativeTotalFirstPartLength1 = cumulativeFirstPartLength1;

                            // Aktualizacja poprzedniej warto≈õci skumulowanej dla nastƒôpnej iteracji
                            previousCumulativeFirstPartLength3 = cumulativeFirstPartLength3;

                            const lessonObjectA = {
                                lessonId1: lessonId1,
                                index50: index50,
                                newIndex: newIndex,
                                lesson1PartLength: lesson1PartLength,
                                indexDiv: indexDiv,
                                polski: polski
                            };

                            // Dodawanie obiektu do tablicy lekcji
                            lessonsArrayA.push(lessonObjectA);
                            console.log('hej3334vv', lessonObjectA);


                            // Zwiƒôksz startIndex o 7 za ka≈ºdym razem, gdy funkcja iteruje
                            console.log('hej558', lessonsArrayA);
                            console.log('hej40', newIndex); // Wy≈õwietl warto≈õƒá startIndex
                            console.log('wykonuje siƒô 7');
                            console.log('hej323', index55);

                            console.log('hej344');
                            // Zwiƒôkszenie licznika losowa≈Ñ
                            console.log('Liczba losowa≈Ñ:', losowaniaCounter); // Dodano log licznika losowa≈Ñ


                            if ((tablica15.length <= 51 || tablica15.length === 0)) {
                                console.log('wykonuje siƒô 8');

                                showCombinedSentenceForLesson2(polski, index50, matchingIndexes, lessonId1, newIndex, indexDiv, lesson1PartLength);
                                console.log('hej321', polski);
                            }
                        }
                    }
                }
                if (idpolski === 'dlugie') {
                    console.log('Dane correlationsCount:', correlationsCount);

                    const validLessons = myVariable.filter(lessonId => {
                        const lessonEntry = correlationsCount.find(item => item[0] === lessonId) || [lessonId, 0];
                        console.log('Sprawdzanie lessonId:', lessonId, 'lessonEntry:', lessonEntry);
                        const lessonSentences = lessonEntry[1];
                        return lessonSentences > 6;
                    });

                    myVariable = validLessons;
                }
                if (idpolski === 'krotkie') {
                    console.log('Dane correlationsCount:', correlationsCount);

                    const validLessons = myVariable.filter(lessonId => {
                        const lessonEntry = correlationsCount.find(item => item[0] === lessonId) || [lessonId, 0];
                        console.log('Sprawdzanie lessonId:', lessonId, 'lessonEntry:', lessonEntry);
                        const lessonSentences = lessonEntry[1];
                        return lessonSentences < 6;
                    });

                    myVariable = validLessons;
                }
                                if (idpolski === 'losowyuklad') {
    console.log('Warunek czas === "fiszki" jest spe≈Çniony');
                    $('.grid-container .image-container4').remove();
                    $('.grid-container .image-container5').remove();

    console.log('Zawarto≈õƒá myVariable:', myVariable);
    if (myVariable.length > 1) {
        let indexDiv = 0;
        let lessonsGroups = []; // Tablica do przechowywania grup lessonId
                        let startIndex = 0;
        for (let i = 0; i < myVariable.length; i += 3) {
            indexDiv++;
            const lessonId1 = myVariable[i];
            const lessonId2 = myVariable[i + 1];
            const lessonId3 = myVariable[i + 2];

            const lessonObject2 = {
                lessonId1: lessonId1,
                lessonId2: lessonId2,
                lessonId3: lessonId3,
                indexDiv: indexDiv
            };

            lessonsGroups.push(lessonObject2);
        }

        console.log('Utworzone grupy:', lessonsGroups);

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        shuffleArray(lessonsGroups);
        console.log('Grupy po tasowaniu:', lessonsGroups);

        lessonsGroups.forEach((group, index) => {
            console.log(`Grupa ${index}:`, group);

            const lesson1Sentences = correlationsCount.find(item => item[0] === group.lessonId1) || [group.lessonId1, 0];
            const lesson2Sentences = correlationsCount.find(item => item[0] === group.lessonId2) || [group.lessonId2, 0];
            const lesson3Sentences = correlationsCount.find(item => item[0] === group.lessonId3) || [group.lessonId3, 0];

            const lesson1SecondPartLength = partLengths2.find(item => item.id === group.lessonId1)?.count2 || 0;
            const lesson2SecondPartLength = partLengths2.find(item => item.id === group.lessonId2)?.count2 || 0;
            const lesson3SecondPartLength = partLengths2.find(item => item.id === group.lessonId3)?.count2 || 0;

            const lesson1FirstPartLength = partLengths1.find(item => item.id === group.lessonId1)?.count2 || 0;
            const lesson2FirstPartLength = partLengths1.find(item => item.id === group.lessonId2)?.count2 || 0;
            const lesson3FirstPartLength = partLengths1.find(item => item.id === group.lessonId3)?.count2 || 0;

            const lesson1PartLength = partLengths3.find(item => item.id === group.lessonId1)?.cumulativeCount || 0;
            const lesson2PartLength = partLengths3.find(item => item.id === group.lessonId2)?.cumulativeCount || 0;
            const lesson3PartLength = partLengths3.find(item => item.id === group.lessonId3)?.cumulativeCount || 0;

            console.log('Dane dla grupy:', {
                lesson1PartLength,
                lesson2PartLength,
                lesson3PartLength,
                lesson1Sentences,
                lesson2Sentences,
                lesson3Sentences
            });

    try {
        showCombinedSentenceForLesson(
            matchingIndexes3, rodzaj, matchingIndexes2, buttonindex, group.indexDiv,
            group.lessonId1, group.lessonId2, group.lessonId3, fiszki, matchingIndexes,
            startIndex, index, lessonsGroups, lesson1PartLength, lesson2PartLength, lesson3PartLength,
            lesson1Sentences, lesson2Sentences, lesson3Sentences, lesson1FirstPartLength,
            lesson2FirstPartLength, lesson3FirstPartLength, lesson1SecondPartLength,
            lesson2SecondPartLength, lesson3SecondPartLength
        );
    } catch (error) {
        console.error("B≈ÇƒÖd w showCombinedSentenceForLesson dla grupy:", group, "B≈ÇƒÖd:", error);
    }
        });

        console.log('Zawarto≈õƒá lessonsGroups:', lessonsGroups);
        const numberOfContainers = $('.image-container3').length;
        console.log('Liczba dodanych div√≥w:', numberOfContainers);
    }
}

                
                if (frazyid === 'frazy') {
                    console.log('Warunek czas === "fiszki" jest spe≈Çniony');
                    $('.grid-container .image-container4').remove();
                    $('.grid-container .image-container3').remove();

                    if (uniqueMatchingLessons2.length > 1) {
                        let zeroWylosowane = false;
                        let indexDiv = 0;

                        let previousCumulativeFirstPartLength3 = 0;
                        let cumulativeFirstPartLength1 = 0;
                        let cumulativeFirstPartLength2 = 0;
                        let cumulativeFirstPartLength3 = 0;

                        let startIndex = 0;
                        const lengthDividedByThree = uniqueMatchingLessons2.length;

                        let indices = Array.from({length: lengthDividedByThree}, (_, i) => i + 1);
                        let indices2 = [];
                        for (let i = 1; i <= lengthDividedByThree; i++) {
                            indices2.push(i);
                        }

                        console.log('hej12b', indices);

                        const zeroIndex = Math.floor(Math.random() * lengthDividedByThree);
                        const zeroIndex2 = index55 - 1;
                        indices[zeroIndex] = 0;
                        indices2[zeroIndex2] = 0;
                        let useFirstPartLength = true;
                        for (let i = 0; i < uniqueMatchingLessons2.length; i += 1) {
                            indexDiv++;
                            const lessonId1 = uniqueMatchingLessons2[i];
                            const newIndex = indices[Math.floor(i)];
                            const index50 = indices2[Math.floor(i)];
                            console.log('hej16f', uniqueMatchingLessons2[i]);
                            console.log('hej127');
                            const lesson1SecondPartLength = partLengths2.find(item => item.id === lessonId1)?.count2 || 0;

                            const lesson1FirstPartLength = partLengths1.find(item => item.id === lessonId1)?.count2 || 0;
                            // Wyb√≥r odpowiedniej warto≈õci w zale≈ºno≈õci od zmiennej useFirstPartLength
                            const lessonLength = useFirstPartLength ? lesson1FirstPartLength : lesson1SecondPartLength;

                            const lessonObjectB = {
                                lessonId1: lessonId1,
                                index50: index50,
                                newIndex: newIndex,
                                indexDiv: indexDiv,
                                lessonLength: lessonLength
                            };
                            useFirstPartLength = !useFirstPartLength;
                            lessonsArrayB.push(lessonObjectB);
                            console.log('hej34b', lessonObjectB);

                            console.log('hej556b', lessonsArrayB);
                            console.log('hej77', tablica20);

                            if (tablica20.length <= 70 || tablica20.length === 0) {
                                console.log('wykonuje siƒô 8');
                                console.log('hej32', newIndex);
                                console.log('hej18b', tablica20);
                                showCombinedSentenceForLesson5(index50, lessonId1, newIndex, indexDiv, buttonindex, lessonLength);
                            }
                        }
                        console.log('Aktualna zawarto≈õƒá tablicy lessonsArrayb:', lessonsArrayB);
                        const numberOfContainers = $('.image-container3').length;
                        console.log('Liczba dodanych div√≥w:', numberOfContainers);
                    }
                }

                

                if (czas === 'fiszki' && czas !== "zdania" && !isSearching) {
                    console.log('Warunek czas === "fiszki" jest spe≈Çniony');
                    $('.grid-container .image-container4').remove();
                    $('.grid-container .image-container5').remove();

                    if (myVariable.length > 1) {
                        let zeroWylosowane = false;
                        let indexDiv = 0;

                        let previousCumulativeFirstPartLength3 = 0;
                        let cumulativeFirstPartLength1 = 0;
                        let cumulativeFirstPartLength2 = 0;
                        let cumulativeFirstPartLength3 = 0;

                        let startIndex = 0;
                        const lengthDividedByThree = myVariable.length / 3;

                        let indices = Array.from({length: lengthDividedByThree}, (_, i) => i + 1);
                        let indices2 = [];
                        for (let i = 1; i <= lengthDividedByThree; i++) {
                            indices2.push(i);
                        }

                        console.log('hej12', indices2);

                        const zeroIndex = Math.floor(Math.random() * lengthDividedByThree);
                        const zeroIndex2 = index55 - 1;
                        indices[zeroIndex] = 0;
                        indices2[zeroIndex2] = 0;
                        losowaniaCounter++; // Inkrementuj licznik przy ka≈ºdym wywo≈Çaniu
                        tablica33.push(losowaniaCounter); // Dodaj zaktualizowany licznik do tablicy
                        console.log('hej1113', tablica33); // Wy≈õwietl zawarto≈õƒá tablicy
                        for (let i = 0; i < myVariable.length; i += 3) {
                            indexDiv++;
                            const lessonId1 = myVariable[i];
                            const lessonId2 = myVariable[i + 1];
                            const lessonId3 = myVariable[i + 2];
                            const newIndex = indices[Math.floor(i / 3)];
                            const index50 = indices2[Math.floor(i / 3)];
                            console.log('hej16e', lessonId1);

                            const lesson1Sentences = correlationsCount.find(item => item[0] === lessonId1) || [lessonId1, 0];
                            const lesson2Sentences = correlationsCount.find(item => item[0] === lessonId2) || [lessonId2, 0];
                            const lesson3Sentences = correlationsCount.find(item => item[0] === lessonId3) || [lessonId3, 0];

                            const lesson1SecondPartLength = partLengths2.find(item => item.id === lessonId1)?.count2 || 0;
                            const lesson2SecondPartLength = partLengths2.find(item => item.id === lessonId2)?.count2 || 0;
                            const lesson3SecondPartLength = partLengths2.find(item => item.id === lessonId3)?.count2 || 0;

                            const lesson1FirstPartLength = partLengths1.find(item => item.id === lessonId1)?.count2 || 0;
                            const lesson2FirstPartLength = partLengths1.find(item => item.id === lessonId2)?.count2 || 0;
                            const lesson3FirstPartLength = partLengths1.find(item => item.id === lessonId3)?.count2 || 0;

                            const lesson1PartLength = partLengths3.find(item => item.id === lessonId1)?.cumulativeCount || 0;
                            const lesson2PartLength = partLengths3.find(item => item.id === lessonId2)?.cumulativeCount || 0;
                            const lesson3PartLength = partLengths3.find(item => item.id === lessonId3)?.cumulativeCount || 0;

                            cumulativeFirstPartLength1 += lesson1PartLength;
                            cumulativeFirstPartLength2 += lesson2PartLength;
                            cumulativeFirstPartLength3 += lesson3PartLength;

                            const lessonObject = {
                                lessonId1: lessonId1,
                                lessonId2: lessonId2,
                                lessonId3: lessonId3,
                                index50: index50,
                                newIndex: newIndex,
                                lesson1Sentences: lesson1Sentences,
                                lesson2Sentences: lesson2Sentences,
                                lesson3Sentences: lesson3Sentences,
                                lesson1PartLength: lesson1PartLength,
                                lesson2PartLength: lesson2PartLength,
                                lesson3PartLength: lesson3PartLength,
                                lesson1FirstPartLength: lesson1FirstPartLength,
                                lesson2FirstPartLength: lesson2FirstPartLength,
                                lesson3FirstPartLength: lesson3FirstPartLength,
                                lesson1SecondPartLength: lesson1SecondPartLength,
                                lesson2SecondPartLength: lesson2SecondPartLength,
                                lesson3SecondPartLength: lesson3SecondPartLength,
                                indexDiv: indexDiv
                            };

                            lessonsArray.push(lessonObject);
                            console.log('hej34', lessonObject);

                            // Zwiƒôkszenie licznika losowa≈Ñ
                            console.log('Liczba losowa≈Ñ:', losowaniaCounter); // Dodano log licznika losowa≈Ñ

                            // Sprawdzenie, czy osiƒÖgniƒôto limit losowa≈Ñ
                            if (losowaniaCounter >= 7) {
                                console.log('OsiƒÖgniƒôto 7 losowa≈Ñ, wy≈õwietlam powiadomienie');
                                powiadomienieCounter++; // Zwiƒôkszenie licznika powiadomie≈Ñ

                                if (confirm('OsiƒÖgniƒôto 7 losowa≈Ñ. Czy chcesz kontynuowaƒá losowania?')) {
                                    console.log('U≈ºytkownik potwierdzi≈Ç dalsze losowania');
                                    losowaniaCounter = 0; // Zresetowanie licznika losowa≈Ñ
                                } else {
                                    console.log('U≈ºytkownik przerwa≈Ç dalsze losowania');
                                    break; // Przerwanie pƒôtli, je≈õli u≈ºytkownik nie chce kontynuowaƒá
                                }
                            }

                            if (tablica10.length <= 17 || tablica10.length === 0) {
                                console.log('wykonuje siƒô 8');
                                console.log('hej32', newIndex);
                                console.log('hej18', tablica10);
                                showCombinedSentenceForLesson(matchingIndexes3, rodzaj, matchingIndexes2, buttonindex, index50, lessonId1, lessonId2, lessonId3, fiszki, matchingIndexes, startIndex, newIndex, indexDiv, lessonsArray, lesson1PartLength, lesson2PartLength, lesson3PartLength, lesson1Sentences, lesson2Sentences, lesson3Sentences, lesson1FirstPartLength, lesson2FirstPartLength, lesson3FirstPartLength, lesson1SecondPartLength, lesson2SecondPartLength, lesson3SecondPartLength, cumulativeFirstPartLength1, cumulativeFirstPartLength2, cumulativeFirstPartLength3, lessonsArrayZ, matchingLessons5, matchingLessons5b, isSearching);
                            }

                        }

                        console.log('Aktualna zawarto≈õƒá tablicy lessonsArray:', lessonsArray);
                        const numberOfContainers = $('.image-container3').length;
                        console.log('Liczba dodanych div√≥w:', numberOfContainers);
                    }
                }

                if (czas === 'zdania' && czas !== 'fiszki' && !isSearching) {
                    $('.grid-container .image-container3').remove();
                    $('.grid-container .image-container5').remove();
                    // Wy≈õwietl pojedyncze zdania dla znalezionych lekcji
                    console.log('Warunek czas === "fiszki" jest spe≈Çniony');

                    if (myVariable.length > 1) {
                        // Inicjuj flagƒô dla wystƒÖpienia zera
                        let zeroWylosowane = false;
                        // Losowy indeks, w kt√≥rym pojawi siƒô zero
                        let indexDiv = 0;
                        // Zmienna do kumulowania d≈Çugo≈õci zda≈Ñ
                        let previousCumulativeFirstPartLength3 = 0;  // Przechowywanie poprzedniej kumulacji dla lesson3
                        let cumulativeFirstPartLength1 = 0;
                        let cumulativeFirstPartLength2 = 0;
                        let cumulativeFirstPartLength3 = 0;

                        // Wy≈õwietl fiszki dla ka≈ºdej znalezionej pary lekcji
                        let startIndex = 0; // Zainicjuj startIndex poza pƒôtlƒÖ
                        const lengthDividedByThree = myVariable.length;
                        let indices2 = [];
                        for (let i = 1; i <= lengthDividedByThree; i++) {
                            indices2.push(i);
                        }
                        let indices = [];
                        for (let i = 1; i <= lengthDividedByThree; i++) {
                            indices.push(i);
                        }
// Losowanie indeksu, kt√≥ry bƒôdzie mia≈Ç warto≈õƒá 0
                        const zeroIndex = Math.floor(Math.random() * (indexes.length)); // +1 aby uwzglƒôdniƒá dodanie zera na ko≈Ñcu
                        indexes[zeroIndex] = 0;

// Sprawd≈∫ czy tablica indexes zawiera zero

                        let shouldInsertNumbers = indexes.includes(0);

                        if (shouldInsertNumbers) {
                            let firstValue = indexes.length > 0 ? indexes[0] : 0;

                            // Utworzenie tablicy do wstawienia przed indexes, je≈õli obie warto≈õci nie sƒÖ zerami
                            if (firstValue !== 0) {
                                let numbersToInsert = [];
                                for (let i = 1; i < firstValue; i++) {
                                    numbersToInsert.push(i);
                                }

                                // Wstawienie numbersToInsert przed indexes
                                indexes = [...numbersToInsert, ...indexes];
                            }
                        }

// Wy≈õwietlenie zaktualizowanej tablicy indexes
                        console.log('Aktualizowane indeksy:', indexes);

                        const zeroIndex2 = index55 - 1;
                        // Wstawienie 0 na wylosowane miejsce
                        indices2[zeroIndex2] = 0;
                        console.log('hej166');
                        let indices3 = [];
                        // Inicjalizacja tablicy indices2 jako pustej tablicy
                        if (idpolski) {
                            for (let i = 1; i <= lengthDividedByThree; i++) {
                                // Dodawanie warto≈õci true do tablicy indices2 dla ka≈ºdej iteracji
                                indices3.push(true);
                            }
                            console.log('indices3:', indices3);
                        }
                        losowaniaCounter++; // Inkrementuj licznik przy ka≈ºdym wywo≈Çaniu
                        tablica33b.push(losowaniaCounter2); // Dodaj zaktualizowany licznik do tablicy
                        console.log('hej1113', tablica33b); // Wy≈õwietl zawarto≈õƒá tablicy
                        for (let i = 0; i < myVariable.length; i += 1) {
                            indexDiv++;
                            const lessonId1 = myVariable[i];
                            const newIndex = indexes[Math.floor(i)];
                            const index50 = indices2[Math.floor(i)];
                            const polski = idpolski ? indices3[i % indices3.length] : false;
                            console.log(`Iteration ${i}: polski =`, polski);

                            console.log('hej16d', myVariable[i]);
                            // Dodanie warto≈õci true dla ka≈ºdego lessonId w polski


                            // Znajd≈∫ d≈Çugo≈õci drugiej czƒô≈õci zdania dla ka≈ºdej lekcji
                            const lesson1PartLength = partLengths3.find(item => item.id === lessonId1)?.cumulativeCount || 0;

                            // Obliczanie skumulowanych d≈Çugo≈õci
                            cumulativeFirstPartLength1 += lesson1PartLength;

                            const cumulativeTotalFirstPartLength1 = cumulativeFirstPartLength1;

                            // Aktualizacja poprzedniej warto≈õci skumulowanej dla nastƒôpnej iteracji
                            previousCumulativeFirstPartLength3 = cumulativeFirstPartLength3;

                            const lessonObjectA = {
                                lessonId1: lessonId1,
                                index50: index50,
                                newIndex: newIndex,
                                lesson1PartLength: lesson1PartLength,
                                indexDiv: indexDiv,
                                polski: polski
                            };

                            // Dodawanie obiektu do tablicy lekcji
                            lessonsArrayA.push(lessonObjectA);
                            console.log('hej3334', lessonObjectA);


                            // Zwiƒôksz startIndex o 7 za ka≈ºdym razem, gdy funkcja iteruje
                            console.log('hej558', lessonsArrayA);
                            console.log('hej40', newIndex); // Wy≈õwietl warto≈õƒá startIndex
                            console.log('wykonuje siƒô 7');
                            console.log('hej323', index55);

                            console.log('hej344');
                            // Zwiƒôkszenie licznika losowa≈Ñ
                            console.log('Liczba losowa≈Ñ:', losowaniaCounter); // Dodano log licznika losowa≈Ñ

                            // Sprawdzenie, czy osiƒÖgniƒôto limit losowa≈Ñ
                            if (losowaniaCounter >= 7) {
                                console.log('OsiƒÖgniƒôto 7 losowa≈Ñ, wy≈õwietlam powiadomienie');
                                powiadomienieCounter++; // Zwiƒôkszenie licznika powiadomie≈Ñ

                                if (confirm('OsiƒÖgniƒôto 7 losowa≈Ñ. Czy chcesz kontynuowaƒá losowania?')) {
                                    console.log('U≈ºytkownik potwierdzi≈Ç dalsze losowania');
                                    losowaniaCounter = 0; // Zresetowanie licznika losowa≈Ñ
                                } else {
                                    console.log('U≈ºytkownik przerwa≈Ç dalsze losowania');
                                    break; // Przerwanie pƒôtli, je≈õli u≈ºytkownik nie chce kontynuowaƒá
                                }
                            }
                            if ((tablica15.length <= 51 || tablica15.length === 0)) {
                                console.log('wykonuje siƒô 8');

                                showCombinedSentenceForLesson2(polski, index50, matchingIndexes, lessonId1, newIndex, indexDiv, lesson1PartLength);
                                console.log('hej321', polski);
                            }
                        }
                    }
                }
                // Ustaw warto≈õƒá globalCategory
                globalCategory = category;

                // Aktualizuj atrybut href linku z u≈ºyciem JavaScript
                var link = document.getElementById('linkDoStrony');
                link.href = 'demo5.html?category=' + encodeURIComponent(globalCategory);

            }
            const urlParams = new URLSearchParams(window.location.search);
            const category = urlParams.get('category');
            const tablica10 = [];
            const tablica15 = [];
            const tablica20 = [];
            console.log('hej55', tablica10);
            console.log('hej51', tablica15);
            let sentence1bVisible = false;
            let sentence1baVisible = false;
            let sentence1b3aVisible = false;
            let buttonindex = false;
            let tablica12ab = [];
            let tablica12ad = [];
            let tablica12abc = [];
                            function showCombinedSentenceForLesson(matchingIndexes3, rodzaj, matchingIndexes2, buttonindex, index50, lessonIdToShow1, lessonIdToShow2, lessonIdToShow3, fiszki, matchingIndexes, startIndex, newIndex, indexDiv, lessonsArray, lesson1PartLength, lesson2PartLength, lesson3PartLength, lesson1Sentences, lesson2Sentences, lesson3Sentences, lesson1FirstPartLength, lesson2FirstPartLength, lesson3FirstPartLength, lesson1SecondPartLength, lesson2SecondPartLength, lesson3SecondPartLength, cumulativeFirstPartLength1, cumulativeFirstPartLength2, cumulativeFirstPartLength3, lessonsArrayZ, matchingLessons5, matchingLessons5b, isSearching) {
                console.log('hej55bb', rodzaj);
                const matchingFiszki1 = fiszki.filter(fiszka => fiszka.id[1] === lessonIdToShow1);
                const matchingFiszki2 = fiszki.filter(fiszka => fiszka.id[1] === lessonIdToShow2);
                const matchingFiszki3 = fiszki.filter(fiszka => fiszka.id[1] === lessonIdToShow3);
                console.log('hej450b', matchingFiszki1);
                console.log('hej444', newIndex);

                if (matchingFiszki1.length > 0 || matchingFiszki2.length > 0 || matchingFiszki3.length > 0) {

                    const srcWord1 = pobierzSrcWordDlaLekcji(lessonIdToShow1, fiszki);
                    const srcWord1b = pobierzSrcWordDlaLekcji3(lessonIdToShow1, fiszki);
                    const srcWord1d = pobierzSrcWordDlaLekcji4(lessonIdToShow1, fiszki);
                    const srcWord2 = pobierzSrcWordDlaLekcji(lessonIdToShow2, fiszki);
                    const srcWord2b = pobierzSrcWordDlaLekcji3(lessonIdToShow2, fiszki);
                    const srcWord2d = pobierzSrcWordDlaLekcji4(lessonIdToShow2, fiszki);
                    const srcWord3 = pobierzSrcWordDlaLekcji(lessonIdToShow3, fiszki);
                    const srcWord3b = pobierzSrcWordDlaLekcji3(lessonIdToShow3, fiszki);
                    const srcWord3d = pobierzSrcWordDlaLekcji4(lessonIdToShow3, fiszki);
                    const srcWord10 = pobierzSrcWordDlaLekcji2(lessonIdToShow1, fiszki);
                    function pobierzSrcWordDlaLekcji(lessonId, fiszki) {
                        const matchingFiszka = fiszki.find(fiszka => fiszka.id[1] === lessonId);
                        return matchingFiszka ? matchingFiszka.srcWord[0] : null;
                    }
                    function pobierzSrcWordDlaLekcji3(lessonId, fiszki) {
                        const matchingFiszka = fiszki.find(fiszka => fiszka.id[1] === lessonId);
                        return matchingFiszka ? matchingFiszka.srcWord[1] : null; // Zwracamy srcWord[1] zamiast srcWord
                    }
                    function pobierzSrcWordDlaLekcji2(lessonId, fiszki) {
                        const matchingFiszka = fiszki.find(fiszka => fiszka.id[1] === lessonId);
                        return matchingFiszka ? matchingFiszka.srcWordimage : null;
                    }
                    function pobierzSrcWordDlaLekcji4(lessonId, fiszki) {
                        const matchingFiszka = fiszki.find(fiszka => fiszka.id[1] === lessonId);
                        return matchingFiszka ? matchingFiszka.srcWordimage : null;
                    }
                    console.log(`Fiszki dla lekcji ${lessonIdToShow1}, ${lessonIdToShow2} i ${lessonIdToShow3}:`);


                    let sentence20 = ""; // Deklaracja zmiennej sentence1 na poziomie lokalnym
                    let sentence22 = "";
                    let sentence30 = ""; // Deklaracja zmiennej sentence1 na poziomie lokalnym
                    let sentence33 = "";
                    let sentence12 = " / ";
                    let sentence1b = " / ";
                    let sentence1b2 = " / ";
                    let sentence1b2a = "";
                    let sentence1b22 = "";
                    let sentence1c2a = "";
                    let sentence1c22 = "";
                    function addBackgroundToText(matchingFiszki1, matchingIndexes, currentIndexValue, aktualny, lesson1FirstPartLength, lesson1PartLength, matchingLessons5b) {
                        setTimeout(function () {
                            sentence10 = "";
                            sentence11 = "";
                            sentence20 = "";
                            sentence22 = "";
                            sentence30 = "";
                            sentence33 = "";
                            sentence1b = "";
                            sentence1b2 = "";
                            sentence1b2a = "";
                            sentence1b22 = "";
                            sentence1c2a = "";
                            sentence1c22 = "";

                            console.log('Rozpoczƒôcie funkcji addBackgroundToText');
                            console.log('matchingFiszki1:', matchingFiszki1);
                            console.log('lessonIdToShow1:', lessonIdToShow1);
                            console.log('matchingIndexes:', matchingIndexes);
                            console.log('currentIndexValue:', currentIndexValue);
                            console.log('aktualny:', aktualny);
                            for (let i = 0; i < matchingFiszki1.length; i++) {
                                const fiszka = matchingFiszki1[i];
                                console.log('fiszka:', fiszka);
                                if (!fiszka.sentence1 || fiszka.sentence1.length === 0) {
                                    console.log('fiszka.sentence1 is undefined or empty');
                                    continue; // Je≈õli sentence1 nie istnieje lub jest puste, przejd≈∫ do nastƒôpnej fiszki
                                }

                                // Iteracja przez elementy sentence1
                                for (let ki = 0; ki < fiszka.sentence1.length; ki++) {
                                    let sentencePart = fiszka.sentence1[ki];
                                    console.log('sentencePart5:', sentencePart);
                                    const indexToCheck = i + lesson1PartLength + 1;
                                    console.log('indexToCheck5:', indexToCheck);
                                    if (aktualny) {
                                        if (matchingIndexes.includes(indexToCheck) && currentIndexValue == 0) {
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart;
                                            spanElement.classList.add('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart = spanElement.outerHTML;
                                        } else if (matchingIndexes.includes(indexToCheck) && currentIndexValue == 0) {
                                            // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart;
                                        } else if (currentIndexValue == 0) {

                                            if (sentence1b === "") {
                                                let sentencePart333 = fiszka.translateb ? fiszka.translateb : "";
                                                sentence1b += sentencePart333 + " ";
                                            }

                                            if (sentence1b2 === "") {
                                                let sentencePart333 = fiszka.translate ? fiszka.translate : "";
                                                sentence1b2 += sentencePart333 + " ";
                                            }
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart;
                                            spanElement.classList.add('highlighted-sentence');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart = spanElement.outerHTML;
                                        } else if (currentIndexValue == 1 && matchingIndexes.includes(indexToCheck)) {
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart;
                                            spanElement.classList.remove('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart = spanElement.outerHTML;
                                        }
                                    }

                                    console.log('sentencePart po przetworzeniu:', sentencePart); // Dodaj log po przetworzeniu
                                    sentence10 += sentencePart + " ";
                                }
                            }
                            console.log('final sentence10:', sentence10); // Dodaj log dla ostatecznego wyniku


                            for (let ii = 0; ii < matchingFiszki1.length; ii++) {
                                const fiszka = matchingFiszki1[ii];
                                console.log('fiszka2:', fiszka);
                                if (!fiszka.sentence2 || fiszka.sentence2.length === 0) {
                                    console.log('fiszka.sentence2 is undefined or empty');
                                    continue;
                                }

                                // Iteracja przez elementy sentence1
                                for (let kii = 0; kii < fiszka.sentence2.length; kii++) {
                                    let sentencePart2 = fiszka.sentence2[kii];
                                    console.log('sentencePart5:', sentencePart2);
                                    const indexToCheck = ii + lesson1PartLength + 1;
                                    console.log('indexToCheck77:', indexToCheck);
                                    if (aktualny) {
                                        if (matchingIndexes.includes(indexToCheck) && currentIndexValue == 0) {
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart2;
                                            spanElement.classList.remove('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart2 = spanElement.outerHTML;
                                        } else if (matchingIndexes.includes(indexToCheck) && currentIndexValue == 0) {
                                            // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart2;
                                        } else if (currentIndexValue == 0) {
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart2;
                                            spanElement.classList.add('highlighted-sentence');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart2 = spanElement.outerHTML;
                                        } else if (currentIndexValue == 1 && matchingIndexes.includes(indexToCheck)) {
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart2;
                                            spanElement.classList.remove('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart2 = spanElement.outerHTML;
                                        }
                                    }

                                    console.log('sentencePart2 po przetworzeniu:', sentencePart2);
                                    sentence11 += sentencePart2 + " ";
                                }
                            }
                            // Iteracja przez matchingFiszki2 dla sentence1
                            for (let j = 0; j < matchingFiszki2.length; j++) {
                                const fiszka = matchingFiszki2[j];
                                console.log('fiszka:', fiszka);
                                if (!fiszka.sentence1 || fiszka.sentence1.length === 0) {
                                    console.log('fiszka.sentence1 is undefined or empty');
                                    continue; // Je≈õli sentence1 nie istnieje lub jest puste, przejd≈∫ do nastƒôpnej fiszki
                                }

                                // Iteracja przez elementy sentence1
                                for (let k = 0; k < fiszka.sentence1.length; k++) {
                                    let sentencePart = fiszka.sentence1[k];
                                    console.log('sentencePart5:', sentencePart);
                                    const indexToCheck = j + lesson2PartLength + 1;
                                    console.log('indexToCheck5:', indexToCheck);
                                    if (aktualny) {
                                        if (matchingIndexes.includes(indexToCheck) && currentIndexValue == 0) {
                                            spanElement.textContent = sentencePart2;
                                            spanElement.classList.remove('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart2 = spanElement.outerHTML;
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart;
                                            spanElement.classList.remove('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart = spanElement.outerHTML;
                                        } else if (matchingIndexes.includes(indexToCheck) && currentIndexValue == 1) {
                                            // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart;
                                        } else if (currentIndexValue == 1) {

                                            if (sentence1b2a === "") {
                                                let sentencePart333 = fiszka.translateb ? fiszka.translateb : "";
                                                sentence1b2a += sentencePart333 + " ";
                                            }
                                            if (sentence1b22 === "") {
                                                let sentencePart444 = fiszka.translate ? fiszka.translate : "";
                                                sentence1b22 += sentencePart444 + " ";
                                            }
                                            $('.sentence1b').html('');
                                            $('.sentence1b2').html('');
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart;
                                            spanElement.classList.add('highlighted-sentence');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart = spanElement.outerHTML;
                                        } else if (currentIndexValue == 2 && matchingIndexes.includes(indexToCheck)) {
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart;
                                            spanElement.classList.remove('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart = spanElement.outerHTML;
                                        }
                                    }

                                    sentence20 += sentencePart + " ";
                                }
                            }

                            // Iteracja przez matchingFiszki2 dla sentence2
                            for (let jj = 0; jj < matchingFiszki2.length; jj++) {
                                const fiszka = matchingFiszki2[jj];
                                console.log('fiszka2:', fiszka);
                                if (!fiszka.sentence2 || fiszka.sentence2.length === 0) {
                                    console.log('fiszka.sentence2 is undefined or empty');
                                    continue;
                                }

                                // Iteracja przez elementy sentence2
                                for (let kk = 0; kk < fiszka.sentence2.length; kk++) {
                                    let sentencePart2 = fiszka.sentence2[kk];
                                    console.log('sentencePart2 przed przetworzeniem:', sentencePart2);
                                    const indexToCheck = jj + lesson2PartLength + 1;
                                    console.log('indexToCheck3:', indexToCheck);
                                    if (aktualny) {
                                        if (matchingIndexes.includes(indexToCheck) && currentIndexValue == 0) {
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart2;
                                            spanElement.classList.remove('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart2 = spanElement.outerHTML;
                                        } else if (matchingIndexes.includes(indexToCheck) && currentIndexValue == 1) {
                                            // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart2;
                                            if (!spanElement.classList.contains('yellow')) {
                                                spanElement.classList.add('yellow');
                                                spanElement.classList.add('highlighted-sentence');
                                            }
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart2 = spanElement.outerHTML;
                                        } else if (currentIndexValue == 1) {
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart2;
                                            spanElement.classList.add('highlighted-sentence');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart2 = spanElement.outerHTML;
                                        } else if (currentIndexValue == 2 && matchingIndexes.includes(indexToCheck)) {
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart2;
                                            spanElement.classList.remove('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart2 = spanElement.outerHTML;
                                        }
                                    }

                                    sentence22 += sentencePart2 + " ";
                                }
                            }

                            for (let l = 0; l < matchingFiszki3.length; l++) {
                                const fiszka = matchingFiszki3[l];
                                console.log('fiszka:', fiszka);
                                if (!fiszka.sentence1 || fiszka.sentence1.length === 0) {
                                    console.log('fiszka.sentence1 is undefined or empty');
                                    continue; // Je≈õli sentence1 nie istnieje lub jest puste, przejd≈∫ do nastƒôpnej fiszki
                                }
                                // Iteracja przez elementy sentence1
                                for (let lm = 0; lm < fiszka.sentence1.length; lm++) {
                                    let sentencePart = fiszka.sentence1[lm];
                                    console.log('sentencePart5:', sentencePart);
                                    const indexToCheck = l + lesson3PartLength + 1;
                                    console.log('indexToCheck55:', indexToCheck);
                                    if (aktualny) {
                                        if (matchingIndexes.includes(indexToCheck) && currentIndexValue == 1) {
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart;
                                            spanElement.classList.remove('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart = spanElement.outerHTML;
                                        } else if (matchingIndexes.includes(indexToCheck) && currentIndexValue == 2) {
                                            // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart;
                                            if (!spanElement.classList.contains('yellow')) {
                                                spanElement.classList.add('yellow');
                                                spanElement.classList.add('highlighted-sentence');
                                            }
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart = spanElement.outerHTML;
                                        } else if (currentIndexValue == 2) {
                                            if (sentence1c2a === "") {
                                                let sentencePart333 = fiszka.translateb ? fiszka.translateb : "";
                                                sentence1c2a += sentencePart333 + " ";
                                            }
                                            if (sentence1c22 === "") {
                                                let sentencePart444 = fiszka.translate ? fiszka.translate : "";
                                                sentence1c22 += sentencePart444 + " ";
                                            }
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart;
                                            spanElement.classList.add('highlighted-sentence');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart = spanElement.outerHTML;
                                        } else if (currentIndexValue == 0 && matchingIndexes.includes(indexToCheck)) {
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart;
                                            spanElement.classList.remove('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart = spanElement.outerHTML;
                                        }
                                    }

                                    sentence30 += sentencePart + " ";
                                }
                            }
                            // Iteracja przez matchingFiszki2 dla sentence2
                            for (let lmm = 0; lmm < matchingFiszki3.length; lmm++) {
                                const fiszka = matchingFiszki3[lmm];
                                console.log('fiszka2:', fiszka);
                                if (!fiszka.sentence2 || fiszka.sentence2.length === 0) {
                                    console.log('fiszka.sentence2 is undefined or empty');
                                    continue;
                                }

                                // Iteracja przez elementy sentence2
                                for (let lmn = 0; lmn < fiszka.sentence2.length; lmn++) {
                                    let sentencePart2 = fiszka.sentence2[lmn];
                                    console.log('sentencePart2 przed przetworzeniem:', sentencePart2);
                                    const indexToCheck = lmm + lesson3PartLength + 1;
                                    console.log('indexToCheck3:', indexToCheck);
                                    if (aktualny) {
                                        if (matchingIndexes.includes(indexToCheck) && currentIndexValue == 1) {
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart2;
                                            spanElement.classList.remove('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart2 = spanElement.outerHTML;
                                        } else if (matchingIndexes.includes(indexToCheck) && currentIndexValue == 2) {
                                            // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart2;
                                            if (!spanElement.classList.contains('yellow')) {
                                                spanElement.classList.add('yellow');
                                                spanElement.classList.add('highlighted-sentence');
                                            }
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart2 = spanElement.outerHTML;
                                        } else if (currentIndexValue == 2) {
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart2;
                                            spanElement.classList.add('highlighted-sentence');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart2 = spanElement.outerHTML;
                                        } else if (currentIndexValue == 0 && matchingIndexes.includes(indexToCheck)) {
                                            const spanElement = document.createElement('span');
                                            spanElement.textContent = sentencePart2;
                                            spanElement.classList.remove('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                            sentencePart2 = spanElement.outerHTML;
                                        }
                                    }

                                    sentence33 += sentencePart2 + " ";
                                }
                            }

                            // Dodanie tre≈õci do diva wraz z przyciskiem
                            $sentenceDivB.html(`
${sentence10}${sentence11}<br>
<div class="sentence1b">${sentence1b}</div>
        <div class="sentence1b2">${sentence1b2}</div>
${sentence20}${sentence22}<br>
<div class="sentence1b2a">${sentence1b2a}</div>
<div class="sentence1b22">${sentence1b22}</div>
${sentence30}${sentence33}<br>
<div class="sentence1c2a">${sentence1c2a}</div>
<div class="sentence1c22">${sentence1c22}</div>
`);

                        }, 0);

                    }
                    // Zmienna do liczenia wystƒÖpie≈Ñ indexToCheck
                                        let sentence10 = ""; // Deklaracja zmiennej sentence1 na poziomie lokalnym
                    let sentence11 = "";
                    let sentence1bba = "";
                    let sentence1bbab = "";
                    function addBackgroundToText1b(matchingFiszki1, matchingIndexes, aktualny, lesson1PartLength, matchingIndexes2, rodzaj, matchingIndexes3, matchingLessons5b) {
                        $(document).ready(function () {

                            console.log('hejkh', lesson1PartLength);
                            sentence1bba = "";
                            sentence1bbab = "";
                            setTimeout(() => {
                                for (let i = 0; i < matchingFiszki1.length; i++) {
                                    const fiszka = matchingFiszki1[i];
                                    console.log('fiszka:', fiszka);
                                    if (!fiszka.sentence1 || fiszka.sentence1.length === 0) {
                                        console.log('fiszka.sentence2 is undefined or empty');
                                        continue;
                                    }

                                    // Iteracja przez elementy sentence1
                                    for (let ki = 0; ki < fiszka.sentence1.length; ki++) {
                                        let sentencePart = fiszka.sentence1[ki];
                                        console.log('matchingIndexes1000:', matchingLessons5b);
                                        const indexToCheck = i + lesson1PartLength + 1;
                                        const indexToCheck2 = i + lesson1PartLength + 1;
                                            if (matchingIndexes.includes(indexToCheck) && matchingLessons5b === null) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart = spanElement.outerHTML;
                                            }
                                            if (matchingLessons5b.includes(indexToCheck2) && matchingLessons5b !== null) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart = spanElement.outerHTML;
                                            }
                                        
                                        function countCategoryInFiszki(matchingFiszki1, category) {
                                            // Zmienna do przechowywania sumy wystƒÖpie≈Ñ
                                            let totalCount = 0;

                                            // Iteracja przez wszystkie fiszki
                                            for (let i = 0; i < matchingFiszki1.length; i++) {
                                                const fiszka = matchingFiszki1[i];

                                                // Zlicz wystƒÖpienia kategorii w category3
                                                if (fiszka.category3 && Array.isArray(fiszka.category3)) {
                                                    const count = fiszka.category3.filter(cat => cat === category).length;
                                                    totalCount += count; // Dodaj do sumy
                                                }
                                            }

                                            return [totalCount]; // Zwr√≥ƒá tablicƒô z jednƒÖ sumarycznƒÖ warto≈õciƒÖ
                                        }

// U≈ºycie funkcji
                                        const categoryToCount = "PresentSimplePodmiot";
                                        const categoryToCount2 = "PresentSimpleCzasownik";
                                        const occurrences = countCategoryInFiszki(matchingFiszki1, categoryToCount);
                                        const occurrences2 = countCategoryInFiszki(matchingFiszki1, categoryToCount2);
// Wypisywanie wynik√≥w
                                        console.log('Suma wystƒÖpie≈Ñ:', occurrences2);
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Flaga sprawdzajƒÖca, czy podmiot zosta≈Ç ju≈º dodany

                                        if (aktualny && rodzaj === "play" && matchingIndexes2.includes(indexToCheck2)) {
                                            console.log('hej123', occurrences);
                                            // Sprawd≈∫, czy to jest pierwsze s≈Çowo
                                            if (i === 0 && occurrences[0] === 2) {
                                                console.log('Pod≈õwietlono pierwsze s≈Çowo:', fiszka.sentence1[ki]);
                                                const firstWordElement = document.createElement('span');
                                                firstWordElement.textContent = sentencePart;
                                                firstWordElement.classList.add('green'); // Dodaj klasƒô, kt√≥ra pod≈õwietla s≈Çowo na zielono
                                                sentencePart = firstWordElement.outerHTML; // Zamie≈Ñ pierwsze s≈Çowo na jego wersjƒô z "span"
                                            }
                                            // Dodaj podmiot po drugim s≈Çowie, je≈õli occurrences wynosi 2
                                            if (i === 1 && occurrences[0] === 2) {
                                                console.log('Dodano "podmiot" po drugim s≈Çowie:', fiszka.sentence1[ki]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('green');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(podmiot)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(2, 0, podmiotElement.outerHTML); // Dodaj podmiot po drugim s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            } else if (i === 0 && occurrences[0] === 1) {
                                                console.log('Dodano "podmiot" po pierwszym s≈Çowie:', fiszka.sentence1[ki]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('green');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(podmiot)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(3, 0, podmiotElement.outerHTML); // Dodaj podmiot po pierwszym s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            }
                                        }
                                        if (aktualny && rodzaj === "play" && matchingIndexes3.includes(indexToCheck2)) {
                                            console.log('hej123', occurrences);
                                            // Sprawd≈∫, czy to jest pierwsze s≈Çowo
                                            // Dodaj podmiot po drugim s≈Çowie, je≈õli occurrences wynosi 2

                                            if (i === 2 && occurrences2[0] === 2) {
                                                console.log('Dodano "podmiot" po drugim s≈Çowie:', fiszka.sentence1[ki]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('blue');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(2, 1, podmiotElement.outerHTML); // Dodaj podmiot po drugim s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            } else if (i === 2 && occurrences2[0] === 1) {
                                                console.log('Dodano "podmiot" po drugim s≈Çowie:', fiszka.sentence1[ki]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('blue');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(3, 0, podmiotElement.outerHTML); // Dodaj podmiot po drugim s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            } else if (i === 1 && occurrences2[0] === 1) {
                                                console.log('Dodano "podmiot" po pierwszym s≈Çowie:', fiszka.sentence1[ki]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('blue');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(3, 0, podmiotElement.outerHTML); // Dodaj podmiot po pierwszym s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            }
                                        }
                                        // Dodaj sentencePart do sentence10
                                        sentence10 += sentencePart + " ";

                                    }

                                }
                                for (let ii = 0; ii < matchingFiszki1.length; ii++) {
                                    const fiszka = matchingFiszki1[ii];
                                    console.log('fiszka2:', fiszka);
                                    if (!fiszka.sentence2 || fiszka.sentence2.length === 0) {
                                        console.log('fiszka.sentence2 is undefined or empty');
                                        continue;
                                    }

                                    // Iteracja przez elementy sentence1
                                    for (let kii = 0; kii < fiszka.sentence2.length; kii++) {
                                        let sentencePart2 = fiszka.sentence2[kii];
                                        console.log('sentencePart5:', ii);
                                        const indexToCheck = ii + lesson1PartLength + 1;
                                        const indexToCheck2 = ii + lesson1PartLength + 1;
                                        console.log('indexToCheck77:', indexToCheck);
                                        if (aktualny) {
                                            if (matchingIndexes.includes(indexToCheck)) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart2;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart2 = spanElement.outerHTML;
                                            }
                                        }
                                        
                                        function countCategoryInFiszki1b(matchingFiszki1, category) {
                                            // Zmienna do przechowywania sumy wystƒÖpie≈Ñ
                                            let totalCount = 0;

                                            // Iteracja przez wszystkie fiszki
                                            for (let ii = 0; ii < matchingFiszki1.length; ii++) {
                                                const fiszka = matchingFiszki1[ii];

                                                // Zlicz wystƒÖpienia kategorii w category3
                                                if (fiszka.category3 && Array.isArray(fiszka.category3)) {
                                                    const count = fiszka.category3.filter(cat => cat === category).length;
                                                    totalCount += count; // Dodaj do sumy
                                                }
                                            }

                                            return [totalCount]; // Zwr√≥ƒá tablicƒô z jednƒÖ sumarycznƒÖ warto≈õciƒÖ
                                        }
                                        const categoryToCount2 = "PresentSimpleCzasownik";
                                        const occurrences2 = countCategoryInFiszki1b(matchingFiszki1, categoryToCount2);
// Wypisywanie wynik√≥w
                                        console.log('Suma wystƒÖpie≈Ñ5:', occurrences2);
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Flaga sprawdzajƒÖca, czy podmiot zosta≈Ç ju≈º dodany

                                        if (aktualny && rodzaj === "play" && matchingIndexes3.includes(indexToCheck)) {
                                            // Sprawd≈∫, czy to jest pierwsze s≈Çowo
                                            // Dodaj podmiot po drugim s≈Çowie, je≈õli occurrences wynosi 2

                                            if (ii === 6 && occurrences2[0] === 1) {
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart2;
                                                podmiotElement.classList.add('blue');
                                                sentencePart2 = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart2.split(' ');
                                                words.splice(2, 0, podmiotElement.outerHTML); // Dodaj podmiot po pierwszym s≈Çowie
                                                sentencePart2 = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            }
                                        }
                                        // Dodaj sentencePart do sentence10
                                        sentence11 += sentencePart2 + " ";

                                    }
                                }

                                for (let li = 0; li < matchingFiszki1.length; li++) {
                                    const fiszka = matchingFiszki1[li];
                                    console.log('fiszka:', fiszka);
                                    let sentencePart3 = fiszka.translateb;
                                    console.log('sentencePart3:', sentencePart3);
                                    if (aktualny) {
                                        // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                        const spanElement = document.createElement('span');
                                        spanElement.textContent = sentencePart3;
                                        sentencePart3 = spanElement.outerHTML;

                                    }
                                    sentence1bba += sentencePart3 + " ";
                                }
                                for (let li = 0; li < matchingFiszki1.length; li++) {
                                    const fiszka = matchingFiszki1[li];
                                    console.log('fiszka:', fiszka);
                                    let sentencePart3 = fiszka.translate;
                                    console.log('sentencePart3:', sentencePart3);
                                    if (aktualny) {
                                        // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                        const spanElement = document.createElement('span');
                                        spanElement.textContent = sentencePart3;
                                        sentencePart3 = spanElement.outerHTML;

                                    }
                                    sentence1bbab += sentencePart3 + " ";
                                }

                                console.log('hej20', sentence1bba);
                                $sentenceDiv.html(`
<button class="left-button first-button">+<br></button>
${sentence10}${sentence11}<br>
<div class="sentence1bba">${sentence1bba}</div>
<div class="sentence1bba">${sentence1bbab}</div>
<button class="left-buttonb second-button">+<br></button>
${sentence20}${sentence22}<br>
<div class="sentence1bb1b">${sentence1bb1b}</div>
<div class="sentence1bba2">${sentence1bba2}</div>
<button class="left-buttonbb third-button">+<br></button>
${sentence30}${sentence33}<br>
        <div class="sentence1bb3">${sentence1bb3}</div>
        <div class="sentence1bb1c">${sentence1bb1c}</div>
`);
                                $('.sentence1bba').html('');
                                $sentenceDiv.on('click', '.left-button', function () {

                                    // Dodawanie zdania tylko je≈õli sentence1bb2 jest puste
                                    if (sentence1bba === "") {
                                        let sentencePart3 = fiszka.translateb ? fiszka.translateb : "";
                                        sentence1bba += sentencePart3 + " ";
                                    }
                                    if (sentence1bbab === "") {
                                        let sentencePart33 = fiszka.translate ? fiszka.translate : "";
                                        sentence1bbab += sentencePart33 + " ";
                                    }
                                    console.log('hej20', sentence1bba);

                                    // Dodanie tre≈õci do diva wraz z przyciskiem
                                    $sentenceDiv.html(`
<button class="left-button first-button">+<br></button>
${sentence10}${sentence11}<br>
<div class="sentence1bba">${sentence1bba}</div>
        <div class="sentence1bba">${sentence1bbab}</div>
<button class="left-buttonb second-button">+<br></button>
${sentence20}${sentence22}<br>
<div class="sentence1bb1b">${sentence1bb1b}</div>
<div class="sentence1bba2">${sentence1bba2}</div>
<button class="left-buttonbb third-button">+<br></button>
${sentence30}${sentence33}<br>
        <div class="sentence1bb3">${sentence1bb3}</div>
        <div class="sentence1bb1c">${sentence1bb1c}</div>
`);
                                    // Ustawienie stylu dla przycisk√≥w .left-button
                                    $('.sentence1bb1b').html('');
                                    $('.sentence1bba2').html('');
                                    $('.left-button').css('position', 'relative');
                                    $('.left-buttonb').css('position', 'relative');
                                    $('.left-buttonbb').css('position', 'relative');
                                    let sentencePart1 = fiszka.translate ? fiszka.translate : ""; // Sprawd≈∫, czy translate istnieje
                                    let sentencePart3 = fiszka.translateb ? fiszka.translateb : ""; // Sprawd≈∫, czy translate istnieje
                                    console.log('Klikniƒôto przycisk');
                                    if ($sentence1bba.css('display') === 'none' || sentence1bVisible) {
                                        $sentence1bba.css('display', 'block');
                                        $sentence1bba.css({
                                            'margin-bottom': '-20px',
                                            'top': '0px',
                                            'position': 'relative'
                                        });
                                    }
                                    if ($sentence1bbab.css('display') === 'none' || sentence1bVisible) {
                                        $sentence1bbab.css('display', 'block');
                                        $sentence1bbab.css({
                                            'margin-bottom': '-20px',
                                            'top': '0px',
                                            'position': 'relative'
                                        });
                                    }
                                    // Dodanie stylizacji na hover

                                    $sentence1bb1b.html('');
                                    $sentence1bb1b.empty();
                                });
                                $sentence1bb1b.html('');
                                $sentence1bb1b.empty();
                            }, 0);
                        });
                        console.log('Zawarto≈õƒá zmiennej sentence1:', sentence1b); // Wy≈õwietlenie zawarto≈õci zmiennej sentence1                          
                    }


                    let sentence1bb1b = "";
                    let sentence1bba2 = "";
                    function addBackgroundToText2b(matchingFiszki2, matchingIndexes, aktualny, lesson2PartLength, matchingIndexes2, rodzaj, matchingIndexes3, matchingLessons5b) {

                        $(document).ready(function () {
                            setTimeout(() => {
                                sentence1bb1b = "";
                                sentence1bba2 = "";
                                // Iteracja przez matchingFiszki2 dla sentence1
                                for (let j = 0; j < matchingFiszki2.length; j++) {
                                    const fiszka = matchingFiszki2[j];
                                    console.log('fiszka:', fiszka);
                                    if (!fiszka.sentence1 || fiszka.sentence1.length === 0) {
                                        console.log('fiszka.sentence1 is undefined or empty');
                                        continue; // Je≈õli sentence1 nie istnieje lub jest puste, przejd≈∫ do nastƒôpnej fiszki
                                    }

                                    // Iteracja przez elementy sentence1
                                    for (let k = 0; k < fiszka.sentence1.length; k++) {
                                        let sentencePart = fiszka.sentence1[k];
                                        console.log('sentencePart5:', sentencePart);
                                        const indexToCheck = j + lesson2PartLength + 1;
                                        const indexToCheck2 = j + lesson2PartLength + 1;
                                        console.log('indexToCheck5:', indexToCheck);
                                        console.log('hej31', sentencePart);
                                        // Sprawd≈∫, czy indeks jest r√≥wny 0
                                        if (aktualny) {
                                            if (matchingIndexes.includes(indexToCheck) && matchingLessons5b === null) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart = spanElement.outerHTML;
                                            }
                                        }
                                        if (matchingLessons5b.includes(indexToCheck2) && matchingLessons5b !== null) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart = spanElement.outerHTML;
                                            }
                                        function countCategoryInFiszki2(matchingFiszki2, category) {
                                            // Zmienna do przechowywania sumy wystƒÖpie≈Ñ
                                            let totalCount = 0;

                                            // Iteracja przez wszystkie fiszki
                                            for (let j = 0; j < matchingFiszki2.length; j++) {
                                                const fiszka = matchingFiszki2[j];

                                                // Zlicz wystƒÖpienia kategorii w category3
                                                if (fiszka.category3 && Array.isArray(fiszka.category3)) {
                                                    const count = fiszka.category3.filter(cat => cat === category).length;
                                                    totalCount += count; // Dodaj do sumy
                                                }
                                            }

                                            return [totalCount]; // Zwr√≥ƒá tablicƒô z jednƒÖ sumarycznƒÖ warto≈õciƒÖ
                                        }

// U≈ºycie funkcji
                                        const categoryToCount = "PresentSimplePodmiot";
                                        const categoryToCount2 = "PresentSimpleCzasownik";
                                        const occurrences = countCategoryInFiszki2(matchingFiszki2, categoryToCount);
                                        const occurrences2 = countCategoryInFiszki2(matchingFiszki2, categoryToCount2);
// Wypisywanie wynik√≥w
                                        console.log('Suma wystƒÖpie≈Ñ:', occurrences2);
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Flaga sprawdzajƒÖca, czy podmiot zosta≈Ç ju≈º dodany

                                        if (aktualny && rodzaj === "play" && matchingIndexes2.includes(indexToCheck2)) {
                                            console.log('hej123', occurrences);
                                            // Sprawd≈∫, czy to jest pierwsze s≈Çowo
                                            if (j === 0 && occurrences[0] === 2) {
                                                console.log('Pod≈õwietlono pierwsze s≈Çowo:', fiszka.sentence1[j]);
                                                const firstWordElement = document.createElement('span');
                                                firstWordElement.textContent = sentencePart;
                                                firstWordElement.classList.add('green'); // Dodaj klasƒô, kt√≥ra pod≈õwietla s≈Çowo na zielono
                                                sentencePart = firstWordElement.outerHTML; // Zamie≈Ñ pierwsze s≈Çowo na jego wersjƒô z "span"
                                            }
                                            // Dodaj podmiot po drugim s≈Çowie, je≈õli occurrences wynosi 2
                                            if (j === 1 && occurrences[0] === 2) {
                                                console.log('Dodano "podmiot" po drugim s≈Çowie:', fiszka.sentence1[j]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('green');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(podmiot)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(2, 0, podmiotElement.outerHTML); // Dodaj podmiot po drugim s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            } else if (j === 0 && occurrences[0] === 1) {
                                                console.log('Dodano "podmiot" po pierwszym s≈Çowie:', fiszka.sentence1[j]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('green');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(podmiot)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(3, 0, podmiotElement.outerHTML); // Dodaj podmiot po pierwszym s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            }
                                        }
                                        if (aktualny && rodzaj === "play" && matchingIndexes3.includes(indexToCheck2)) {
                                            console.log('hej123', occurrences);
                                            // Sprawd≈∫, czy to jest pierwsze s≈Çowo
                                            // Dodaj podmiot po drugim s≈Çowie, je≈õli occurrences wynosi 2

                                            if (j === 2 && occurrences2[0] === 2) {
                                                console.log('Dodano "podmiot" po drugim s≈Çowie:', fiszka.sentence1[j]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('blue');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(2, 1, podmiotElement.outerHTML); // Dodaj podmiot po drugim s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            } else if (j === 2 && occurrences2[0] === 1) {
                                                console.log('Dodano "podmiot" po drugim s≈Çowie:', fiszka.sentence1[j]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('blue');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(3, 0, podmiotElement.outerHTML); // Dodaj podmiot po drugim s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            } else if (j === 1 && occurrences2[0] === 1) {
                                                console.log('Dodano "podmiot" po pierwszym s≈Çowie:', fiszka.sentence1[j]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('blue');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(3, 0, podmiotElement.outerHTML); // Dodaj podmiot po pierwszym s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            }
                                        }
                                        // Dodaj sentencePart do sentence10
                                        sentence20 += sentencePart + " ";

                                    }

                                }
                                // Iteracja przez matchingFiszki2 dla sentence2
                                for (let jj = 0; jj < matchingFiszki2.length; jj++) {
                                    const fiszka = matchingFiszki2[jj];
                                    console.log('fiszka2:', fiszka);
                                    if (!fiszka.sentence2 || fiszka.sentence2.length === 0) {
                                        console.log('fiszka.sentence2 is undefined or empty');
                                        continue;
                                    }

                                    // Iteracja przez elementy sentence2
                                    for (let kk = 0; kk < fiszka.sentence2.length; kk++) {
                                        let sentencePart2 = fiszka.sentence2[kk];
                                        console.log('sentencePart2 przed przetworzeniem:', sentencePart2);
                                        const indexToCheck = jj + lesson2PartLength + 1;
                                        const indexToCheck2 = jj + lesson2PartLength + 1;
                                        console.log('indexToCheck3:', indexToCheck);
                                        if (aktualny) {
                                            if (matchingIndexes.includes(indexToCheck)) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart2;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart2 = spanElement.outerHTML;
                                            }
                                        }
                                        if (matchingLessons5b.includes(indexToCheck2) && matchingLessons5b !== null) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart2;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart2 = spanElement.outerHTML;
                                            }
                                        sentence22 += sentencePart2 + " ";
                                    }
                                }
                                for (let li = 0; li < matchingFiszki2.length; li++) {
                                    const fiszka = matchingFiszki2[li];
                                    console.log('fiszka:', fiszka);
                                    let sentencePart33 = fiszka.translateb;
                                    console.log('sentencePart3:', sentencePart33);
                                    if (aktualny) {
                                        // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                        const spanElement = document.createElement('span');
                                        spanElement.textContent = sentencePart33;
                                        sentencePart33 = spanElement.outerHTML;

                                    }
                                    sentence1bb1b += sentencePart33 + " ";
                                }
                                for (let li = 0; li < matchingFiszki2.length; li++) {
                                    const fiszka = matchingFiszki2[li];
                                    console.log('fiszka:', fiszka);
                                    let sentencePart333 = fiszka.translate;
                                    console.log('sentencePart3:', sentencePart333);
                                    if (aktualny) {
                                        // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                        const spanElement = document.createElement('span');
                                        spanElement.textContent = sentencePart333;
                                        sentencePart333 = spanElement.outerHTML;

                                    }
                                    sentence1bba2 += sentencePart333 + " ";
                                }

                                console.log('hej20', sentence1bb1b);
                                $sentenceDiv.html(`
<button class="left-button first-button">+<br></button>
${sentence10}${sentence11}<br>
<div class="sentence1bba">${sentence1bba}</div>
<div class="sentence1bba">${sentence1bbab}</div>
<button class="left-buttonb second-button">+<br></button>
${sentence20}${sentence22}<br>
<div class="sentence1bb1b">${sentence1bb1b}</div>
<div class="sentence1bba2">${sentence1bba2}</div>
<button class="left-buttonbb third-button">+<br></button>
${sentence30}${sentence33}<br>
        <div class="sentence1bb3">${sentence1bb3}</div>
        <div class="sentence1bb1c">${sentence1bb1c}</div>
`);
                                $('.sentence1bb1b').html('');
                                $('.sentence1bba2').html('');
                                $sentenceDiv.on('click', '.left-buttonb', function () {
                                    $('.sentence1bba').html('');
                                    // Dodawanie zdania tylko je≈õli sentence1bb2 jest puste
                                    if (sentence1bb1b === "") {
                                        let sentencePart33 = fiszka.translateb ? fiszka.translateb : "";
                                        sentence1bb1b += sentencePart33 + " ";
                                    }
                                    console.log('hej56', sentence1bb1b);
                                    if (sentence1bba2 === "") {
                                        let sentencePart33 = fiszka.translate ? fiszka.translate : "";
                                        sentence1bba2 += sentencePart33 + " ";
                                    }
                                    // Dodanie tre≈õci do diva wraz z przyciskiem
                                    $sentenceDiv.html(`
<button class="left-button first-button">+<br></button>
${sentence10}${sentence11}<br>
<div class="sentence1bba">${sentence1bba}</div>
<div class="sentence1bba">${sentence1bbab}</div>
<button class="left-buttonb second-button">+<br></button>
${sentence20}${sentence22}<br>
<div class="sentence1bb1b">${sentence1bb1b}</div>
<div class="sentence1bba2">${sentence1bba2}</div>
<button class="left-buttonbb third-button">+<br></button>
${sentence30}${sentence33}<br>
        <div class="sentence1bb3">${sentence1bb3}</div>
        <div class="sentence1bb1c">${sentence1bb1c}</div>
`);
                                    $('.sentence1bba').html('');
                                    // Ustawienie stylu dla przycisk√≥w .left-button
                                    $('.left-button').css('position', 'relative');
                                    $('.left-buttonb').css('position', 'relative');
                                    $('.left-buttonbb').css('position', 'relative');
                                    let sentencePart33 = fiszka.translateb ? fiszka.translateb : ""; // Sprawd≈∫, czy translate istnieje
                                    // Obs≈Çuga klikniƒôcia przycisku
                                    console.log('Klikniƒôto przycisk');
                                    let $sentence1bb1b = $sentenceDiv.find('.sentence1bb1b');
                                    if ($sentence1bb1b.css('display') === 'none') {
                                        sentence1bVisible = false;
                                        sentence1baVisible = true;
                                        // Pokazujemy zdanie .sentence1b
                                        $sentence1bb1b.css('display', 'block');
                                        $sentence1bb1b.css({
                                            'margin-top': '-25px',
                                            'top': '24px',
                                            'position': 'relative'
                                        });
                                    }
                                    if ($sentence1bba2.css('display') === 'none') {
                                        // Pokazujemy zdanie .sentence1b
                                        $sentence1bba2.css('display', 'block');
                                        $sentence1bba2.css({
                                            'margin-top': '0px',
                                            'top': '23px',
                                            'position': 'relative'
                                        });
                                    }

                                    $sentence1bb1a.html('');
                                    $sentence1bb1a.empty();
                                });
                                $sentence1bb1a.html('');
                                $sentence1bb1a.empty();
                            }, 0);
                        });
                    }







                    let sentence1bb3 = "";
                    let sentence1bb1c = "";

                    function addBackgroundToText3b(matchingFiszki3, matchingIndexes, aktualny, lesson3PartLength, matchingIndexes2, rodzaj, matchingIndexes3, matchingLessons5b) {
                        $(document).ready(function () {
setTimeout(() => {
                            sentence1bb3 = "";
                            sentence1bb1c = "";

                            for (let l = 0; l < matchingFiszki3.length; l++) {
                                const fiszka = matchingFiszki3[l];
                                console.log('fiszka:', fiszka);
                                if (!fiszka.sentence1 || fiszka.sentence1.length === 0) {
                                    console.log('fiszka.sentence1 is undefined or empty');
                                    continue;
                                }
                                for (let lm = 0; lm < fiszka.sentence1.length; lm++) {
                                    let sentencePart = fiszka.sentence1[lm];
                                        console.log('sentencePart5:', sentencePart);
                                        const indexToCheck = l + lesson3PartLength + 1;
                                        const indexToCheck2 = l + lesson3PartLength + 1;
                                    console.log('indexToCheck:', indexToCheck);
                                        if (aktualny) {
                                            if (matchingIndexes.includes(indexToCheck) && matchingLessons5b === null) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart = spanElement.outerHTML;
                                            }
                                        }
                                        if (matchingLessons5b.includes(indexToCheck2) && matchingLessons5b !== null) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart = spanElement.outerHTML;
                                            }
function countCategoryInFiszki2(matchingFiszki3, category) {
                                            // Zmienna do przechowywania sumy wystƒÖpie≈Ñ
                                            let totalCount = 0;

                                            // Iteracja przez wszystkie fiszki
                                            for (let l = 0; l < matchingFiszki3.length; l++) {
                                                const fiszka = matchingFiszki3[l];

                                                // Zlicz wystƒÖpienia kategorii w category3
                                                if (fiszka.category3 && Array.isArray(fiszka.category3)) {
                                                    const count = fiszka.category3.filter(cat => cat === category).length;
                                                    totalCount += count; // Dodaj do sumy
                                                }
                                            }

                                            return [totalCount]; // Zwr√≥ƒá tablicƒô z jednƒÖ sumarycznƒÖ warto≈õciƒÖ
                                        }

// U≈ºycie funkcji
                                        const categoryToCount = "PresentSimplePodmiot";
                                        const categoryToCount2 = "PresentSimpleCzasownik";
                                        const occurrences = countCategoryInFiszki2(matchingFiszki3, categoryToCount);
                                        const occurrences2 = countCategoryInFiszki2(matchingFiszki3, categoryToCount2);
// Wypisywanie wynik√≥w
                                        console.log('Suma wystƒÖpie≈Ñ:', occurrences2);
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Po zako≈Ñczeniu iteracji przez fiszkƒô, sprawd≈∫ occurrences
                                        // Flaga sprawdzajƒÖca, czy podmiot zosta≈Ç ju≈º dodany

                                        if (aktualny && rodzaj === "play" && matchingIndexes2.includes(indexToCheck2)) {
                                            console.log('hej123', occurrences);
                                            // Sprawd≈∫, czy to jest pierwsze s≈Çowo
                                            if (l === 0 && occurrences[0] === 2) {
                                                console.log('Pod≈õwietlono pierwsze s≈Çowo:', fiszka.sentence1[l]);
                                                const firstWordElement = document.createElement('span');
                                                firstWordElement.textContent = sentencePart;
                                                firstWordElement.classList.add('green'); // Dodaj klasƒô, kt√≥ra pod≈õwietla s≈Çowo na zielono
                                                sentencePart = firstWordElement.outerHTML; // Zamie≈Ñ pierwsze s≈Çowo na jego wersjƒô z "span"
                                            }
                                            // Dodaj podmiot po drugim s≈Çowie, je≈õli occurrences wynosi 2
                                            if (l === 1 && occurrences[0] === 2) {
                                                console.log('Dodano "podmiot" po drugim s≈Çowie:', fiszka.sentence1[l]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('green');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(podmiot)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(2, 0, podmiotElement.outerHTML); // Dodaj podmiot po drugim s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            } else if (l === 0 && occurrences[0] === 1) {
                                                console.log('Dodano "podmiot" po pierwszym s≈Çowie:', fiszka.sentence1[l]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('green');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(podmiot)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(3, 0, podmiotElement.outerHTML); // Dodaj podmiot po pierwszym s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            }
                                        }
                                        if (aktualny && rodzaj === "play" && matchingIndexes3.includes(indexToCheck2)) {
                                            console.log('hej123', occurrences);
                                            // Sprawd≈∫, czy to jest pierwsze s≈Çowo
                                            // Dodaj podmiot po drugim s≈Çowie, je≈õli occurrences wynosi 2

                                            if (l === 2 && occurrences2[0] === 2) {
                                                console.log('Dodano "podmiot" po drugim s≈Çowie:', fiszka.sentence1[l]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('blue');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(2, 1, podmiotElement.outerHTML); // Dodaj podmiot po drugim s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            } else if (l === 2 && occurrences2[0] === 1) {
                                                console.log('Dodano "podmiot" po drugim s≈Çowie:', fiszka.sentence1[l]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('blue');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(3, 0, podmiotElement.outerHTML); // Dodaj podmiot po drugim s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            } else if (l === 1 && occurrences2[0] === 1) {
                                                console.log('Dodano "podmiot" po pierwszym s≈Çowie:', fiszka.sentence1[l]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('blue');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(3, 0, podmiotElement.outerHTML); // Dodaj podmiot po pierwszym s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            } else if (l === 2 && occurrences2[0] === 2) {
                                                console.log('Dodano "podmiot" po pierwszym s≈Çowie:', fiszka.sentence1[l]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('blue');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(3, 0, podmiotElement.outerHTML); // Dodaj podmiot po pierwszym s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            } else if (l === 3 && occurrences2[0] === 2) {
                                                console.log('Dodano "podmiot" po pierwszym s≈Çowie:', fiszka.sentence1[l]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('blue');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(3, 0, podmiotElement.outerHTML); // Dodaj podmiot po pierwszym s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            } else if (l === 3 && occurrences2[0] === 3) {
                                                console.log('Dodano "podmiot" po pierwszym s≈Çowie:', fiszka.sentence1[l]);
                                                const podmiotElement = document.createElement('span');
                                                podmiotElement.textContent = sentencePart;
                                                podmiotElement.classList.add('blue');
                                                sentencePart = podmiotElement.outerHTML;
                                                podmiotElement.textContent = "(czasownik)";

                                                // Rozdziel zdanie na s≈Çowa
                                                let words = sentencePart.split(' ');
                                                words.splice(3, 0, podmiotElement.outerHTML); // Dodaj podmiot po pierwszym s≈Çowie
                                                sentencePart = words.join(' '); // Po≈ÇƒÖcz z powrotem w jedno zdanie

                                            }
                                        }
                                        // Dodaj sentencePart do sentence10
                                        sentence30 += sentencePart + " ";
                                }
                            }

                            for (let lmm = 0; lmm < matchingFiszki3.length; lmm++) {
                                const fiszka = matchingFiszki3[lmm];
                                console.log('fiszka2:', fiszka);
                                if (!fiszka.sentence2 || fiszka.sentence2.length === 0) {
                                    console.log('fiszka.sentence2 is undefined or empty');
                                    continue;
                                }
                                for (let lmn = 0; lmn < fiszka.sentence2.length; lmn++) {
                                    let sentencePart3 = fiszka.sentence2[lmn];
                                    const indexToCheck = lmm + lesson3PartLength + 1;
                                    const indexToCheck2 = lmm + lesson3PartLength + 1;
                                        if (aktualny) {
                                            if (matchingIndexes.includes(indexToCheck)) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart3;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart3 = spanElement.outerHTML;
                                            }
                                        }
                                        if (matchingLessons5b.includes(indexToCheck2) && matchingLessons5b !== null) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart3;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart3 = spanElement.outerHTML;
                                            }
                                    sentence33 += sentencePart3 + " ";
                                }
                            }
                            for (let z = 0; z < matchingFiszki3.length; z++) {
                                const fiszka = matchingFiszki3[z];
                                let sentencePart444b = fiszka.translateb;
                                        if (aktualny) {
                                        // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                        const spanElement = document.createElement('span');
                                        spanElement.textContent = sentencePart444b;
                                        sentencePart444b = spanElement.outerHTML;

                                    }
                                    sentence1bb3 += sentencePart444b + " ";
                                }

                            for (let zi = 0; zi < matchingFiszki3.length; zi++) {
                                const fiszka = matchingFiszki3[zi];
                                let sentencePart444 = fiszka.translate;
                                if (aktualny) {
                                    const spanElement = document.createElement('span');
                                    spanElement.textContent = sentencePart444;
                                    sentencePart444 = spanElement.outerHTML;
                                }
                                sentence1bb1c += sentencePart444 + " ";
                            }

                                $sentenceDiv.html(`
<button class="left-button first-button">+<br></button>
${sentence10}${sentence11}<br>
<div class="sentence1bba">${sentence1bba}</div>
<div class="sentence1bba">${sentence1bbab}</div>
<button class="left-buttonb second-button">+<br></button>
${sentence20}${sentence22}<br>
<div class="sentence1bb1b">${sentence1bb1b}</div>
<div class="sentence1bba2">${sentence1bba2}</div>
<button class="left-buttonbb third-button">+<br></button>
${sentence30}${sentence33}<br>
        <div class="sentence1bb3">${sentence1bb3}</div>
        <div class="sentence1bb1c">${sentence1bb1c}</div>
`);
                                $('.sentence1bb3').html('');
                                $('.sentence1bb1c').html('');
                                $sentenceDiv.on('click', '.left-buttonbb', function () {
                                    $('.sentence1bb3').html('');
                                    // Dodawanie zdania tylko je≈õli sentence1bb2 jest puste
                                    if (sentence1bb3 === "") {
                                        let sentencePart444b = fiszka.translateb ? fiszka.translateb : "";
                                        sentence1bb3 += sentencePart444b + " ";
                                    }
                                    if (sentence1bb1c === "") {
                                        let sentencePart444 = fiszka.translate ? fiszka.translate : "";
                                        sentence1bb1c += sentencePart444 + " ";
                                    }
                                    // Dodanie tre≈õci do diva wraz z przyciskiem
                                    $sentenceDiv.html(`
<button class="left-button first-button">+<br></button>
${sentence10}${sentence11}<br>
<div class="sentence1bba">${sentence1bba}</div>
<div class="sentence1bba">${sentence1bbab}</div>
<button class="left-buttonb second-button">+<br></button>
${sentence20}${sentence22}<br>
<div class="sentence1bb1b">${sentence1bb1b}</div>
<div class="sentence1bba2">${sentence1bba2}</div>
<button class="left-buttonbb third-button">+<br></button>
${sentence30}${sentence33}<br>
        <div class="sentence1bb3">${sentence1bb3}</div>
        <div class="sentence1bb1c">${sentence1bb1c}</div>
`);
                                    // Ustawienie stylu dla przycisk√≥w .left-button
                                    $('.left-button').css('position', 'relative');
                                    $('.left-buttonb').css('position', 'relative');
                                    $('.left-buttonbb').css('position', 'relative');
                                    let sentencePart444 = fiszka.translateb ? fiszka.translateb : ""; // Sprawd≈∫, czy translate istnieje
                                    // Obs≈Çuga klikniƒôcia przycisku
                                    console.log('Klikniƒôto przycisk');
                                    let $sentence1bb3 = $sentenceDiv.find('.sentence1bb3');
                                    if ($sentence1bb3.css('display') === 'none') {
                                        sentence1bVisible = false;
                                        sentence1baVisible = true;
                                        // Pokazujemy zdanie .sentence1b
                                        $sentence1bb3.css('display', 'block');
                                        $sentence1bb3.css({
                                            'margin-top': '-25px',
                                            'top': '24px',
                                            'position': 'relative'
                                        });
                                    }
                                    if ($sentence1bb1c.css('display') === 'none') {
                                        // Pokazujemy zdanie .sentence1b
                                        $sentence1bb1c.css('display', 'block');
                                        $sentence1bb1c.css({
                                            'margin-top': '0px',
                                            'top': '23px',
                                            'position': 'relative'
                                        });
                                    }

                                });
                            }, 0);
                        });
                    }
                    


                    const $container = $('<div></div>'); // Tworzymy nowy element div za pomocƒÖ jQuery
                    $container.addClass('image-container3'); // Dodajemy klasƒô do nowego diva
                    $container.css('position', 'relative'); // Ustawiamy pozycjƒô diva na relative

                    // Mo≈ºesz r√≥wnie≈º dodaƒá dodatkowe atrybuty, takie jak 'data-lesson'
                    $container.attr('data-lesson', indexDiv);
                    
                    $('.grid-container').append($container);

                    const srcWords = [srcWord1, srcWord2, srcWord3];
                    const srcWordsb = [srcWord1d, srcWord2d, srcWord3d];
                    const srcWords2 = [srcWord1b, srcWord2b, srcWord3b];
                    const srcWordimage = [srcWord10];
                    // Tworzymy kontenery dynamicznie

                    console.log('hej155', srcWordsb);
                    // Zmienna globalna przechowujƒÖca ≈ÇƒÖczny czas trwania wszystkich wideo
                    let videoDurations = [];
                    let totalDuration = 0;
                    for (let i = 0; i < srcWords.length; i++) {
                        const video = document.createElement('video');
                        video.src = srcWords[i];
                        video.addEventListener('loadedmetadata', function () {
                            totalDuration += this.duration;
                            console.log('tablica8', totalDuration);
                            console.log('dzia≈Ça5');
                        });
                    }
                    console.log('tablica11', videoDurations);
                    function removePreviousVideo() {
                        const previousVideo = $container.find('video'); // Poprawne odwo≈Çanie do poprzedniego wideo
                        if (previousVideo.length > 0) {
                            previousVideo.remove(); // Usuniƒôcie poprzedniego wideo z kontenera
                        }
                    }

                    if (newIndex === 0 && !buttonindex && !isSearching) {
                        console.log('hej33b', buttonindex);
                        let funkcjaWywolana = false;
                        let stopButtonAdded = false;
                        if (indexDiv % 2 === 0) {
                            function addVideo1(index) {
                                console.log('hej80', index);
                                // Sprawd≈∫, czy jeste≈õmy poza zakresem tablicy
                                if (index >= srcWords.length && !funkcjaWywolana) {
                                    przekazArgument0(tablica3[2], undefined, false, tablica3[0], true, true, tablica3[1], tablica3[4]);
                                    console.log("wykonuje siƒô");
                                    funkcjaWywolana = true;
                                }
                                // Usu≈Ñ poprzednie wideo
                                removePreviousVideo();

                                console.log('hej78', index);

                                // Dodaj div z wideo do t≈Ça kontenera
                                const $vidDiv = $('<div>').addClass('background-video').css({
                                    'position': 'absolute',
                                    'z-index': '1' // Ustaw z-index dla wideo na ni≈ºszy
                                });

                                const $videoElement = $('<video>').attr({
                                    'autoplay': true,
                                    'muted': true,
                                    'loop': true
                                }).css({
                                    'z-index': '1' // Ustaw z-index dla wideo na ni≈ºszy
                                });
                                if (window.matchMedia("(min-width: 999px)").matches) {
                                    // Dodaj klasƒô CSS zale≈ºnie od indeksu wideo
                                    if (index === 0) {
                                        $videoElement.addClass('scaled-video');
                                    } else {
                                        $videoElement.addClass('next-video');
                                    }
                                }
                                // Utw√≥rz element <source> dla wideo i ustaw atrybuty

                                const $sourceElement = $('<source>').attr({
                                    'src': srcWords[index], // Poprawne u≈ºycie interpolacji
                                    'type': 'video/mp4'     // Typ pliku wideo
                                });

                                // Dodaj element source do elementu video
                                $sourceElement.appendTo($videoElement);
                                // Dodaj element video do diva dla wideo
                                $videoElement.appendTo($vidDiv);
                                // Dodaj element <source> do elementu <video>

                                // Obs≈Çuga b≈Çƒôdu ≈Çadowania wideo
                                $videoElement.onerror = function () {
                                    console.error('Nie mo≈ºna za≈Çadowaƒá pliku wideo.');
                                };
                                let currentIndexValue = [];
                                // Funkcja obs≈Çugi zdarzenia loadedmetadata
                                $videoElement.on('loadedmetadata', function () {
                                    const videoDuration = this.duration;
                                    videoDurations[index] = videoDuration;
                                    console.log('tablica77', totalDuration);
                                    $videoElement.on('timeupdate', function () {
                                        let adjustedProgress = 0;
                                        for (let i = 0; i < index; i++) {
                                            adjustedProgress += (videoDurations[i] / totalDuration) * 100;
                                        }
                                        adjustedProgress += (this.currentTime / videoDuration) * (videoDurations[index] / totalDuration) * 100;
                                        updateProgress(adjustedProgress);
                                        console.log('hej78', index);
                                        // Sprawd≈∫, czy warto≈õƒá index nie zosta≈Ça jeszcze dodana do tablicy currentIndex
                                        if (!currentIndexValue.includes(index)) {
                                            // Dodaj index do tablicy currentIndex
                                            currentIndexValue.push(index);
                                            console.log('hej70', currentIndexValue);
                                            // Wywo≈Çaj funkcjƒô addBackgroundToText tylko raz
                                            if (currentIndexValue[0] === 0 || currentIndexValue[0] === 1 || currentIndexValue[0] === 2) {
                                                addBackgroundToText(matchingFiszki1, matchingIndexes, currentIndexValue, true, lesson1FirstPartLength, lesson1PartLength, matchingLessons5b);
                                            }
                                        }

                                        // Sprawd≈∫, czy wideo zosta≈Ço zako≈Ñczone
                                        if ($videoElement[0].duration - $videoElement[0].currentTime < 1) {
                                            console.log('Wideo zako≈Ñczone, uruchamiam nastƒôpne.');
                                            // Odtw√≥rz nastƒôpne wideo po zako≈Ñczeniu poprzedniego
                                            addVideo1(index + 1);
                                            updateProgress(0);
                                        }
                                    });
                                });
                                addScenes(index);
                                // Dodaj div z wideo do t≈Ça kontenera
                                $vidDiv.appendTo($container);
                                function updateProgress(progress) {
                                    // Aktualizuj pasek postƒôpu na dole kontenera
                                    $('.progress-bar').css('width', progress + '%');
                                }

                                // Inicjalizacja paska postƒôpu
                                const $progressBar = $('<div>').addClass('progress-bar');
                                if (window.matchMedia("(min-width: 999px)").matches) {
                                    $progressBar.css({
                                        'position': 'absolute',
                                        'z-index': '2',
                                        'bottom': '0',
                                        'left': '0',
                                        'height': '7px', // Wysoko≈õƒá paska postƒôpu
                                        'background-color': 'green', // Kolor paska postƒôpu
                                        'width': '140%', // Delikatne powiƒôkszenie paska postƒôpu o 2% w ka≈ºdym kierunku
                                        'margin-bottom': '-2%',
                                        'margin-left': '-4%',
                                        'margin-right': '-4%' // Zapewnienie r√≥wnowagi dla powiƒôkszenia paska postƒôpu
                                    });
                                } else {
                                    $progressBar.css({
                                        'position': 'absolute',
                                        'z-index': '2',
                                        'bottom': '0px',
                                        'left': '0px',
                                        'height': '7px', // Wysoko≈õƒá paska postƒôpu
                                        'background-color': 'green', // Kolor paska postƒôpu
                                        'width': '100%' // Delikatne powiƒôkszenie paska postƒôpu o 2% w ka≈ºdym kierunku
                                    });
                                }
                                $progressBar.appendTo($container);
// Funkcja dodajƒÖca nowe elementy <div>
                                function addScenes(index) {
                                    // Sprawd≈∫, czy istnieje element <div> o klasie 'scene-description'
                                    let $sceneDiv = $container.find('.scene-description');

                                    if ($sceneDiv.length) {
                                        // Je≈õli istnieje, wyczy≈õƒá jego zawarto≈õƒá
                                        $sceneDiv.empty();
                                    } else {
                                        // Je≈õli nie istnieje, stw√≥rz nowy element <div>
                                        $sceneDiv = $('<div>').addClass('scene-description').appendTo($container);
                                    }

                                    // Dodaj nowy tekst do <div>
                                    $sceneDiv.text(`Scena z filmu ${srcWords2[index]}`);

                                    if (window.matchMedia("(max-width: 999px)").matches) {
                                        if (indexDiv % 2 === 0) {
                                            console.log('Warunek podzielno≈õci przez 2 spe≈Çniony2');
                                            // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                            $sceneDiv.css({
                                                'position': 'relative',
                                                'margin-top': '-140px',
                                                'margin-left': '-450px',
                                                'text-align': 'left',
                                                'background-color': 'orange',
                                                'z-index': '9999999'
                                            });
                                        } else if (indexDiv % 1 === 0 || indexDiv % 3 === 0 || indexDiv % 5 === 0) {
                                            console.log('Warunek podzielno≈õci przez 1 spe≈Çniony2');
                                            // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                            $sceneDiv.css({
                                                'position': 'relative',
                                                'margin-top': '-140px',
                                                'margin-right': '-20px',
                                                'text-align': 'left',
                                                'background-color': 'blue',
                                                'z-index': '99999999999'
                                            });
                                        }
                                    }
                                }


// Tworzenie przycisku "Stop"
                                if (!stopButtonAdded) {
                                    const $stopButton = $('<img>')
                                            .attr('src', 'https://www.arbulang.com/img/stopok2.png')
                                            .css({
                                                'display': 'none', // Ukryty na starcie
                                                'position': 'absolute', // Precyzyjne pozycjonowanie wzglƒôdem kontenera
                                                'top': '-15px',
                                                'left': '20px',
                                                'width': '40px',
                                                'height': '40px',
                                                'z-index': '999999',
                                                'cursor': 'pointer' // Ustawienie kursora jako wska≈∫nik
                                            })
                                            .on('click', function () {
                                                // Pƒôtla po wszystkich elementach wideo i zatrzymywanie ka≈ºdego z nich
                                                $('video').each(function () {
                                                    const video = this;
                                                    if (!video.paused) {
                                                        video.pause();
                                                        // Zmie≈Ñ obrazek na "Play"
                                                        $stopButton.attr('src', 'https://www.arbulang.com/img/play.png');
                                                    } else {
                                                        video.play();
                                                        // Zmie≈Ñ obrazek z powrotem na "Stop"
                                                        $stopButton.attr('src', 'https://www.arbulang.com/img/stopok2.png');
                                                    }
                                                });
                                            });

                                    // Dodanie przycisku do kontenera
                                    $stopButton.appendTo($container);

                                    // Pokazywanie przycisku na hover kontenera
                                    $container.on('mouseover', function () {
                                        $stopButton.show();
                                    });

                                    // Ukrywanie przycisku, gdy mysz opu≈õci kontener
                                    $container.on('mouseout', function () {
                                        $stopButton.hide();
                                    });

                                    stopButtonAdded = true;  // Flaga ustawiona na true, gdy przycisk zosta≈Ç dodany
                                }
                            }
                            setTimeout(function () {
                                addVideo1(0);
                            }, 200);
                        } else if (indexDiv === 1 || indexDiv === 11 || indexDiv === 13 || indexDiv === 17 || indexDiv === 19 || indexDiv === 23 || indexDiv === 29 || indexDiv === 31 || indexDiv === 37 || indexDiv === 41 || indexDiv === 43 || indexDiv % 3 === 0 || indexDiv % 5 === 0 || indexDiv % 7 === 0) {
                            function addVideo1b(index) {
                                console.log('hej80', index);
                                // Sprawd≈∫, czy jeste≈õmy poza zakresem tablicy
                                if (index >= srcWords.length && !funkcjaWywolana) {
                                    przekazArgument0(tablica3[2], undefined, false, tablica3[0], true, true, tablica3[1], tablica3[4]);
                                    console.log("wykonuje siƒô");
                                    funkcjaWywolana = true;
                                }
                                // Usu≈Ñ poprzednie wideo
                                removePreviousVideo();

                                console.log('hej78', index);

                                // Dodaj div z wideo do t≈Ça kontenera
                                const $vidDiv = $('<div>').addClass('background-video22').css({
                                    'position': 'absolute',
                                    'z-index': '1' // Ustaw z-index dla wideo na ni≈ºszy
                                });

                                const $videoElement = $('<video>').attr({
                                    'autoplay': true,
                                    'muted': true,
                                    'loop': true
                                }).css({
                                    'z-index': '1' // Ustaw z-index dla wideo na ni≈ºszy
                                });
                                if (window.matchMedia("(min-width: 999px)").matches) {
                                    // Dodaj klasƒô CSS zale≈ºnie od indeksu wideo
                                    if (index === 0) {
                                        $videoElement.addClass('scaled-video');
                                    } else {
                                        $videoElement.addClass('next-video');
                                    }
                                }
                                // Utw√≥rz element <source> dla wideo i ustaw atrybuty

                                const $sourceElement = $('<source>').attr({
                                    'src': srcWords[index], // Poprawne u≈ºycie interpolacji
                                    'type': 'video/mp4'     // Typ pliku wideo
                                });

                                // Dodaj element source do elementu video
                                $sourceElement.appendTo($videoElement);
                                // Dodaj element video do diva dla wideo
                                $videoElement.appendTo($vidDiv);
                                // Dodaj element <source> do elementu <video>

                                // Obs≈Çuga b≈Çƒôdu ≈Çadowania wideo
                                $videoElement.onerror = function () {
                                    console.error('Nie mo≈ºna za≈Çadowaƒá pliku wideo.');
                                };
                                let currentIndexValue = [];
                                // Funkcja obs≈Çugi zdarzenia loadedmetadata
                                $videoElement.on('loadedmetadata', function () {
                                    const videoDuration = this.duration;
                                    videoDurations[index] = videoDuration;
                                    console.log('tablica77', totalDuration);
                                    $videoElement.on('timeupdate', function () {
                                        let adjustedProgress = 0;
                                        for (let i = 0; i < index; i++) {
                                            adjustedProgress += (videoDurations[i] / totalDuration) * 100;
                                        }
                                        adjustedProgress += (this.currentTime / videoDuration) * (videoDurations[index] / totalDuration) * 100;
                                        updateProgress(adjustedProgress);
                                        console.log('hej78', index);
                                        // Sprawd≈∫, czy warto≈õƒá index nie zosta≈Ça jeszcze dodana do tablicy currentIndex
                                        if (!currentIndexValue.includes(index)) {
                                            // Dodaj index do tablicy currentIndex
                                            currentIndexValue.push(index);
                                            console.log('hej70', currentIndexValue);
                                            // Wywo≈Çaj funkcjƒô addBackgroundToText tylko raz
                                            if (currentIndexValue[0] === 0 || currentIndexValue[0] === 1 || currentIndexValue[0] === 2) {
                                                addBackgroundToText(matchingFiszki1, matchingIndexes, currentIndexValue, true, lesson1FirstPartLength, lesson1PartLength, matchingLessons5b);
                                            }
                                        }

                                        // Sprawd≈∫, czy wideo zosta≈Ço zako≈Ñczone
                                        if ($videoElement[0].duration - $videoElement[0].currentTime < 1) {
                                            console.log('Wideo zako≈Ñczone, uruchamiam nastƒôpne.');
                                            // Odtw√≥rz nastƒôpne wideo po zako≈Ñczeniu poprzedniego
                                            addVideo1b(index + 1);
                                            updateProgress(0);
                                        }
                                    });
                                });
                                addScenes(index);
                                // Dodaj div z wideo do t≈Ça kontenera
                                $vidDiv.appendTo($container);
                                function updateProgress(progress) {
                                    // Aktualizuj pasek postƒôpu na dole kontenera
                                    $('.progress-bar').css('width', progress + '%');
                                }

                                // Inicjalizacja paska postƒôpu
                                const $progressBar = $('<div>').addClass('progress-bar');
                                if (window.matchMedia("(min-width: 999px)").matches) {
                                    $progressBar.css({
                                        'position': 'absolute',
                                        'z-index': '2',
                                        'bottom': '0',
                                        'left': '0',
                                        'height': '7px', // Wysoko≈õƒá paska postƒôpu
                                        'background-color': 'green', // Kolor paska postƒôpu
                                        'width': '140%', // Delikatne powiƒôkszenie paska postƒôpu o 2% w ka≈ºdym kierunku
                                        'margin-bottom': '-2%',
                                        'margin-left': '-4%',
                                        'margin-right': '-4%' // Zapewnienie r√≥wnowagi dla powiƒôkszenia paska postƒôpu
                                    });
                                } else {
                                    $progressBar.css({
                                        'position': 'absolute',
                                        'z-index': '2',
                                        'bottom': '0px',
                                        'left': '0px',
                                        'height': '7px', // Wysoko≈õƒá paska postƒôpu
                                        'background-color': 'green', // Kolor paska postƒôpu
                                        'width': '100%' // Delikatne powiƒôkszenie paska postƒôpu o 2% w ka≈ºdym kierunku
                                    });
                                }
                                $progressBar.appendTo($container);
// Funkcja dodajƒÖca nowe elementy <div>
                                function addScenes(index) {
                                    // Sprawd≈∫, czy istnieje element <div> o klasie 'scene-description'
                                    let $sceneDiv = $container.find('.scene-description');

                                    if ($sceneDiv.length) {
                                        // Je≈õli istnieje, wyczy≈õƒá jego zawarto≈õƒá
                                        $sceneDiv.empty();
                                    } else {
                                        // Je≈õli nie istnieje, stw√≥rz nowy element <div>
                                        $sceneDiv = $('<div>').addClass('scene-description').appendTo($container);
                                    }

                                    // Dodaj nowy tekst do <div>
                                    $sceneDiv.text(`Scena z filmu ${srcWords2[index]}`);

                                    if (window.matchMedia("(max-width: 999px)").matches) {
                                        if (indexDiv % 2 === 0) {
                                            console.log('Warunek podzielno≈õci przez 2 spe≈Çniony2');
                                            // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                            $sceneDiv.css({
                                                'position': 'relative',
                                                'margin-top': '-140px',
                                                'margin-left': '-450px',
                                                'text-align': 'left',
                                                'background-color': 'orange',
                                                'z-index': '9999999'
                                            });
                                        } else if (indexDiv % 1 === 0 || indexDiv % 3 === 0 || indexDiv % 5 === 0) {
                                            console.log('Warunek podzielno≈õci przez 1 spe≈Çniony2');
                                            // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                            $sceneDiv.css({
                                                'position': 'relative',
                                                'margin-top': '-140px',
                                                'margin-right': '-20px',
                                                'text-align': 'left',
                                                'background-color': 'blue',
                                                'z-index': '99999999999'
                                            });
                                        }
                                    }
                                }


// Tworzenie przycisku "Stop"
                                if (!stopButtonAdded) {
                                    const $stopButton = $('<img>')
                                            .attr('src', 'https://www.arbulang.com/img/stopok2.png')
                                            .css({
                                                'display': 'none', // Ukryty na starcie
                                                'position': 'absolute', // Precyzyjne pozycjonowanie wzglƒôdem kontenera
                                                'top': '-15px',
                                                'left': '20px',
                                                'width': '40px',
                                                'height': '40px',
                                                'z-index': '999999',
                                                'cursor': 'pointer' // Ustawienie kursora jako wska≈∫nik
                                            })
                                            .on('click', function () {
                                                // Pƒôtla po wszystkich elementach wideo i zatrzymywanie ka≈ºdego z nich
                                                $('video').each(function () {
                                                    const video = this;
                                                    if (!video.paused) {
                                                        video.pause();
                                                        // Zmie≈Ñ obrazek na "Play"
                                                        $stopButton.attr('src', 'https://www.arbulang.com/img/play.png');
                                                    } else {
                                                        video.play();
                                                        // Zmie≈Ñ obrazek z powrotem na "Stop"
                                                        $stopButton.attr('src', 'https://www.arbulang.com/img/stopok2.png');
                                                    }
                                                });
                                            });

                                    // Dodanie przycisku do kontenera
                                    $stopButton.appendTo($container);

                                    // Pokazywanie przycisku na hover kontenera
                                    $container.on('mouseover', function () {
                                        $stopButton.show();
                                    });

                                    // Ukrywanie przycisku, gdy mysz opu≈õci kontener
                                    $container.on('mouseout', function () {
                                        $stopButton.hide();
                                    });

                                    stopButtonAdded = true;  // Flaga ustawiona na true, gdy przycisk zosta≈Ç dodany
                                }
                            }
                            setTimeout(function () {
                                addVideo1b(0);
                            }, 200);
                        }
                    } else if (index50 === 0 && buttonindex && !isSearching) {
                        let stopButtonAdded = false;
                        console.log('hej3338', newIndex);
                        let funkcjaWywolana = false;
                        if (indexDiv % 2 === 0) {
                            function addVideo2(index) {
                                console.log('hej80', index);

                                // Sprawd≈∫, czy jeste≈õmy poza zakresem tablicy
                                if (index >= srcWords.length && !funkcjaWywolana) {
                                    setTimeout(function () {
                                        $('.progress-bar').remove();
                                    }, 200); // Op√≥≈∫nienie w milisekundach (tu: 200 ms)
                                    przekazArgument0(tablica3[2], undefined, false, tablica3[0], true, true, tablica3[1], tablica3[4]);
                                    console.log("wykonuje siƒô");
                                    funkcjaWywolana = true;
                                }

                                // Usu≈Ñ poprzednie wideo
                                removePreviousVideo();
                                console.log('hej78', index);

                                // Dodaj div z wideo do t≈Ça kontenera
                                const $vidDiv = $('<div>').addClass('background-video');

                                // Utw√≥rz element <video> i ustaw atrybuty
                                const $videoElement = $('<video>').attr({
                                    'autoplay': true, // Automatyczne odtwarzanie wideo
                                    'muted': true, // Wyciszenie d≈∫wiƒôku wideo
                                    'loop': true // Zapƒôtlenie wideo
                                });
                                if (window.matchMedia("(min-width: 999px)").matches) {
                                    // Dodaj klasƒô CSS zale≈ºnie od indeksu wideo
                                    if (index === 0) {
                                        $videoElement.addClass('scaled-video');
                                    } else {
                                        $videoElement.addClass('next-video');
                                    }
                                }
                                // Utw√≥rz element <source> dla wideo i ustaw atrybuty
                                const $sourceElement = $('<source>').attr({
                                    'src': srcWords[index], // Poprawne u≈ºycie interpolacji
                                    'type': 'video/mp4'     // Typ pliku wideo
                                });

                                // Dodaj element source do elementu video
                                $sourceElement.appendTo($videoElement);

                                // Dodaj element video do diva dla wideo
                                $videoElement.appendTo($vidDiv);

                                // Dodaj element <source> do elementu <video>
                                // Obs≈Çuga b≈Çƒôdu ≈Çadowania wideo
                                $videoElement.onerror = function () {
                                    console.error('Nie mo≈ºna za≈Çadowaƒá pliku wideo.');
                                };

                                let currentIndexValue = [];

                                // Funkcja obs≈Çugi zdarzenia loadedmetadata
                                $videoElement.on('loadedmetadata', function () {
                                    const videoDuration = this.duration;
                                    videoDurations[index] = videoDuration;
                                    console.log('tablica77', totalDuration);

                                    $videoElement.on('timeupdate', function () {
                                        let adjustedProgress = 0;
                                        for (let i = 0; i < index; i++) {
                                            adjustedProgress += (videoDurations[i] / totalDuration) * 100;
                                        }
                                        adjustedProgress += (this.currentTime / videoDuration) * (videoDurations[index] / totalDuration) * 100;
                                        updateProgress(adjustedProgress);
                                        console.log('hej78', index);

                                        // Sprawd≈∫, czy warto≈õƒá index nie zosta≈Ça jeszcze dodana do tablicy currentIndex
                                        if (!currentIndexValue.includes(index)) {
                                            // Dodaj index do tablicy currentIndex
                                            currentIndexValue.push(index);
                                            console.log('hej70', currentIndexValue);

                                            // Wywo≈Çaj funkcjƒô addBackgroundToText tylko raz
                                            if (currentIndexValue[0] === 0 || currentIndexValue[0] === 1 || currentIndexValue[0] === 2) {
                                                addBackgroundToText(matchingFiszki1, matchingIndexes, currentIndexValue, true, lesson1FirstPartLength, lesson1PartLength, matchingLessons5b);
                                            }
                                        }

                                        // Sprawd≈∫, czy wideo zosta≈Ço zako≈Ñczone
                                        if ($videoElement[0].duration - $videoElement[0].currentTime < 1) {
                                            console.log('Wideo zako≈Ñczone, uruchamiam nastƒôpne.');
                                            // Odtw√≥rz nastƒôpne wideo po zako≈Ñczeniu poprzedniego
                                            addVideo2(index + 1);
                                            updateProgress(0);
                                        }
                                    });
                                });

                                addScenes(index);
                                // Dodaj wideo do kontenera
                                $vidDiv.appendTo($container);

                                function updateProgress(progress) {
                                    // Aktualizuj pasek postƒôpu na dole kontenera
                                    $('.progress-bar').css('width', progress + '%');
                                }

                                // Inicjalizacja paska postƒôpu
                                const $progressBar = $('<div>').addClass('progress-bar');
                                if (window.matchMedia("(min-width: 999px)").matches) {
                                    $progressBar.css({
                                        'position': 'absolute',
                                        'z-index': '2',
                                        'bottom': '0',
                                        'left': '0',
                                        'height': '7px', // Wysoko≈õƒá paska postƒôpu
                                        'background-color': 'green', // Kolor paska postƒôpu
                                        'width': '140%', // Delikatne powiƒôkszenie paska postƒôpu o 2% w ka≈ºdym kierunku
                                        'margin-bottom': '-2%',
                                        'margin-left': '-4%',
                                        'margin-right': '-4%' // Zapewnienie r√≥wnowagi dla powiƒôkszenia paska postƒôpu
                                    });
                                } else {
                                    $progressBar.css({
                                        'position': 'absolute',
                                        'z-index': '2',
                                        'bottom': '0px',
                                        'left': '0px',
                                        'height': '7px', // Wysoko≈õƒá paska postƒôpu
                                        'background-color': 'green', // Kolor paska postƒôpu
                                        'width': '100%' // Delikatne powiƒôkszenie paska postƒôpu o 2% w ka≈ºdym kierunku
                                    });
                                }
                                $progressBar.appendTo($container);

                                function addScenes(index) {
                                    // Sprawd≈∫, czy istnieje element <div> o klasie 'scene-description'
                                    let $sceneDiv = $container.find('.scene-description');

                                    if ($sceneDiv.length) {
                                        // Je≈õli istnieje, wyczy≈õƒá jego zawarto≈õƒá
                                        $sceneDiv.empty();
                                    } else {
                                        // Je≈õli nie istnieje, stw√≥rz nowy element <div>
                                        $sceneDiv = $('<div>').addClass('scene-description').appendTo($container);
                                    }

                                    // Dodaj nowy tekst do <div>
                                    $sceneDiv.text(`Scena z filmu ${srcWords2[index]}`);

                                    if (window.matchMedia("(max-width: 999px)").matches) {
                                        if (indexDiv % 2 === 0) {
                                            console.log('Warunek podzielno≈õci przez 2 spe≈Çniony2');
                                            // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                            $sceneDiv.css({
                                                'position': 'relative',
                                                'margin-top': '-140px',
                                                'margin-left': '-450px',
                                                'text-align': 'left',
                                                'background-color': 'orange',
                                                'z-index': '9999999'
                                            });
                                        } else if (indexDiv % 1 === 0 || indexDiv % 3 === 0 || indexDiv % 5 === 0) {
                                            console.log('Warunek podzielno≈õci przez 1 spe≈Çniony2');
                                            // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                            $sceneDiv.css({
                                                'position': 'relative',
                                                'margin-top': '-140px',
                                                'margin-right': '-20px',
                                                'text-align': 'left',
                                                'background-color': 'blue',
                                                'z-index': '99999999999'
                                            });
                                        }
                                    } else if (window.matchMedia("(min-width: 999px)").matches) {
                                        // Dodatkowe style, je≈õli indexDiv jest podzielny przez 4
                                        if (indexDiv % 4 === 1) {
                                            // Dodaj klasƒô 'scene-description2' do $sceneDiv
                                            $sceneDiv.removeClass('scene-description');
                                            $sceneDiv.addClass('scene-description2');
                                        } else {
                                            // Upewnij siƒô, ≈ºe klasa 'scene-description2' jest usuniƒôta, je≈õli nie jest podzielna przez 4
                                            $sceneDiv.removeClass('scene-description2');
                                        }
                                    }
                                }
// Tworzenie przycisku "Stop"
                                if (!stopButtonAdded) {
                                    const $stopButton = $('<img>')
                                            .attr('src', 'https://www.arbulang.com/img/stopok2.png')
                                            .css({
                                                'display': 'none', // Ukryty na starcie
                                                'position': 'absolute', // Precyzyjne pozycjonowanie wzglƒôdem kontenera
                                                'top': '-15px',
                                                'left': '20px',
                                                'width': '40px',
                                                'height': '40px',
                                                'z-index': '999999',
                                                'cursor': 'pointer' // Ustawienie kursora jako wska≈∫nik
                                            })
                                            .on('click', function () {
                                                // Pƒôtla po wszystkich elementach wideo i zatrzymywanie ka≈ºdego z nich
                                                $('video').each(function () {
                                                    const video = this;
                                                    if (!video.paused) {
                                                        video.pause();
                                                        // Zmie≈Ñ obrazek na "Play"
                                                        $stopButton.attr('src', 'https://www.arbulang.com/img/play.png');
                                                    } else {
                                                        video.play();
                                                        // Zmie≈Ñ obrazek z powrotem na "Stop"
                                                        $stopButton.attr('src', 'https://www.arbulang.com/img/stopok2.png');
                                                    }
                                                });
                                            });

                                    // Dodanie przycisku do kontenera
                                    $stopButton.appendTo($container);

                                    // Pokazywanie przycisku na hover kontenera
                                    $container.on('mouseover', function () {
                                        $stopButton.show();
                                    });

                                    // Ukrywanie przycisku, gdy mysz opu≈õci kontener
                                    $container.on('mouseout', function () {
                                        $stopButton.hide();
                                    });

                                    stopButtonAdded = true;  // Flaga ustawiona na true, gdy przycisk zosta≈Ç dodany
                                }
                            }
                            setTimeout(function () {
                                addVideo2(0);
                            }, 200);
                        } else if (indexDiv === 1 || indexDiv === 11 || indexDiv === 13 || indexDiv === 17 || indexDiv === 19 || indexDiv === 23 || indexDiv === 29 || indexDiv === 31 || indexDiv === 37 || indexDiv === 41 || indexDiv === 43 || indexDiv % 3 === 0 || indexDiv % 5 === 0 || indexDiv % 7 === 0) {
                            function addVideo2b(index) {
                                console.log('hej80', index);

                                // Sprawd≈∫, czy jeste≈õmy poza zakresem tablicy
                                if (index >= srcWords.length && !funkcjaWywolana) {
                                    setTimeout(function () {
                                        $('.progress-bar').remove();
                                    }, 200); // Op√≥≈∫nienie w milisekundach (tu: 200 ms)
                                    przekazArgument0(tablica3[2], undefined, false, tablica3[0], true, true, tablica3[1], tablica3[4]);
                                    console.log("wykonuje siƒô");
                                    funkcjaWywolana = true;
                                }

                                // Usu≈Ñ poprzednie wideo
                                removePreviousVideo();
                                console.log('hej78', index);

                                // Dodaj div z wideo do t≈Ça kontenera
                                const $vidDiv = $('<div>').addClass('background-video22');

                                // Utw√≥rz element <video> i ustaw atrybuty
                                const $videoElement = $('<video>').attr({
                                    'autoplay': true, // Automatyczne odtwarzanie wideo
                                    'muted': true, // Wyciszenie d≈∫wiƒôku wideo
                                    'loop': true // Zapƒôtlenie wideo
                                });
                                if (window.matchMedia("(min-width: 999px)").matches) {
                                    // Dodaj klasƒô CSS zale≈ºnie od indeksu wideo
                                    if (index === 0) {
                                        $videoElement.addClass('scaled-video');
                                    } else {
                                        $videoElement.addClass('next-video');
                                    }
                                }
                                // Utw√≥rz element <source> dla wideo i ustaw atrybuty
                                const $sourceElement = $('<source>').attr({
                                    'src': srcWords[index], // Poprawne u≈ºycie interpolacji
                                    'type': 'video/mp4'     // Typ pliku wideo
                                });

                                // Dodaj element source do elementu video
                                $sourceElement.appendTo($videoElement);

                                // Dodaj element video do diva dla wideo
                                $videoElement.appendTo($vidDiv);

                                // Dodaj element <source> do elementu <video>
                                // Obs≈Çuga b≈Çƒôdu ≈Çadowania wideo
                                $videoElement.onerror = function () {
                                    console.error('Nie mo≈ºna za≈Çadowaƒá pliku wideo.');
                                };

                                let currentIndexValue = [];

                                // Funkcja obs≈Çugi zdarzenia loadedmetadata
                                $videoElement.on('loadedmetadata', function () {
                                    const videoDuration = this.duration;
                                    videoDurations[index] = videoDuration;
                                    console.log('tablica77', totalDuration);

                                    $videoElement.on('timeupdate', function () {
                                        let adjustedProgress = 0;
                                        for (let i = 0; i < index; i++) {
                                            adjustedProgress += (videoDurations[i] / totalDuration) * 100;
                                        }
                                        adjustedProgress += (this.currentTime / videoDuration) * (videoDurations[index] / totalDuration) * 100;
                                        updateProgress(adjustedProgress);
                                        console.log('hej78', index);

                                        // Sprawd≈∫, czy warto≈õƒá index nie zosta≈Ça jeszcze dodana do tablicy currentIndex
                                        if (!currentIndexValue.includes(index)) {
                                            // Dodaj index do tablicy currentIndex
                                            currentIndexValue.push(index);
                                            console.log('hej70', currentIndexValue);

                                            // Wywo≈Çaj funkcjƒô addBackgroundToText tylko raz
                                            if (currentIndexValue[0] === 0 || currentIndexValue[0] === 1 || currentIndexValue[0] === 2) {
                                                addBackgroundToText(matchingFiszki1, matchingIndexes, currentIndexValue, true, lesson1FirstPartLength, lesson1PartLength, matchingLessons5b);
                                            }
                                        }

                                        // Sprawd≈∫, czy wideo zosta≈Ço zako≈Ñczone
                                        if ($videoElement[0].duration - $videoElement[0].currentTime < 1) {
                                            console.log('Wideo zako≈Ñczone, uruchamiam nastƒôpne.');
                                            // Odtw√≥rz nastƒôpne wideo po zako≈Ñczeniu poprzedniego
                                            addVideo2b(index + 1);
                                            updateProgress(0);
                                        }
                                    });
                                });

                                addScenes(index);
                                // Dodaj wideo do kontenera
                                $vidDiv.appendTo($container);

                                function updateProgress(progress) {
                                    // Aktualizuj pasek postƒôpu na dole kontenera
                                    $('.progress-bar').css('width', progress + '%');
                                }

                                // Inicjalizacja paska postƒôpu
                                const $progressBar = $('<div>').addClass('progress-bar');
                                if (window.matchMedia("(min-width: 999px)").matches) {
                                    $progressBar.css({
                                        'position': 'absolute',
                                        'z-index': '2',
                                        'bottom': '0',
                                        'left': '0',
                                        'height': '7px', // Wysoko≈õƒá paska postƒôpu
                                        'background-color': 'green', // Kolor paska postƒôpu
                                        'width': '140%', // Delikatne powiƒôkszenie paska postƒôpu o 2% w ka≈ºdym kierunku
                                        'margin-bottom': '-2%',
                                        'margin-left': '-4%',
                                        'margin-right': '-4%' // Zapewnienie r√≥wnowagi dla powiƒôkszenia paska postƒôpu
                                    });
                                } else {
                                    $progressBar.css({
                                        'position': 'absolute',
                                        'z-index': '2',
                                        'bottom': '0px',
                                        'left': '0px',
                                        'height': '7px', // Wysoko≈õƒá paska postƒôpu
                                        'background-color': 'green', // Kolor paska postƒôpu
                                        'width': '100%' // Delikatne powiƒôkszenie paska postƒôpu o 2% w ka≈ºdym kierunku
                                    });
                                }
                                $progressBar.appendTo($container);

                                function addScenes(index) {
                                    // Sprawd≈∫, czy istnieje element <div> o klasie 'scene-description'
                                    let $sceneDiv = $container.find('.scene-description');

                                    if ($sceneDiv.length) {
                                        // Je≈õli istnieje, wyczy≈õƒá jego zawarto≈õƒá
                                        $sceneDiv.empty();
                                    } else {
                                        // Je≈õli nie istnieje, stw√≥rz nowy element <div>
                                        $sceneDiv = $('<div>').addClass('scene-description').appendTo($container);
                                    }

                                    // Dodaj nowy tekst do <div>
                                    $sceneDiv.text(`Scena z filmu ${srcWords2[index]}`);

                                    if (window.matchMedia("(max-width: 999px)").matches) {
                                        if (indexDiv % 2 === 0) {
                                            console.log('Warunek podzielno≈õci przez 2 spe≈Çniony2');
                                            // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                            $sceneDiv.css({
                                                'position': 'relative',
                                                'margin-top': '-140px',
                                                'margin-left': '-450px',
                                                'text-align': 'left',
                                                'background-color': 'orange',
                                                'z-index': '9999999'
                                            });
                                        } else if (indexDiv % 1 === 0 || indexDiv % 3 === 0 || indexDiv % 5 === 0) {
                                            console.log('Warunek podzielno≈õci przez 1 spe≈Çniony2');
                                            // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                            $sceneDiv.css({
                                                'position': 'relative',
                                                'margin-top': '-140px',
                                                'margin-right': '-20px',
                                                'text-align': 'left',
                                                'background-color': 'blue',
                                                'z-index': '99999999999'
                                            });
                                        }
                                    } else if (window.matchMedia("(min-width: 999px)").matches) {
                                        // Dodatkowe style, je≈õli indexDiv jest podzielny przez 4
                                        if (indexDiv % 4 === 1) {
                                            // Dodaj klasƒô 'scene-description2' do $sceneDiv
                                            $sceneDiv.removeClass('scene-description');
                                            $sceneDiv.addClass('scene-description2');
                                        } else {
                                            // Upewnij siƒô, ≈ºe klasa 'scene-description2' jest usuniƒôta, je≈õli nie jest podzielna przez 4
                                            $sceneDiv.removeClass('scene-description2');
                                        }
                                    }
                                }
// Tworzenie przycisku "Stop"
                                if (!stopButtonAdded) {
                                    const $stopButton = $('<img>')
                                            .attr('src', 'https://www.arbulang.com/img/stopok2.png')
                                            .css({
                                                'display': 'none', // Ukryty na starcie
                                                'position': 'absolute', // Precyzyjne pozycjonowanie wzglƒôdem kontenera
                                                'top': '-15px',
                                                'left': '20px',
                                                'width': '40px',
                                                'height': '40px',
                                                'z-index': '999999',
                                                'cursor': 'pointer' // Ustawienie kursora jako wska≈∫nik
                                            })
                                            .on('click', function () {
                                                // Pƒôtla po wszystkich elementach wideo i zatrzymywanie ka≈ºdego z nich
                                                $('video').each(function () {
                                                    const video = this;
                                                    if (!video.paused) {
                                                        video.pause();
                                                        // Zmie≈Ñ obrazek na "Play"
                                                        $stopButton.attr('src', 'https://www.arbulang.com/img/play.png');
                                                    } else {
                                                        video.play();
                                                        // Zmie≈Ñ obrazek z powrotem na "Stop"
                                                        $stopButton.attr('src', 'https://www.arbulang.com/img/stopok2.png');
                                                    }
                                                });
                                            });

                                    // Dodanie przycisku do kontenera
                                    $stopButton.appendTo($container);

                                    // Pokazywanie przycisku na hover kontenera
                                    $container.on('mouseover', function () {
                                        $stopButton.show();
                                    });

                                    // Ukrywanie przycisku, gdy mysz opu≈õci kontener
                                    $container.on('mouseout', function () {
                                        $stopButton.hide();
                                    });

                                    stopButtonAdded = true;  // Flaga ustawiona na true, gdy przycisk zosta≈Ç dodany
                                }
                            }
                            setTimeout(function () {
                                addVideo2b(0);
                            }, 200);
                        }
                    } else {
                        function addVideo3(index) {
                            console.log('index44b', indexDiv);

                            // Tworzymy element <video> z atrybutami
                            const $videoElement = $('<video>').attr({
                                'muted': true,
                                'loop': true,
                                'style': 'z-index: 1',
                                'poster': srcWordimage[index] // Dodanie plakatu do wideo
                            });

// Tworzymy kontener dla miniatur
                            const $thumbnailContainer = $('<div>').addClass('thumbnail-container').css({
                                display: 'flex',
                                justifyContent: 'space-between',
                                position: 'absolute',
                                top: '10px',
                                left: '10px',
                                width: '90%', // Kontener zajmuje 90% szeroko≈õci wideo
                                zIndex: '2',
                                pointerEvents: 'auto' // Reaguje na zdarzenia
                            });
                            
                            
srcWordsb.forEach((src, idx) => {
    // Miniatura
    const $thumbnail = $('<img>').attr({
        src: src,
        class: `thumbnail-${idx + 1}` // Klasa z idx+1
    }).css({
        width: '100%', // Miniatura zajmuje ca≈ÇƒÖ szeroko≈õƒá wrappera
        cursor: 'pointer',
        border: '2px solid white',
        borderRadius: '5px',
        boxShadow: '0px 2px 4px rgba(0, 0, 0, 0.3)',
    });
    

const $icons = $('<div></div>').addClass('overlay-icons').css({
    position: 'absolute',
    top: '50%',
    left: '50%',
    transform: 'translate(-50%, -50%)',
    display: 'flex', // Flexbox dla u≈Ço≈ºenia ikon w linii
    flexDirection: 'row', // U≈Ço≈ºenie ikon w poziomie
    alignItems: 'center', // Centrowanie ikon w pionie
    gap: '10px', // Odstƒôp miƒôdzy ikonami
    zIndex: 2,  // Zwiƒôkszamy zIndex, aby ikony by≈Çy nad miniaturƒÖ, ale nie zas≈Çania≈Çy obramowania
    pointerEvents: 'auto' // Zmiana na auto, aby ikony by≈Çy klikalne, je≈õli potrzebujesz
});
    // Ikony
    // Ikona speaker
const $speakerIcon = $('<img>')
  .attr({
    src: 'https://www.arbulang.com/img/play.png',
    alt: 'G≈Ço≈õnik'
  })
  .css({
    width: '18px',
    height: '18px',
    cursor: 'pointer'
  })
  .on('click', function(e) {
    e.stopPropagation(); // Zapobiegamy propagacji klikniƒôcia
    
    // Ustawienie plakatu dla wideo
    $videoElement.attr('poster', src);
    $videoElement[0].load();
    
    console.log('Klikniƒôto speakerIcon dla idx:', idx);

    // Usuwamy wszystkie miniatury, kt√≥re NIE sƒÖ klikniƒôtƒÖ miniaturƒÖ
    $thumbnailContainer.find('img').not(`.thumbnail-${idx + 1}`).remove();

    // Znalezienie klikniƒôtej miniatury i usuniƒôcie samego obrazka
    const $clickedThumbnail = $thumbnailContainer.find(`.thumbnail-${idx + 1}`);
    
    // Tworzymy pusty div zamiast obrazka, aby ramka pozosta≈Ça
    const $emptyFrame = $('<div></div>')
      .css({
        width: $clickedThumbnail.width(),  // Szeroko≈õƒá taka sama jak miniatura
        height: $clickedThumbnail.height(), // Wysoko≈õƒá taka sama jak miniatura
        border: '5px solid white', // Ramka taka sama jak wcze≈õniej
        borderRadius: '5px',
        boxShadow: '0px 2px 4px rgba(0, 0, 0, 0.3)',
        backgroundColor: 'transparent' // Upewniamy siƒô, ≈ºe t≈Ço jest przezroczyste
      });

    // Zamieniamy obrazek na pusty div
    $clickedThumbnail.replaceWith($emptyFrame);

    setTimeout(function () {
      addVideo2bd(idx);
    }, 200);
});
    const $playIcon = $('<img>').attr({
        src: 'https://www.arbulang.com/img/music2.png', // Ikona play
        alt: 'Play'
    }).css({
        width: '20px',
        height: '20px',
        cursor: 'pointer'
    }).on('click', function () {
        // Odtwarzanie wideo po klikniƒôciu playIcon
        addVideo3(idx); // Przekazanie idx zamiast indexDiv
    });

    // Dodaj ikony do kontenera ikon
    $icons.append($speakerIcon, $playIcon);

    // Dodaj miniaturƒô i ikony do kontenera miniatury
    const $thumbnailWrapper = $('<div></div>').css({
        position: 'relative', // Pozycjonowanie wzglƒôdne dla poprawnego overlay
        width: '30%', // Ka≈ºdy wrapper zajmuje 1/3 szeroko≈õci
        overflow: 'hidden' // Zapewnia, ≈ºe overlay nie wychodzi poza miniaturƒô
    }).append($thumbnail, $icons);

    // Obs≈Çuga hover
    $thumbnailWrapper.hover(
        function () {
            $icons.css('display', 'flex'); // Poka≈º ikony
        },
        function () {
            $icons.css('display', 'none'); // Ukryj ikony
        }
    );


    

    // Dodaj wrapper do g≈Ç√≥wnego kontenera
    $thumbnailContainer.append($thumbnailWrapper);

                                function addVideo2bd(idx) {
                                    let initialProgress = 0;
                                    console.log('hej80d', idx);

                                    console.log('hej10a', tablica12ab[0]);
                                    // Sprawd≈∫, czy jeste≈õmy poza zakresem tablicy
                                    if (idx >= srcWords.length && !funkcjaWywolana) {
                                        setTimeout(function () {
                                            $('.progress-bar').remove();
                                        }, 200); // Op√≥≈∫nienie w milisekundach (tu: 200 ms)
                                        przekazArgument0(tablica3[2], undefined, false, tablica3[0], true, true, tablica3[1], tablica3[4]);
                                        console.log("wykonuje siƒô");
                                        funkcjaWywolana = true;
                                    }

                                    // Usu≈Ñ poprzednie wideo
                                    removePreviousVideo();
                                    console.log('hej78', idx);

                                    // Dodaj div z wideo do t≈Ça kontenera
                                    const $vidDiv = $('<div>').addClass('background-video22');

                                    // Utw√≥rz element <video> i ustaw atrybuty
                                    const $videoElement = $('<video>').attr({
                                        'autoplay': true, // Automatyczne odtwarzanie wideo
                                        'muted': true, // Wyciszenie d≈∫wiƒôku wideo
                                        'loop': true // Zapƒôtlenie wideo
                                    });
                                    // Utw√≥rz element <source> dla wideo i ustaw atrybuty
                                    const $sourceElement = $('<source>').attr({
                                        'src': srcWords[idx], // Poprawne u≈ºycie interpolacji
                                        'type': 'video/mp4'     // Typ pliku wideo
                                    });

                                    // Dodaj element source do elementu video
                                    $sourceElement.appendTo($videoElement);

                                    // Dodaj element video do diva dla wideo
                                    $videoElement.appendTo($vidDiv);

                                    // Dodaj element <source> do elementu <video>
                                    // Obs≈Çuga b≈Çƒôdu ≈Çadowania wideo
                                    $videoElement.onerror = function () {
                                        console.error('Nie mo≈ºna za≈Çadowaƒá pliku wideo.');
                                    };
                                    if (idx === 1 || idx === 2) {
                                        function addVideo2bd0(index) {
                                            console.log('hej80dB', idx);

                                            // Usu≈Ñ poprzednie wideo
                                            removePreviousVideo();
                                            console.log('hej78', idx);

                                            // Dodaj div z wideo do t≈Ça kontenera
                                            const $vidDiv = $('<div>').addClass('background-video22');

                                            // Utw√≥rz element <video> i ustaw atrybuty
                                            const $videoElement = $('<video>').attr({
                                                'autoplay': true, // Automatyczne odtwarzanie wideo
                                                'muted': true, // Wyciszenie d≈∫wiƒôku wideo
                                                'loop': true // Zapƒôtlenie wideo
                                            });
                                            // Utw√≥rz element <source> dla wideo i ustaw atrybuty
                                            const $sourceElement = $('<source>').attr({
                                                'src': srcWords[index], // Poprawne u≈ºycie interpolacji
                                                'type': 'video/mp4'     // Typ pliku wideo
                                            });

                                            // Dodaj element source do elementu video
                                            $sourceElement.appendTo($videoElement);

                                            // Dodaj element video do diva dla wideo
                                            $videoElement.appendTo($vidDiv);

                                            // Dodaj element <source> do elementu <video>
                                            // Obs≈Çuga b≈Çƒôdu ≈Çadowania wideo
                                            $videoElement.onerror = function () {
                                                console.error('Nie mo≈ºna za≈Çadowaƒá pliku wideo.');
                                            };

                                            let currentIndexValue = [];
                                            // Oblicz poczƒÖtkowy postƒôp na podstawie wszystkich wcze≈õniejszych wideo


                                            console.log('PoczƒÖtkowy postƒôp dla indeksu:', idx, 'to:', initialProgress);

                                            // Obs≈Çuga za≈Çadowania metadanych wideo
                                            $videoElement.on('loadedmetadata', function () {
                                                const videoDuration = this.duration;
                                                videoDurations[index] = videoDuration;

                                                // Aktualizacja totalDuration, je≈õli jeszcze nie obliczone
                                                if (!totalDuration) {
                                                    totalDuration = videoDurations.reduce((sum, duration) => sum + (duration || 0), 0);
                                                }

                                                tablica12ab.push(videoDuration);
                                                console.log('hej15b', tablica12ab[0]);
                                                // Obs≈Çuga postƒôpu w trakcie odtwarzania wideo

                                            });
                                        }
                                        addVideo2bd0(0);
                                    }
                                    setTimeout(function () {
                                        console.log('hej24bc', tablica12ab[0]);
                                    }, 300); // Op√≥≈∫nienie w milisekundach (tu: 200 ms)
                                    if (idx === 2) {
                                        function addVideo2bd0(idx) {
                                            console.log('hej80dB', idx);

                                            // Usu≈Ñ poprzednie wideo
                                            removePreviousVideo();
                                            console.log('hej78', idx);

                                            // Dodaj div z wideo do t≈Ça kontenera
                                            const $vidDiv = $('<div>').addClass('background-video22');

                                            // Utw√≥rz element <video> i ustaw atrybuty
                                            const $videoElement = $('<video>').attr({
                                                'autoplay': true, // Automatyczne odtwarzanie wideo
                                                'muted': true, // Wyciszenie d≈∫wiƒôku wideo
                                                'loop': true // Zapƒôtlenie wideo
                                            });
                                            // Utw√≥rz element <source> dla wideo i ustaw atrybuty
                                            const $sourceElement = $('<source>').attr({
                                                'src': srcWords[idx], // Poprawne u≈ºycie interpolacji
                                                'type': 'video/mp4'     // Typ pliku wideo
                                            });

                                            // Dodaj element source do elementu video
                                            $sourceElement.appendTo($videoElement);

                                            // Dodaj element video do diva dla wideo
                                            $videoElement.appendTo($vidDiv);

                                            // Dodaj element <source> do elementu <video>
                                            // Obs≈Çuga b≈Çƒôdu ≈Çadowania wideo
                                            $videoElement.onerror = function () {
                                                console.error('Nie mo≈ºna za≈Çadowaƒá pliku wideo.');
                                            };

                                            let currentIndexValue = [];
                                            // Oblicz poczƒÖtkowy postƒôp na podstawie wszystkich wcze≈õniejszych wideo

                                            console.log('PoczƒÖtkowy postƒôp dla indeksu:', idx, 'to:', initialProgress);

                                            // Obs≈Çuga za≈Çadowania metadanych wideo
                                            $videoElement.on('loadedmetadata', function () {
                                                const videoDuration = this.duration;
                                                videoDurations[idx] = videoDuration;

                                                // Aktualizacja totalDuration, je≈õli jeszcze nie obliczone
                                                if (!totalDuration) {
                                                    totalDuration = videoDurations.reduce((sum, duration) => sum + (duration || 0), 0);
                                                }
                                                console.log('hej15', videoDuration);
                                                tablica12ad.push(videoDuration);
                                                tablica12abc[0] = tablica12ab[0] + tablica12ad[0];
                                                // Obs≈Çuga postƒôpu w trakcie odtwarzania wideo

                                            });
                                        }
                                        addVideo2bd0(1);
                                    }

                                    console.log('hej24bci', tablica12ad[0]);
                                    console.log('hej24bcl', tablica12abc[0]);
                                    let currentIndexValue = [];


                                    $videoElement.on('loadedmetadata', function () {
                                        const videoDuration = this.duration;
                                        videoDurations[idx] = videoDuration;
                                        console.log('tablica77', totalDuration);
                                        $videoElement.on('timeupdate', function () {
                                            let adjustedProgress = 0;

                                            adjustedProgress += (this.currentTime / videoDuration) * (videoDurations[idx] / totalDuration) * 100;
                                            console.log('hej22cd', idx);
                                            if (idx === 0) {
                                                let startPosition = 0;  // Przyk≈Çad: start na poczƒÖtku
                                                let startPositionPercentage = (startPosition / totalDuration) * 100; // Przeliczenie na procent
                                                console.log('hej24b1', startPositionPercentage);
                                                updateProgress2(startPositionPercentage, adjustedProgress);
                                            }
                                            if (idx === 1) {
                                                setTimeout(function () {
                                                    let startPosition = tablica12ab[0];  // Przyk≈Çad: start na okre≈õlonej warto≈õci
                                                    let startPositionPercentage = (startPosition / totalDuration) * 100; // Przeliczenie na procent
                                                    console.log('hej24b2', startPositionPercentage);
                                                    updateProgress2(startPositionPercentage, adjustedProgress);
                                                }, 800); // Op√≥≈∫nienie w milisekundach
                                            }
                                            if (idx === 2) {
                                                let startPosition = tablica12abc[0];  // Przyk≈Çad: start na okre≈õlonej warto≈õci
                                                let startPositionPercentage = (startPosition / totalDuration) * 100; // Przeliczenie na procent
                                                console.log('hej24b3', startPositionPercentage);
                                                updateProgress2(startPositionPercentage, adjustedProgress);
                                            }

                                            console.log('hej22cdi', startPosition);
                                            // Sprawd≈∫, czy warto≈õƒá index nie zosta≈Ça jeszcze dodana do tablicy currentIndex
                                            if (!currentIndexValue.includes(idx)) {
                                                // Dodaj index do tablicy currentIndex
                                                currentIndexValue.push(idx);
                                                console.log('hej70', currentIndexValue);

                                                // Wywo≈Çaj funkcjƒô addBackgroundToText tylko raz
                                                if (currentIndexValue[0] === 0 || currentIndexValue[0] === 1 || currentIndexValue[0] === 2) {
                                                    addBackgroundToText(matchingFiszki1, matchingIndexes, currentIndexValue, true, lesson1FirstPartLength, lesson1PartLength, matchingLessons5b);
                                                }
                                            }

                                            // Sprawd≈∫, czy wideo zosta≈Ço zako≈Ñczone
                                            if ($videoElement[0].duration - $videoElement[0].currentTime < 1) {
                                                console.log('Wideo zako≈Ñczone, uruchamiam nastƒôpne.');
                                                // Odtw√≥rz nastƒôpne wideo po zako≈Ñczeniu poprzedniego
                                                addVideo2bd(idx + 1);
                                            }
                                        });
                                    });

                                    addScenes(index);
                                    // Dodaj wideo do kontenera
                                    $vidDiv.appendTo($container);



                                    // Inicjalizacja paska postƒôpu
                                    const $progressBar2 = $('<div>').addClass('progress-bar2');
                                    if (window.matchMedia("(min-width: 999px)").matches) {
                                        $progressBar2.css({
                                            'position': 'absolute',
                                            'z-index': '2',
                                            'bottom': '0',
                                            'height': '7px', // Wysoko≈õƒá paska postƒôpu
                                            'background-color': 'green', // Kolor paska postƒôpu
                                            'margin-bottom': '-2%',
                                            'margin-right': '-4%' // Zapewnienie r√≥wnowagi dla powiƒôkszenia paska postƒôpu
                                        });
                                    } else {
                                        $progressBar2.css({
                                            'position': 'absolute',
                                            'z-index': '2',
                                            'bottom': '0px',
                                            'height': '7px', // Wysoko≈õƒá paska postƒôpu
                                            'background-color': 'green'
                                        });
                                    }
                                    function updateProgress2(startPosition, adjustedProgress) {
                                        console.log('hej122', startPosition);
                                        // Zaktualizuj pasek postƒôpu: szeroko≈õƒá bƒôdzie zale≈ºna od startowej pozycji oraz postƒôpu
                                        $('.progress-bar2').css('left', startPosition + '%'); // Ustawienie lewej krawƒôdzi paska postƒôpu
                                        $('.progress-bar2').css('width', adjustedProgress + '%'); // Ustawienie szeroko≈õci paska postƒôpu
                                    }
                                    $progressBar2.appendTo($container);

                                    function addScenes(index) {
                                        // Sprawd≈∫, czy istnieje element <div> o klasie 'scene-description'
                                        let $sceneDiv = $container.find('.scene-description');

                                        if ($sceneDiv.length) {
                                            // Je≈õli istnieje, wyczy≈õƒá jego zawarto≈õƒá
                                            $sceneDiv.empty();
                                        } else {
                                            // Je≈õli nie istnieje, stw√≥rz nowy element <div>
                                            $sceneDiv = $('<div>').addClass('scene-description').appendTo($container);
                                        }

                                        // Dodaj nowy tekst do <div>
                                        $sceneDiv.text(`Scena z filmu ${srcWords2[index]}`);

                                        if (window.matchMedia("(max-width: 999px)").matches) {
                                            if (indexDiv % 2 === 0) {
                                                console.log('Warunek podzielno≈õci przez 2 spe≈Çniony2');
                                                // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                                $sceneDiv.css({
                                                    'position': 'relative',
                                                    'margin-top': '-140px',
                                                    'margin-left': '-450px',
                                                    'text-align': 'left',
                                                    'background-color': 'orange',
                                                    'z-index': '9999999'
                                                });
                                            } else if (indexDiv % 1 === 0 || indexDiv % 3 === 0 || indexDiv % 5 === 0) {
                                                console.log('Warunek podzielno≈õci przez 1 spe≈Çniony2');
                                                // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                                $sceneDiv.css({
                                                    'position': 'relative',
                                                    'margin-top': '-140px',
                                                    'margin-right': '-20px',
                                                    'text-align': 'left',
                                                    'background-color': 'blue',
                                                    'z-index': '99999999999'
                                                });
                                            }
                                        } else if (window.matchMedia("(min-width: 999px)").matches) {
                                            // Dodatkowe style, je≈õli indexDiv jest podzielny przez 4
                                            if (indexDiv % 4 === 1) {
                                                // Dodaj klasƒô 'scene-description2' do $sceneDiv
                                                $sceneDiv.removeClass('scene-description');
                                                $sceneDiv.addClass('scene-description2');
                                            } else {
                                                // Upewnij siƒô, ≈ºe klasa 'scene-description2' jest usuniƒôta, je≈õli nie jest podzielna przez 4
                                                $sceneDiv.removeClass('scene-description2');
                                            }
                                        }
                                    }
// Tworzenie przycisku "Stop"
                                    if (!stopButtonAdded) {
                                        const $stopButton = $('<img>')
                                                .attr('src', 'https://www.arbulang.com/img/stopok2.png')
                                                .css({
                                                    'display': 'none', // Ukryty na starcie
                                                    'position': 'absolute', // Precyzyjne pozycjonowanie wzglƒôdem kontenera
                                                    'top': '-15px',
                                                    'left': '20px',
                                                    'width': '40px',
                                                    'height': '40px',
                                                    'z-index': '999999',
                                                    'cursor': 'pointer' // Ustawienie kursora jako wska≈∫nik
                                                })
                                                .on('click', function () {
                                                    // Pƒôtla po wszystkich elementach wideo i zatrzymywanie ka≈ºdego z nich
                                                    $('video').each(function () {
                                                        const video = this;
                                                        if (!video.paused) {
                                                            video.pause();
                                                            // Zmie≈Ñ obrazek na "Play"
                                                            $stopButton.attr('src', 'https://www.arbulang.com/img/play.png');
                                                        } else {
                                                            video.play();
                                                            // Zmie≈Ñ obrazek z powrotem na "Stop"
                                                            $stopButton.attr('src', 'https://www.arbulang.com/img/stopok2.png');
                                                        }
                                                    });
                                                });

                                        // Dodanie przycisku do kontenera
                                        $stopButton.appendTo($container);

                                        // Pokazywanie przycisku na hover kontenera
                                        $container.on('mouseover', function () {
                                            $stopButton.show();
                                        });

                                        // Ukrywanie przycisku, gdy mysz opu≈õci kontener
                                        $container.on('mouseout', function () {
                                            $stopButton.hide();
                                        });

                                        stopButtonAdded = true;  // Flaga ustawiona na true, gdy przycisk zosta≈Ç dodany
                                    }
                                }
                            });

                            // Tworzymy element <div> dla nak≈Çadki
                            const $overlay = $('<div>').addClass('overlay');

                            // Tworzymy przycisk w overlay
                            const $buttonb = $('<img>').attr({
                                'src': 'https://www.arbulang.com/img/startsystem.png',
                                'class': 'overlay-button'
                            });
if (window.matchMedia("(max-width: 999px)").matches) {
                                            if (indexDiv % 2 === 0) {
                                                console.log('Warunek podzielno≈õci przez 2 spe≈Çniony2');
                                                // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                                $buttonb.css({
                                'position': 'absolute',
                                'z-index': '1000002',
                                'bottom': '10px',
                                'right': '140px',
                                'width': '20px',
                                'height': '20px',
                                'cursor': 'pointer',
                                'border-radius': '8px'
                                                });
                                            } else if (indexDiv % 2 !== 0) {
                                                console.log('Warunek podzielno≈õci przez 1 spe≈Çniony2');
                                                // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                                $buttonb.css({
                                'position': 'absolute',
                                'z-index': '1000002',
                                'bottom': '10px',
                                'right': '10px',
                                'width': '20px',
                                'height': '20px',
                                'cursor': 'pointer',
                                'border-radius': '8px'
                                                });
                                            }
                                        } else if (window.matchMedia("(min-width: 999px)").matches) {
                                            // Dodatkowe style, je≈õli indexDiv jest podzielny przez 4
                                            if (indexDiv % 4 === 0) {
                                                $buttonb.css({
                                'position': 'absolute',
                                'z-index': '1000002',
                                'bottom': '10px',
                                'right': '10px',
                                'width': '20px',
                                'height': '20px',
                                'cursor': 'pointer',
                                'border-radius': '8px'
                                                });
                                            }
                                        }
                            // Dodajemy elementy do kontenera
                            $container.append($thumbnailContainer); // Miniatury
                            $container.append($videoElement); // Wideo
                            $container.append($overlay); // Nak≈Çadka
                            $container.append($buttonb); // Przycisk w nak≈Çadce
                            // Dodaj funkcjƒô hover do kontenera
                            if (indexDiv < 14) {
                                // Je≈õli indexDiv < 5, dodajemy hover z dynamicznym napisem
                                $container.hover(function () {
                                    $('.overlay', this).css('transform', 'translateX(0)');

                                    // Tw√≥rz nowy dynamiczny div z napisem
                                    const $dynamicDiv = $('<div>').addClass('dynamic-div').text('Lekcja dostƒôpna - otw√≥rz');
                                    // Dodaj dynamiczny div do kontenera
                                    $dynamicDiv.appendTo($(this)).fadeIn(300);
                                }, function () {
                                    $('.overlay', this).css('transform', 'translateX(100%)');

                                    // Usu≈Ñ dynamiczny div po zako≈Ñczeniu hovera
                                    $('.dynamic-div', this).fadeOut(300, function () {
                                        $(this).remove();
                                    });
                                });
                            }
                                                        if (indexDiv < 17 && indexDiv > 13) {
                                // Je≈õli indexDiv < 5, dodajemy hover z dynamicznym napisem
                                $container.hover(function () {
                                    $('.overlay', this).css('transform', 'translateX(0)');

                                    // Tw√≥rz nowy dynamiczny div z napisem
                                    const $dynamicDiv2 = $('<div>').addClass('dynamic-div2').text('Nowa lekcja - ju≈º dostƒôpna');
                                    // Dodaj dynamiczny div do kontenera
                                    $dynamicDiv2.appendTo($(this)).fadeIn(300);
                                }, function () {
                                    $('.overlay', this).css('transform', 'translateX(100%)');

                                    // Usu≈Ñ dynamiczny div po zako≈Ñczeniu hovera
                                    $('.dynamic-div2', this).fadeOut(300, function () {
                                        $(this).remove();
                                    });
                                });
                            }
                                                                                    if (indexDiv < 18 && indexDiv >= 17) {
                                // Je≈õli indexDiv < 5, dodajemy hover z dynamicznym napisem
                                $container.hover(function () {
                                    $('.overlay', this).css('transform', 'translateX(0)');

                                    // Tw√≥rz nowy dynamiczny div z napisem
                                    const $dynamicDiv2 = $('<div>').addClass('dynamic-div3').text('Nowa lekcja - w przygotowaniu');
                                    // Dodaj dynamiczny div do kontenera
                                    $dynamicDiv2.appendTo($(this)).fadeIn(300);
                                }, function () {
                                    $('.overlay', this).css('transform', 'translateX(100%)');

                                    // Usu≈Ñ dynamiczny div po zako≈Ñczeniu hovera
                                    $('.dynamic-div3', this).fadeOut(300, function () {
                                        $(this).remove();
                                    });
                                });
                            }
                            // Je≈õli kontener nie zosta≈Ç jeszcze wybrany, wybierz losowy kontener
                            addBackgroundToText1b(matchingFiszki1, matchingIndexes, true, lesson1PartLength, matchingIndexes2, rodzaj, matchingIndexes3, matchingLessons5b);
                            addBackgroundToText2b(matchingFiszki2, matchingIndexes, true, lesson2PartLength, matchingIndexes2, rodzaj, matchingIndexes3, matchingLessons5b);
                            addBackgroundToText3b(matchingFiszki3, matchingIndexes, true, lesson3PartLength, matchingIndexes2, rodzaj, matchingIndexes3, matchingLessons5b);
                        }
                        setTimeout(function () {
                            addVideo3(0);
                        }, 700);
                    }

                    // Stw√≥rz przycisk za pomocƒÖ jQuery
                    // Tworzenie nowego elementu div za pomocƒÖ jQuery


                    if ((index50 === 0 && buttonindex) || (newIndex === 0 && !buttonindex)) {
                        var $sentenceDivB = $('<div></div>');
                        $sentenceDivB.addClass('sentenceBA'); // Dodanie klasy 'sentence'
                        $sentenceDivB.html(`
${sentence10}${sentence11}<br>
<div class="sentence1b">${sentence1b}</div>
        <div class="sentence1b2">${sentence1b2}</div>
${sentence20}${sentence22}<br>
<div class="sentence1b2a">${sentence1b2a}</div>
<div class="sentence1b22">${sentence1b22}</div>
${sentence30}${sentence33}<br>
        <div class="sentence1c2a">${sentence1c2a}</div>
<div class="sentence1c22">${sentence1c22}</div>
`);
                        $sentenceDivB.css({
                            'position': 'absolute',
                            'margin-top': '40px',
                            'text-align': 'center',
                            'z-index': '100'
                        });
                    } else {
                        var $sentenceDiv = $('<div></div>');
                        $sentenceDiv.addClass('sentence'); // Dodanie klasy 'sentence'
                        $sentenceDiv.html(`
<button class="left-button first-button">+<br></button>
${sentence10}${sentence11}<br>
<div class="sentence1bba">${sentence1bba}</div>
<div class="sentence1bba">${sentence1bbab}</div>
<button class="left-buttonb second-button">+<br></button>
${sentence20}${sentence22}<br>
<div class="sentence1bb1b">${sentence1bb1b}</div>
<div class="sentence1bba2">${sentence1bba2}</div>
<button class="left-buttonbb third-button">+<br></button>
${sentence30}${sentence33}<br>
        <div class="sentence1bb3">${sentence1bb3}</div>
        <div class="sentence1bb1c">${sentence1bb1c}</div>
`);
                        $sentenceDiv.css({
                            'position': 'absolute',
                            'margin-top': '-50px',
                            'text-align': 'center',
                            'z-index': '5'
                        });
                    }
                    const $button = $('<button></button>');
                    $button.addClass('run-button');
                    $button.text('Uruchom'); // Ustawiamy tekst przycisku na 'Uruchom'
                    $button.attr('data-index', indexDiv);
                    $button.on('click', function () {

                        const index5 = $button.attr('data-index');
                        const index55 = parseInt(index5, 10); // Zamieniamy index55 na liczbƒô
                        // Alternatywnie mo≈ºna u≈ºyƒá Number(index55)
                        // const numericIndex = Number(index55);

                        setTimeout(() => {
                            console.log('Klikniƒôto przycisk o indeksie:', index55);
                            przekazArgument0(tablica3[2], index55, true, tablica3[0], true, true, tablica3[1], tablica3[4]);
                        }, 100);
                        // Usuniƒôcie kontenera po wstawieniu nowego
                    });
                    $button.css({
                        'position': 'absolute',
                        'right': '-200px', // Przyk≈Çadowa warto≈õƒá odstƒôpu od lewej krawƒôdzi
                        'top': '5px',
                        'font-size': '10px',
                        'height': '30px',
                        'width': '170px',
                        'color': 'blue',
                        'background-color': 'white',
                        'z-index': '999999' // Ustawienie z-index dla buttona wiƒôksze ni≈º dla sentenceDiv
                    });

                    $container.append($button);
                    const $buttonb2 = $('<button></button>');
                    $buttonb2.addClass('run-button3');
                    $buttonb2.text('Otw√≥rz lekcjƒô w nowym oknie'); // Ustawiamy tekst przycisku na 'Uruchom'
                    // Dodajemy atrybut 'data-index' z warto≈õciƒÖ indexDiv do przycisku

                    $buttonb2.attr('data-index2', indexDiv);
                    $buttonb2.on('click', function () {
                        const $clickedContainer = $container; // Przypisz klikniƒôty kontener do zmiennej

// Dodaj t≈Ço do nieklikniƒôtych kontener√≥w
                        $('.image-container3').not($clickedContainer).each(function () {
                            const $container = $(this);

                            // Dodaj t≈Ço, je≈õli jeszcze nie istnieje
                            if ($container.find('.background-overlay').length === 0) {
                                $('<div>')
                                        .addClass('background-overlay')
                                        .css({
                                            'position': 'absolute',
                                            'top': '0',
                                            'left': '0',
                                            'width': '100%',
                                            'height': '100%',
                                            'background-color': 'blue',
                                            'opacity': '0.35',
                                            'z-index': '1000' // Wy≈ºszy z-index dla t≈Ça, aby by≈Ço na wierzchu
                                        })
                                        .appendTo($container);
                            }
                        });
                        // Usu≈Ñ klasƒô .background-overlay po powrocie na stronƒô
                        $(window).on('pageshow', function () {
                            $('.background-overlay').remove();  // Usuwa wszystkie elementy z klasƒÖ .background-overlay
                            $clickedContainer = null; // Zresetuj klikniƒôty kontener
                        });

                        const index5b2 = $buttonb2.attr('data-index2');
                        const index55b2 = parseInt(index5b2, 10); // Zamieniamy index55 na liczbƒô
                        // Alternatywnie mo≈ºna u≈ºyƒá Number(index55)
                        // const numericIndex = Number(index55);

                        setTimeout(() => {
                            if (index55b2 === 1) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo1angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 2) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo2angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 3) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo3angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 4) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo4angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 5) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo5angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 6) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo6angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 7) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo7angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 8) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo8angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 9) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo9angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 10) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo10angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 11) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo11angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 12) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo12angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 13) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo13angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                                                        if (index55b2 === 14) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo14angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                                                                                    if (index55b2 === 15) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo15angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                                                                                                                if (index55b2 === 16) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo16angielski.html?category=' + encodeURIComponent(globalCategory);
                            }
                        }, 1000);
                        // Usuniƒôcie kontenera po wstawieniu nowego
                    });

                    $container.append($buttonb2);
                    // Dodanie diva z zdaniem do kontenera
                    $container.append($sentenceDiv);
                    $container.append($sentenceDivB);
                    tablica10.push(srcWords);
                    console.log('hej6', tablica10);
// Funkcja kolorujƒÖca buttony w zakresie data-lesson 1-5
function colorButtons() {
    console.log("üìå Sprawdzam wszystkie image-container3...");

    // Iterujemy przez wszystkie kontenery .image-container3
    document.querySelectorAll('.image-container3').forEach((container) => {
        const lessonNumber = parseInt(container.getAttribute('data-lesson'), 10);

        // Sprawdzamy, czy data-lesson mie≈õci siƒô w zakresie 1-5
        if (lessonNumber >= 1 && lessonNumber <= 2) {
            console.log(`‚úîÔ∏è Zakres OK dla data-lesson: ${lessonNumber}`);

            // Znalezienie `sentence`, kt√≥re znajduje siƒô w tym samym rodzicu
            const sentenceDiv = container.querySelector('.sentence');
            console.log(`Znaleziono sentence dla data-lesson ${lessonNumber}:`, sentenceDiv);

            if (sentenceDiv) {
                // Iterowanie po wszystkich przyciskach w .sentence
                sentenceDiv.querySelectorAll('button.left-button').forEach(button => {
                    console.log(`Znaleziono button w sentence:`, button);

                    // Kolorowanie przycisku
                    button.style.backgroundColor = 'blue';
                    console.log(`üé® Pokolorowano button dla data-lesson ${lessonNumber}`);
                });
                                sentenceDiv.querySelectorAll('button.left-buttonb').forEach(button => {
                    console.log(`Znaleziono button w sentence:`, button);

                    // Kolorowanie przycisku
                    button.style.backgroundColor = 'blue';
                    console.log(`üé® Pokolorowano button dla data-lesson ${lessonNumber}`);
                });
                                                sentenceDiv.querySelectorAll('button.left-buttonbb').forEach(button => {
                    console.log(`Znaleziono button w sentence:`, button);

                    // Kolorowanie przycisku
                    button.style.backgroundColor = 'blue';
                    console.log(`üé® Pokolorowano button dla data-lesson ${lessonNumber}`);
                });
            } else {
                console.warn(`‚ùå Nie znaleziono sentence dla data-lesson ${lessonNumber}`);
            }
        } else {
            console.log(`‚ùå Ignorujƒô data-lesson ${lessonNumber}, poza zakresem 1-5`);
        }
    });
}

// Nas≈Çuchiwanie dynamicznych zmian w DOM (dodawanie nowych .image-container3)
const observer = new MutationObserver(() => {
    console.log("üìå Wykryto zmianƒô w DOM, sprawdzam nowe image-container3...");
    colorButtons();
});

// Obserwujemy zmiany w `body` (lub innym kontenerze g≈Ç√≥wnym)
observer.observe(document.body, { childList: true, subtree: true });

// ‚úÖ Uruchamiamy funkcjƒô na start, aby pokolorowaƒá ju≈º istniejƒÖce przyciski
colorButtons();
                }

                // Deklaracja tablicy, kt√≥ra bƒôdzie zawieraƒá wszystkie tablice
            }
            let isVideoPlaying = false;
            const tablica11b = [];

            let tablica13a = [];
            let tablica12b = [];
            let tablica12bu = [];
            let tablica15a = [];
            const fiszkaobject = {
                data: [] // Inicjalizacja tablicy wewnƒÖtrz obiektu
            };
            let tablica24 = [];
            function showCombinedSentenceForLesson2(polski, index50, matchingIndexes, lessonIdToShow1, newIndex, indexDiv, lesson1PartLength) {
                // Tutaj reszta kodu funkcji
                const matchingFiszki1 = fiszki.filter(fiszka => fiszka.id[1] === lessonIdToShow1);
                const matchingFiszki10 = fiszki.filter(fiszka => fiszka.id[1] === lessonIdToShow1);
                console.log('hej10', matchingFiszki10);

                if (matchingFiszki10.length > 0) {
                    const srcWord1 = pobierzSrcWordDlaLekcji(lessonIdToShow1, fiszki);
                    const srcWord10 = pobierzSrcWordDlaLekcji2(lessonIdToShow1, fiszki);
                    const srcWord1b = pobierzSrcWordDlaLekcji3(lessonIdToShow1, fiszki);
                    function pobierzSrcWordDlaLekcji(lessonId, fiszki) {
                        const matchingFiszka = fiszki.find(fiszka => fiszka.id[1] === lessonId);
                        return matchingFiszka ? matchingFiszka.srcWord[0] : null;
                    }
                    function pobierzSrcWordDlaLekcji2(lessonId, fiszki) {
                        const matchingFiszka = fiszki.find(fiszka => fiszka.id[1] === lessonId);
                        return matchingFiszka ? matchingFiszka.srcWordimage : null;
                    }
                    function pobierzSrcWordDlaLekcji3(lessonId, fiszki) {
                        const matchingFiszka = fiszki.find(fiszka => fiszka.id[1] === lessonId);
                        return matchingFiszka ? matchingFiszka.srcWord[1] : null; // Zwracamy srcWord[1] zamiast srcWord
                    }
                    let sentence10 = ""; // Deklaracja zmiennej sentence1 na poziomie lokalnym
                    let sentence11 = "";
                    let sentence1b = "";
                    let sentence1b2 = "";
                    function addBackgroundToText(matchingFiszki1, matchingIndexes, currentIndexValue, aktualny, lesson1PartLength, polski) {
                        setTimeout(function () {
                            sentence10 = "";
                            sentence11 = "";
                            sentence1b = "";
                            sentence1b2 = "";
                            console.log('hej22', polski);
                            console.log('Rozpoczƒôcie funkcji addBackgroundToText');
                            console.log('matchingFiszki1:', matchingFiszki1);
                            console.log('lessonIdToShow1:', lessonIdToShow1);
                            console.log('matchingIndexes:', matchingIndexes);
                            console.log('currentIndexValue:', currentIndexValue);
                            console.log('aktualny:', aktualny);
                            for (let i = 0; i < matchingFiszki1.length; i++) {
                                const fiszka = matchingFiszki1[i];
                                console.log('fiszka:', fiszka);
                                if (!fiszka.sentence1 || fiszka.sentence1.length === 0) {
                                    console.log('fiszka.sentence1 is undefined or empty');
                                    continue; // Je≈õli sentence1 nie istnieje lub jest puste, przejd≈∫ do nastƒôpnej fiszki
                                }

                                // Iteracja przez elementy sentence1
                                for (let ki = 0; ki < fiszka.sentence1.length; ki++) {
                                    let sentencePart = fiszka.sentence1[ki];
                                    console.log('sentencePart5:', sentencePart);
                                    const indexToCheck = i + lesson1PartLength + 1;
                                    console.log('indexToCheck5:', indexToCheck);
                                    if (aktualny) {
                                        if (!matchingIndexes.includes(indexToCheck) && currentIndexValue == 0) {
                                            const spanElement = document.createElement('span');
                                            spanElement.innerHTML = sentencePart; // U≈ºyj innerHTML zamiast textContent
                                            sentencePart = spanElement.outerHTML;
                                        } else if (matchingIndexes.includes(indexToCheck) && currentIndexValue == 0) {
                                            console.log('dzia≈Ça255', matchingIndexes.includes(indexToCheck));
                                            const spanElement = document.createElement('span');
                                            spanElement.innerHTML = sentencePart; // U≈ºyj innerHTML zamiast textContent
                                            if (!spanElement.classList.contains('highlighted-sentence')) {
                                                spanElement.classList.add('yellow');
                                                spanElement.classList.add('highlighted-sentence');
                                            }
                                            sentencePart = spanElement.outerHTML;
                                        } else if (currentIndexValue == 0) {
                                            const spanElement = document.createElement('span');
                                            spanElement.innerHTML = sentencePart; // U≈ºyj innerHTML zamiast textContent
                                            spanElement.classList.add('highlighted-sentence');
                                            sentencePart = spanElement.outerHTML;
                                        } else if (currentIndexValue == 1 && matchingIndexes.includes(indexToCheck)) {
                                            const spanElement = document.createElement('span');
                                            spanElement.innerHTML = sentencePart; // U≈ºyj innerHTML zamiast textContent
                                            spanElement.classList.remove('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            sentencePart = spanElement.outerHTML;
                                        }
                                    }

                                    console.log('sentencePart po przetworzeniu:', sentencePart); // Dodaj log po przetworzeniu
                                    sentence10 += sentencePart + " ";
                                }
                            }
                            console.log('final sentence10:', sentence10); // Dodaj log dla ostatecznego wyniku


                            for (let ii = 0; ii < matchingFiszki1.length; ii++) {
                                const fiszka = matchingFiszki1[ii];
                                console.log('fiszka2:', fiszka);
                                if (!fiszka.sentence2 || fiszka.sentence2.length === 0) {
                                    console.log('fiszka.sentence2 is undefined or empty');
                                    continue;
                                }

                                // Iteracja przez elementy sentence1
                                for (let kii = 0; kii < fiszka.sentence2.length; kii++) {
                                    let sentencePart2 = fiszka.sentence2[kii];
                                    console.log('sentencePart5:', sentencePart2);
                                    const indexToCheck = ii + lesson1PartLength + 1;
                                    console.log('indexToCheck77:', indexToCheck);
                                    if (aktualny) {
                                        if (!matchingIndexes.includes(indexToCheck) && currentIndexValue == 0) {
                                            console.log('hej678', pulpitstartowy);
                                            const spanElement = document.createElement('span');
                                            spanElement.innerHTML = sentencePart2; // U≈ºyj innerHTML zamiast textContent
                                            sentencePart2 = spanElement.outerHTML;
                                        } else if (matchingIndexes.includes(indexToCheck) && currentIndexValue == 0) {
                                            console.log('dzia≈Ça22', indexToCheck);
                                            const spanElement = document.createElement('span');
                                            spanElement.innerHTML = sentencePart2;
                                            if (!spanElement.classList.contains('highlighted-sentence')) {
                                                spanElement.classList.add('yellow');
                                                spanElement.classList.add('highlighted-sentence');
                                            }
                                            sentencePart2 = spanElement.outerHTML;
                                        } else if (currentIndexValue == 0) {
                                            const spanElement = document.createElement('span');
                                            spanElement.innerHTML = sentencePart2;
                                            spanElement.classList.add('highlighted-sentence');
                                            sentencePart2 = spanElement.outerHTML;
                                        } else if (currentIndexValue == 1 && matchingIndexes.includes(indexToCheck)) {
                                            const spanElement = document.createElement('span');
                                            spanElement.innerHTML = sentencePart2;
                                            spanElement.classList.remove('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            sentencePart2 = spanElement.outerHTML;
                                        }
                                    }

                                    console.log('sentencePart2 po przetworzeniu:', sentencePart2);
                                    sentence11 += sentencePart2 + " ";
                                }
                            }
                            // Iteracja przez elementy sentence1

                            // Iteracja przez matchingFiszki2 dla sentence2

                            for (let li = 0; li < matchingFiszki1.length; li++) {
                                const fiszka = matchingFiszki1[li];
                                console.log('fiszka:', fiszka);
                                let sentencePart333 = fiszka.translateb;
                                console.log('sentencePart333:', sentencePart333);
                                if (aktualny) {
                                    // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                    const spanElement = document.createElement('span');
                                    spanElement.textContent = sentencePart333;
                                    sentencePart333 = spanElement.outerHTML;
                                }
                                sentence1b += sentencePart333 + " ";
                            }
                            if (sentence1b === "") {
                                let sentencePart333 = fiszka.translateb ? fiszka.translateb : "";
                                sentence1b += sentencePart333 + " ";
                            }
                            for (let li = 0; li < matchingFiszki1.length; li++) {
                                const fiszka = matchingFiszki1[li];
                                console.log('fiszka:', fiszka);
                                let sentencePart333B = fiszka.translate;
                                console.log('sentencePart333:', sentencePart333B);
                                if (aktualny) {
                                    // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                    const spanElement = document.createElement('span');
                                    spanElement.textContent = sentencePart333B;
                                    sentencePart333B = spanElement.outerHTML;
                                }
                                sentence1b2 += sentencePart333B + " ";
                            }
                            if (sentence1b2 === "") {
                                let sentencePart333B = fiszka.translate ? fiszka.translate : "";
                                sentence1b2 += sentencePart333B + " ";
                            }
                            // Dodanie tre≈õci do diva wraz z przyciskiem

                            $sentenceDivB.html(`
${sentence10}${sentence11}<br>
<div class="sentence1b">${sentence1b}</div>
<div class="sentence1b2">${sentence1b2}</div>
`);

                            if ($sentence1b.css('display') === 'none') {
                                // Pokazujemy zdanie .sentence1bb
                                $sentence1b.css('display', 'block');
                                $sentence1b.css({
                                    'position': 'relative'
                                });
                            }
                        }, 0);
                    }

                    let sentence1bba = "";
                    let sentence1bbab = "";
                    function addBackgroundToText1b(matchingFiszki1, matchingIndexes, aktualny, lesson1PartLength, polski) {
                        console.log('hejkk10', indexDiv);
                        $(document).ready(function () {
                            sentence1bba = "";
                            sentence1bbab = "";
                            setTimeout(() => {
                                for (let i = 0; i < matchingFiszki1.length; i++) {
                                    const fiszka = matchingFiszki1[i];
                                    console.log('fiszka:', fiszka);
                                    if (!fiszka.sentence1 || fiszka.sentence1.length === 0) {
                                        console.log('fiszka.sentence1 is undefined or empty');
                                        continue; // Je≈õli sentence1 nie istnieje lub jest puste, przejd≈∫ do nastƒôpnej fiszki
                                    }

                                    // Iteracja przez elementy sentence1
                                    for (let ki = 0; ki < fiszka.sentence1.length; ki++) {
                                        let sentencePart = fiszka.sentence1[ki];
                                        console.log('sentencePart5:', sentencePart);
                                        const indexToCheck = i + lesson1PartLength + 1;
                                        console.log('indexToCheck5:', indexToCheck);
                                        // Sprawd≈∫, czy indeks jest r√≥wny 0
                                        if (aktualny) {
                                            if (matchingIndexes.includes(indexToCheck)) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart = spanElement.outerHTML;
                                            }
                                        }

                                        sentence10 += sentencePart + " ";
                                    }
                                }
                                for (let ii = 0; ii < matchingFiszki1.length; ii++) {
                                    const fiszka = matchingFiszki1[ii];
                                    console.log('fiszka2:', fiszka);
                                    if (!fiszka.sentence2 || fiszka.sentence2.length === 0) {
                                        console.log('fiszka.sentence2 is undefined or empty');
                                        continue;
                                    }

                                    // Iteracja przez elementy sentence1
                                    for (let kii = 0; kii < fiszka.sentence2.length; kii++) {
                                        let sentencePart2 = fiszka.sentence2[kii];
                                        console.log('sentencePart5:', sentencePart2);
                                        const indexToCheck = ii + lesson1PartLength + 1;
                                        console.log('indexToCheck77:', indexToCheck);
                                        if (aktualny) {
                                            if (matchingIndexes.includes(indexToCheck)) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart2;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart2 = spanElement.outerHTML;
                                            }
                                        }
                                        sentence11 += sentencePart2 + " ";
                                    }
                                }
                                for (let li = 0; li < matchingFiszki1.length; li++) {
                                    const fiszka = matchingFiszki1[li];
                                    console.log('fiszka:', fiszka);
                                    let sentencePart3 = fiszka.translateb;
                                    console.log('sentencePart3:', sentencePart3);
                                    if (aktualny) {
                                        // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                        const spanElement = document.createElement('span');
                                        spanElement.textContent = sentencePart3;
                                        sentencePart3 = spanElement.outerHTML;

                                    }
                                    sentence1bba += sentencePart3 + " ";
                                }
                                for (let li = 0; li < matchingFiszki1.length; li++) {
                                    const fiszka = matchingFiszki1[li];
                                    console.log('fiszka:', fiszka);
                                    let sentencePart3 = fiszka.translate;
                                    console.log('sentencePart3:', sentencePart3);
                                    if (aktualny) {
                                        // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                        const spanElement = document.createElement('span');
                                        spanElement.textContent = sentencePart3;
                                        sentencePart3 = spanElement.outerHTML;

                                    }
                                    sentence1bbab += sentencePart3 + " ";
                                }

                                console.log('hej20', sentence1bba);

                                $sentenceDiv.html(`
${sentence10}${sentence11}<br>
<div class="sentence1bba">${sentence1bba}</div>
<div class="sentence1bbab">${sentence1bbab}</div>
`);

                                console.log('hej465', polski);
                                $sentence1bba.css({
                                    'top': '0px',
                                    'position': 'relative'
                                });
                                $sentence1bbab.css({
                                    'top': '40px',
                                    'position': 'relative'
                                });

                            }, 300);
                        });
                        console.log('Zawarto≈õƒá zmiennej sentence1:', sentence1b); // Wy≈õwietlenie zawarto≈õci zmiennej sentence1                          
                    }



                    const $container = $('<div></div>'); // Tworzymy nowy element div za pomocƒÖ jQuery
                    $container.addClass('image-container4'); // Dodajemy klasƒô do nowego diva
                    $container.css('position', 'relative'); // Ustawiamy pozycjƒô diva na relative

                    // Mo≈ºesz r√≥wnie≈º dodaƒá dodatkowe atrybuty, takie jak 'data-lesson'
                    $container.attr('data-lesson', indexDiv);
                    $('.grid-container').append($container);


                    let tablica11c = [];

                    const srcWords = [srcWord1];
                    console.log('hej2', srcWords);
                    const srcWords2 = [srcWord1b];
                    console.log('hej2', srcWords2);
                    const srcWordimage = [srcWord10];
                    console.log('hej2', srcWordimage);
                    let videoDurations = [];
                    let totalDuration = 0;
                    for (let i = 0; i < srcWords.length; i++) {
                        const video = document.createElement('video');
                        video.src = srcWords[i];
                        video.addEventListener('loadedmetadata', function () {
                            totalDuration += this.duration;
                            console.log('tablica8', totalDuration);
                            console.log('dzia≈Ça5');
                        });
                    }
                    console.log('hej');
                    console.log('tablica11', videoDurations);
                    function removePreviousVideo() {
                        const previousVideo = $container.find('video'); // Poprawne odwo≈Çanie do poprzedniego wideo
                        if (previousVideo.length > 0) {
                            previousVideo.remove(); // Usuniƒôcie poprzedniego wideo z kontenera
                        }
                    }

                    let currentVideoElement = null;
                    const activeVideos = [];
                    let initialFiszkaContainer = null; // Zmienna przechowujƒÖca kontener fiszki
                    if (newIndex === 0 && !buttonindex) {
                        isVideoPlaying = true;
                        console.log('hej3331', buttonindex);
                        let stopButtonAdded = false;
                        let funkcjaWywolana = false;
                        // Definiowanie funkcji do sprawdzania widoczno≈õci wideo
                        function isVideoVisible(videoElement) {
                            const containerRect = videoElement.getBoundingClientRect();
                            return (
                                    containerRect.top >= 0 &&
                                    containerRect.left >= 0 &&
                                    containerRect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                                    containerRect.right <= (window.innerWidth || document.documentElement.clientWidth)
                                    );
                        }
                        function addVideo1(index) {
                            // Sprawd≈∫, czy jeste≈õmy poza zakresem tablicy
                            if (index >= srcWords.length && !funkcjaWywolana) {
                                isVideoPlaying = false;
                                countVisibleContainers();
                                funkcjaWywolana = true;
                                przekazArgument0(tablica3[2], undefined, false, tablica3[0], true, true, tablica3[1], tablica3[4]);
                                console.log("wykonuje siƒô");
                            }
                            // Usu≈Ñ poprzednie wideo
                            removePreviousVideo();
                            console.log('hej78', index);
                            const $vidDiv = $('<div>').addClass('background-video');
                            // Utw√≥rz element <video> i ustaw atrybuty
                            const $videoElement = $('<video>').attr({
                                'autoplay': true, // Automatyczne odtwarzanie wideo
                                'muted': true, // Wyciszenie d≈∫wiƒôku wideo
                                'loop': true // Zapƒôtlenie wideo
                            });
                            activeVideos.push($videoElement[0]);
                            console.log('hej121', activeVideos);

                            // Utw√≥rz element <source> dla wideo i ustaw atrybuty
                            const $sourceElement = $('<source>').attr({
                                'src': srcWords[index], // Poprawne u≈ºycie interpolacji
                                'type': 'video/mp4'     // Typ pliku wideo
                            });

                            // Dodaj element source do elementu video
                            $sourceElement.appendTo($videoElement);
                            // Dodaj element video do diva dla wideo
                            $videoElement.appendTo($vidDiv);
                            // Dodaj element <source> do elementu <video>

                            // Obs≈Çuga b≈Çƒôdu ≈Çadowania wideo
                            $videoElement.onerror = function () {
                                console.error('Nie mo≈ºna za≈Çadowaƒá pliku wideo.');
                            };
                            let currentIndexValue = [];

                            // Funkcja obs≈Çugi zdarzenia loadedmetadata
                            $videoElement.on('loadedmetadata', function () {

                                const videoDuration = this.duration;
                                videoDurations[index] = videoDuration;
                                console.log('tablica77', totalDuration);
                                // Uruchomienie funkcji countVisibleContainers co 2 sekundy

                                $videoElement.on('timeupdate', function () {

                                    let adjustedProgress = 0;
                                    for (let i = 0; i < index; i++) {
                                        adjustedProgress += (videoDurations[i] / totalDuration) * 100;
                                    }
                                    adjustedProgress += (this.currentTime / videoDuration) * (videoDurations[index] / totalDuration) * 100;
                                    updateProgress(adjustedProgress);
                                    console.log('hej786', index);
                                    // Sprawd≈∫, czy warto≈õƒá index nie zosta≈Ça jeszcze dodana do tablicy currentIndex
                                    if (!currentIndexValue.includes(index)) {
                                        // Dodaj index do tablicy currentIndex
                                        currentIndexValue.push(index);
                                        console.log('hej70', currentIndexValue);
                                        // Wywo≈Çaj funkcjƒô addBackgroundToText tylko raz
                                        if (currentIndexValue[0] === 0) {
                                            addBackgroundToText(matchingFiszki1, matchingIndexes, currentIndexValue, true, lesson1PartLength, polski);
                                        }
                                    }


                                    // Sprawd≈∫, czy wideo zosta≈Ço zako≈Ñczone
                                    if ($videoElement[0].duration - $videoElement[0].currentTime < 1) {
                                        console.log('Wideo zako≈Ñczone, uruchamiam nastƒôpne.');
                                        // Odtw√≥rz nastƒôpne wideo po zako≈Ñczeniu poprzedniego
                                        addVideo1(index + 1);
                                        updateProgress(0);
                                    }
                                });
                            });
                            addScenes(index);
                            // Dodaj div z wideo do t≈Ça kontenera
                            $vidDiv.appendTo($container);
                            function updateProgress(progress) {
                                // Aktualizuj pasek postƒôpu na dole kontenera
                                $('.progress-bar').css('width', progress + '%');
                            }

                            // Inicjalizacja paska postƒôpu
                            const $progressBar = $('<div>').addClass('progress-bar');
                            $progressBar.css({
                                'position': 'absolute',
                                'z-index': '2',
                                'bottom': '0',
                                'left': '0',
                                'height': '5px', // Wysoko≈õƒá paska postƒôpu
                                'background-color': '#007bff', // Kolor paska postƒôpu
                                'width': '140%', // Delikatne powiƒôkszenie paska postƒôpu o 2% w ka≈ºdym kierunku
                                'margin-bottom': '-2%',
                                'margin-left': '-4%',
                                'margin-right': '-4%'// Zapewnienie r√≥wnowagi dla powiƒôkszenia paska postƒôpu
                            });
// Funkcja dodajƒÖca nowe elementy <div>
                                function addScenes(index) {
                                    // Sprawd≈∫, czy istnieje element <div> o klasie 'scene-description'
                                    let $sceneDiv = $container.find('.scene-description');

                                    if ($sceneDiv.length) {
                                        // Je≈õli istnieje, wyczy≈õƒá jego zawarto≈õƒá
                                        $sceneDiv.empty();
                                    } else {
                                        // Je≈õli nie istnieje, stw√≥rz nowy element <div>
                                        $sceneDiv = $('<div>').addClass('scene-description').appendTo($container);
                                    }

                                    // Dodaj nowy tekst do <div>
                                    $sceneDiv.text(`Scena z filmu ${srcWords2[index]}`);

                                    if (window.matchMedia("(max-width: 999px)").matches) {
                                        if (indexDiv % 2 === 0) {
                                            console.log('Warunek podzielno≈õci przez 2 spe≈Çniony2');
                                            // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                            $sceneDiv.css({
                                                'position': 'relative',
                                                'margin-top': '-140px',
                                                'margin-left': '-450px',
                                                'text-align': 'left',
                                                'background-color': 'orange',
                                                'z-index': '9999999'
                                            });
                                        } else if (indexDiv % 1 === 0 || indexDiv % 3 === 0 || indexDiv % 5 === 0) {
                                            console.log('Warunek podzielno≈õci przez 1 spe≈Çniony2');
                                            // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                            $sceneDiv.css({
                                                'position': 'relative',
                                                'margin-top': '-140px',
                                                'margin-right': '-20px',
                                                'text-align': 'left',
                                                'background-color': 'blue',
                                                'z-index': '99999999999'
                                            });
                                        }
                                    }
                                }
                            // Tworzenie przycisku "Stop"
                            if (!stopButtonAdded) {
                                const $stopButton = $('<img>')
                                        .attr('src', 'https://www.arbulang.com/img/stopok2.png')
                                        .css({
                                            'display': 'none', // Ukryty na starcie
                                            'position': 'absolute', // Precyzyjne pozycjonowanie wzglƒôdem kontenera
                                            'top': '-15px',
                                            'left': '20px',
                                            'width': '40px',
                                            'height': '40px',
                                            'z-index': '999999',
                                            'cursor': 'pointer' // Ustawienie kursora jako wska≈∫nik
                                        })
                                        .on('click', function () {
                                            // Pƒôtla po wszystkich elementach wideo i zatrzymywanie ka≈ºdego z nich
                                            $('video').each(function () {
                                                const video = this;
                                                if (!video.paused) {
                                                    video.pause();
                                                    // Zmie≈Ñ obrazek na "Play"
                                                    $stopButton.attr('src', 'https://www.arbulang.com/img/play.png');
                                                } else {
                                                    video.play();
                                                    // Zmie≈Ñ obrazek z powrotem na "Stop"
                                                    $stopButton.attr('src', 'https://www.arbulang.com/img/stopok2.png');
                                                }
                                            });
                                        });

                                // Dodanie przycisku do kontenera
                                $stopButton.appendTo($container);

                                // Pokazywanie przycisku na hover kontenera
                                $container.on('mouseover', function () {
                                    $stopButton.show();
                                });

                                // Ukrywanie przycisku, gdy mysz opu≈õci kontener
                                $container.on('mouseout', function () {
                                    $stopButton.hide();
                                });

                                stopButtonAdded = true;  // Flaga ustawiona na true, gdy przycisk zosta≈Ç dodany
                            }
                        }
                        setTimeout(function () {
                            addVideo1(0);
                        }, 0);
                    } else if (index50 === 0 && buttonindex) {
                        let stopButtonAdded = false;
                        console.log('hej3331', buttonindex);
                        let funkcjaWywolana2 = false;
                        function addVideo2(index) {
                            console.log('hej80', index);
                            // Sprawd≈∫, czy jeste≈õmy poza zakresem tablicy
                            if (index >= srcWords.length && !funkcjaWywolana2) {
                                setTimeout(function () {
                                    $('.progress-bar').remove();
                                }, 200); // Op√≥≈∫nienie w milisekundach (tu: 1 sekunda)
                                buttonindex = false;
                                przekazArgument0(tablica3[2], undefined, false, tablica3[0], true, true, tablica3[1], tablica3[4]);
                                console.log("wykonuje siƒô");
                                funkcjaWywolana2 = true;
                            }
                            // Usu≈Ñ poprzednie wideo
                            removePreviousVideo();
                            console.log('hej78', index);
                            const $vidDiv = $('<div>').addClass('background-video');
                            // Utw√≥rz element <video> i ustaw atrybuty
                            const $videoElement = $('<video>').attr({
                                'autoplay': true, // Automatyczne odtwarzanie wideo
                                'muted': true, // Wyciszenie d≈∫wiƒôku wideo
                                'loop': true // Zapƒôtlenie wideo
                            });
                            // Dodaj klasƒô CSS zale≈ºnie od indeksu wideo
                            if (index === 0) {
                                $videoElement.addClass('scaled-video');
                            } else {
                                $videoElement.addClass('next-video');
                            }
                            // Utw√≥rz element <source> dla wideo i ustaw atrybuty
                            const $sourceElement = $('<source>').attr({
                                'src': srcWords[index], // Poprawne u≈ºycie interpolacji
                                'type': 'video/mp4'     // Typ pliku wideo
                            });
                            // Dodaj element source do elementu video
                            $sourceElement.appendTo($videoElement);
                            // Dodaj element video do diva dla wideo
                            $videoElement.appendTo($vidDiv);
                            // Dodaj element <source> do elementu <video>

                            // Obs≈Çuga b≈Çƒôdu ≈Çadowania wideo
                            $videoElement.onerror = function () {
                                console.error('Nie mo≈ºna za≈Çadowaƒá pliku wideo.');
                            };
                            let currentIndexValue = [];
                            // Funkcja obs≈Çugi zdarzenia loadedmetadata
                            $videoElement.on('loadedmetadata', function () {
                                const videoDuration = this.duration;
                                videoDurations[index] = videoDuration;
                                console.log('tablica77', totalDuration);
                                $videoElement.on('timeupdate', function () {
                                    let adjustedProgress = 0;
                                    for (let i = 0; i < index; i++) {
                                        adjustedProgress += (videoDurations[i] / totalDuration) * 100;
                                    }
                                    adjustedProgress += (this.currentTime / videoDuration) * (videoDurations[index] / totalDuration) * 100;
                                    updateProgress(adjustedProgress);
                                    console.log('hej78', index);
                                    // Sprawd≈∫, czy warto≈õƒá index nie zosta≈Ça jeszcze dodana do tablicy currentIndex
                                    if (!currentIndexValue.includes(index)) {
                                        // Dodaj index do tablicy currentIndex
                                        currentIndexValue.push(index);
                                        console.log('hej70', currentIndexValue);
                                        // Wywo≈Çaj funkcjƒô addBackgroundToText tylko raz
                                        if (currentIndexValue[0] === 0) {
                                            setTimeout(() => {
                                                addBackgroundToText(matchingFiszki1, matchingIndexes, currentIndexValue, true, lesson1PartLength, polski);
                                            }, 300);
                                        }
                                    }

                                    // Sprawd≈∫, czy wideo zosta≈Ço zako≈Ñczone
                                    if ($videoElement[0].duration - $videoElement[0].currentTime < 1) {
                                        console.log('Wideo zako≈Ñczone, uruchamiam nastƒôpne.');
                                        // Odtw√≥rz nastƒôpne wideo po zako≈Ñczeniu poprzedniego
                                        addVideo2(index + 1);
                                        updateProgress(0);
                                    }
                                });
                            });
                                                        addScenes(index);
                            // Dodaj div z wideo do t≈Ça kontenera
                            $vidDiv.appendTo($container);
                            function updateProgress(progress) {
                                // Aktualizuj pasek postƒôpu na dole kontenera
                                $('.progress-bar').css('width', progress + '%');
                            }

                            // Inicjalizacja paska postƒôpu
                            const $progressBar = $('<div>').addClass('progress-bar');
                            $progressBar.css({
                                'position': 'absolute',
                                'z-index': '2',
                                'bottom': '0',
                                'left': '0',
                                'height': '5px', // Wysoko≈õƒá paska postƒôpu
                                'background-color': '#007bff', // Kolor paska postƒôpu
                                'width': '140%', // Delikatne powiƒôkszenie paska postƒôpu o 2% w ka≈ºdym kierunku
                                'margin-bottom': '-2%',
                                'margin-left': '-4%',
                                'margin-right': '-4%'// Zapewnienie r√≥wnowagi dla powiƒôkszenia paska postƒôpu
                            });
                            $progressBar.appendTo($container);
                                                            function addScenes(index) {
                                    // Sprawd≈∫, czy istnieje element <div> o klasie 'scene-description'
                                    let $sceneDiv = $container.find('.scene-description');

                                    if ($sceneDiv.length) {
                                        // Je≈õli istnieje, wyczy≈õƒá jego zawarto≈õƒá
                                        $sceneDiv.empty();
                                    } else {
                                        // Je≈õli nie istnieje, stw√≥rz nowy element <div>
                                        $sceneDiv = $('<div>').addClass('scene-description').appendTo($container);
                                    }

                                    // Dodaj nowy tekst do <div>
                                    $sceneDiv.text(`Scena z filmu ${srcWords2[index]}`);

                                    if (window.matchMedia("(max-width: 999px)").matches) {
                                        if (indexDiv % 2 === 0) {
                                            console.log('Warunek podzielno≈õci przez 2 spe≈Çniony2');
                                            // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                            $sceneDiv.css({
                                                'position': 'relative',
                                                'margin-top': '-140px',
                                                'margin-left': '-450px',
                                                'text-align': 'left',
                                                'background-color': 'orange',
                                                'z-index': '9999999'
                                            });
                                        } else if (indexDiv % 1 === 0 || indexDiv % 3 === 0 || indexDiv % 5 === 0) {
                                            console.log('Warunek podzielno≈õci przez 1 spe≈Çniony2');
                                            // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                            $sceneDiv.css({
                                                'position': 'relative',
                                                'margin-top': '-140px',
                                                'margin-right': '-20px',
                                                'text-align': 'left',
                                                'background-color': 'blue',
                                                'z-index': '99999999999'
                                            });
                                        }
                                    }
                                }
                            // Tworzenie przycisku "Stop"
                            if (!stopButtonAdded) {
                                const $stopButton = $('<img>')
                                        .attr('src', 'https://www.arbulang.com/img/stopok2.png')
                                        .css({
                                            'display': 'none', // Ukryty na starcie
                                            'position': 'absolute', // Precyzyjne pozycjonowanie wzglƒôdem kontenera
                                            'top': '-15px',
                                            'left': '20px',
                                            'width': '40px',
                                            'height': '40px',
                                            'z-index': '999999',
                                            'cursor': 'pointer' // Ustawienie kursora jako wska≈∫nik
                                        })
                                        .on('click', function () {
                                            // Pƒôtla po wszystkich elementach wideo i zatrzymywanie ka≈ºdego z nich
                                            $('video').each(function () {
                                                const video = this;
                                                if (!video.paused) {
                                                    video.pause();
                                                    // Zmie≈Ñ obrazek na "Play"
                                                    $stopButton.attr('src', 'https://www.arbulang.com/img/play.png');
                                                } else {
                                                    video.play();
                                                    // Zmie≈Ñ obrazek z powrotem na "Stop"
                                                    $stopButton.attr('src', 'https://www.arbulang.com/img/stopok2.png');
                                                }
                                            });
                                        });

                                // Dodanie przycisku do kontenera
                                $stopButton.appendTo($container);

                                // Pokazywanie przycisku na hover kontenera
                                $container.on('mouseover', function () {
                                    $stopButton.show();
                                });

                                // Ukrywanie przycisku, gdy mysz opu≈õci kontener
                                $container.on('mouseout', function () {
                                    $stopButton.hide();
                                });

                                stopButtonAdded = true;  // Flaga ustawiona na true, gdy przycisk zosta≈Ç dodany
                            }
                        }
                        setTimeout(function () {
                            addVideo2(0);
                        }, 0);
                    } else {
                        function addVideo3(index) {
                            // Upewnij siƒô, ≈ºe istnieje tablica dla podanego indexDiv w obiekcie currentIndexFiszkaMap

                            // Utw√≥rz element <video> i ustaw atrybuty
                            const $videoElement = $('<video>').attr({
                                'muted': true, // Wyciszenie d≈∫wiƒôku wideo
                                'loop': true, // Zapƒôtlenie wideo
                                'style': 'z-index: 1',
                                'poster': srcWordimage[index] // Dodanie plakatu do wideo
                            });
                            // Utw√≥rz element <div> dla nak≈Çadki
                            const $overlay = $('<div>').addClass('overlay');
                            const $buttonb = $('<img>').attr({
                                'src': 'https://www.arbulang.com/img/startsystem.png', // Wzglƒôdna ≈õcie≈ºka do pliku PNG
                                'class': 'overlay-button' // Klasa dla styl√≥w CSS
                            });
                            if (window.matchMedia("(max-width: 999px)").matches) {
                                            if (indexDiv % 2 === 0) {
                                                console.log('Warunek podzielno≈õci przez 2 spe≈Çniony2');
                                                // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                                $buttonb.css({
                                'position': 'absolute',
                                'z-index': '1000002',
                                'bottom': '10px',
                                'right': '140px',
                                'width': '20px',
                                'height': '20px',
                                'cursor': 'pointer',
                                'border-radius': '8px'
                                                });
                                            } else if (indexDiv % 2 !== 0) {
                                                console.log('Warunek podzielno≈õci przez 1 spe≈Çniony2');
                                                // Zmie≈Ñ CSS paska napisu, aby wy≈õwietla≈Ç siƒô po lewej stronie kontenera
                                                $buttonb.css({
                                'position': 'absolute',
                                'z-index': '1000002',
                                'bottom': '10px',
                                'right': '10px',
                                'width': '20px',
                                'height': '20px',
                                'cursor': 'pointer',
                                'border-radius': '8px'
                                                });
                                            }
                                        } else if (window.matchMedia("(min-width: 999px)").matches) {
                                            // Dodatkowe style, je≈õli indexDiv jest podzielny przez 4
                                            if (indexDiv % 4 === 0) {
                                                $buttonb.css({
                                'position': 'absolute',
                                'z-index': '1000002',
                                'bottom': '10px',
                                'right': '10px',
                                'width': '20px',
                                'height': '20px',
                                'cursor': 'pointer',
                                'border-radius': '8px'
                                                });
                                            }
                                        }
                            // Dodaj element video do diva dla wideo
                            $videoElement.appendTo($container);
                            // Dodaj nak≈Çadkƒô do kontenera, po dodaniu wideo
                            $overlay.appendTo($container);
                            // Dodaj przycisk do nak≈Çadki
                            $buttonb.appendTo($container);

                            if (indexDiv < 34) {
                                // Je≈õli indexDiv < 5, dodajemy hover z dynamicznym napisem
                                $container.hover(function () {
                                    $('.overlay', this).css('transform', 'translateX(0)');

                                    // Tw√≥rz nowy dynamiczny div z napisem
                                    const $dynamicDiv = $('<div>').addClass('dynamic-div').text('Lekcja dostƒôpna - otw√≥rz');
                                    // Dodaj dynamiczny div do kontenera
                                    $dynamicDiv.appendTo($(this)).fadeIn(300);
                                }, function () {
                                    $('.overlay', this).css('transform', 'translateX(100%)');

                                    // Usu≈Ñ dynamiczny div po zako≈Ñczeniu hovera
                                    $('.dynamic-div', this).fadeOut(300, function () {
                                        $(this).remove();
                                    });
                                });
                            }
                                                                                    if (indexDiv < 51 && indexDiv > 48) {
                                // Je≈õli indexDiv < 5, dodajemy hover z dynamicznym napisem
                                $container.hover(function () {
                                    $('.overlay', this).css('transform', 'translateX(0)');

                                    // Tw√≥rz nowy dynamiczny div z napisem
                                    const $dynamicDiv2 = $('<div>').addClass('dynamic-div2').text('Nowa lekcja - ju≈º dostƒôpna');
                                    // Dodaj dynamiczny div do kontenera
                                    $dynamicDiv2.appendTo($(this)).fadeIn(300);
                                }, function () {
                                    $('.overlay', this).css('transform', 'translateX(100%)');

                                    // Usu≈Ñ dynamiczny div po zako≈Ñczeniu hovera
                                    $('.dynamic-div2', this).fadeOut(300, function () {
                                        $(this).remove();
                                    });
                                });
                            }
// Ustal szeroko≈õci przycisk√≥w
                            const startSystemWidth = 30; // Szeroko≈õƒá startsystem
                            const quickLessonWidth = 95; // Szeroko≈õƒá przycisku "Szybka lekcja"

                            // Obs≈Çuga klikniƒôcia przycisku overlay
                            $buttonb.on('click', function () {
    $('.run-button3').css({
        'margin-top': '65px'
    });
                                // Dodaj kopiƒô warto≈õci indexDiv do tablicy
                                // Przyk≈Çad nowej warto≈õci indexDiv
                                let nowaWartosc = indexDiv;

                                // Sprawd≈∫, czy warto≈õƒá ju≈º nie istnieje w tablicy (opcjonalnie)
                                if (!tablica11b.includes(nowaWartosc)) {
                                    tablica11b.push(nowaWartosc); // Dodaj nowƒÖ warto≈õƒá na ko≈Ñcu tablicy
                                    console.log('Dodano warto≈õƒá:', nowaWartosc);
                                    console.log('Dodano warto≈õƒá:', tablica11b);
                                } else {
                                    console.log('Warto≈õƒá ju≈º istnieje w tablicy:', nowaWartosc);
                                }

                                let ostatniElement2 = tablica11b[tablica11b.length - 2];

                                let ostatniElement3 = tablica12b[tablica12b.length - 1];
                                console.log('hej55h', ostatniElement3);
                                console.log('hej55h+', ostatniElement2);
                                setTimeout(() => {
                                    showFiszkiForLesson6(ostatniElement2, ostatniElement3);
                                }, 0);
                                $('video').each(function () {
                                    const video = this;
                                    if (!video.paused) {
                                        video.pause(); // Wstrzymaj wideo
                                        console.log('Wideo zatrzymane:', video);
                                    }
                                });
                                console.log('index44bc', indexDiv);
                                console.log('Button clicked');

                                // Utw√≥rz nowy przycisk "Szybka lekcja"
                                const $loadButton = $('<button>')
                                        .text('Szybka lekcja')
                                        .addClass('slide-button')
                                        .on('click', function () {
                                            // Pƒôtla po wszystkich elementach wideo i zatrzymywanie ka≈ºdego z nich
                                            $('video').each(function () {
                                                const video = $(this).get(0); // Pobiera element wideo jako obiekt DOM
                                                if (video && !video.paused) {
                                                    video.pause();
                                                }
                                            });
                                        });
                                // Funkcja zatrzymujƒÖca wszystkie wideo w activeVideos

                                $loadButton.css({
                                    'position': 'absolute',
                                    'bottom': '10px',
                                    'right': '30px', // PoczƒÖtkowa pozycja przycisku na prawo od kontenera
                                    'width': '120px', // Szeroko≈õƒá przycisku
                                    'height': '30px',
                                    'cursor': 'pointer',
                                    'border-radius': '8px',
                                    'background-color': 'green', // Kolor przycisku
                                    'color': 'white',
                                    'display': 'block', // Pokazuje przycisk od razu
                                    'z-index': '1000001', // Z-index wiƒôkszy ni≈º startsystem
                                    'text-align': 'left', // Wyr√≥wnanie tekstu do lewej (je≈õli to potrzebne)
                                    'overflow': 'hidden' // Ukrywa nadmiar tekstu
                                }).appendTo($container); // Dodaj do kontenera

                                // Animacja: zwijanie przycisku "Szybka lekcja" w lewo
                                $loadButton.animate({
                                    width: '0px', // Zmniejszenie szeroko≈õci do 0
                                    right: '10px'
                                }, {
                                    duration: 1500, // Czas trwania animacji
                                    complete: function () {
                                        $(this).remove(); // Opcjonalnie: usu≈Ñ przycisk po zako≈Ñczeniu animacji
                                    }
                                });
                                // Utw√≥rz nowy przycisk "Szybka lekcja"
                                const $newButton = $('<button>').text('Wybierz s≈Çowo').addClass('slide-button');
                                $newButton.css({
                                    'position': 'absolute',
                                    'bottom': '35px',
                                    'right': '30px',
                                    'width': '120px',
                                    'height': '30px',
                                    'cursor': 'pointer',
                                    'border-radius': '8px',
                                    'background-color': 'blue',
                                    'color': 'white',
                                    'display': 'block',
                                    'z-index': '1000000' // Bardzo wysoki z-index, aby by≈Ç nad innymi elementami
                                });
                                $newButton.appendTo($container);

                                // Animacja: chowanie przycisku "Szybka lekcja" w lewo
                                $newButton.animate({
                                    right: '-110px'
                                }, 500, function () {
                                    console.log('Szybka lekcja button hidden');
                                });
                                // Sprawd≈∫, czy kontener ma odpowiedni z-index i position
                                $container.css({
                                    'position': 'relative', // Ustawienie position na relative, aby z-index dzia≈Ça≈Ç
                                    'z-index': '1000003'
                                });

                                highlightFirstWord(indexDiv);

                                console.log('hej44f', tablica24[tablica24.length - 1]);
                            });


                            function highlightFirstWord(indexDiv) {
    const $container = $(`.image-container4[data-lesson="${indexDiv}"]`);
$(`.image-container4`).css('z-index', 100); // Reset z-index dla wszystkich
$container.css('z-index', 102); // Podniesienie z-index tylko dla aktywnego
    if (matchingFiszki1.length > 0) {
        const $sentence10 = $container.find('.sentenceBB');
        const $sentence11 = $container.find('.sentence11');
        const $sentence1bba = $container.find('.sentence1bba');
                                

        if ($sentence10.length > 0 || $sentence11.length > 0 || $sentence1bba.length > 0) {
            let sentenceText = $sentence10.html();
            let sentenceText2 = $sentence1bba.html();
            let tempDiv = document.createElement('div');
            tempDiv.innerHTML = sentenceText;
            let words = tempDiv.innerText.split(' ');

            if (words.length > 0) {
                let firstWord = words[0];
                let secondWord = words[1] || '';
                let thirdWord = words[2] || '';
                let forthWord = words[3] || '';
                let fifthWord = words[4] || '';
                let sixthWord = words[5] || '';

                let highlightedSpan = `<span class="highlighted">${firstWord}</span>`;
                let highlightedSpan2 = `<span class="highlighted" style="display:none;">${secondWord}</span>`;
                let highlightedSpan3 = `<span class="highlighted" style="display:none;">${thirdWord}</span>`;
                let highlightedSpan4 = `<span class="highlighted" style="display:none;">${forthWord}</span>`;
                let highlightedSpan5 = `<span class="highlighted" style="display:none;">${fifthWord}</span>`;
                let highlightedSpan6 = `<span class="highlighted" style="display:none;">${sixthWord}</span>`;

                let button1 = `<button class="prev-button" id="prev-button">&lt;</button>`;
                let button2 = `<button class="next-button" id="next-button">&gt;</button>`;

                $sentence10.html(`
                    ${button1} 
                    <span class="word-span" style="cursor: pointer;">${highlightedSpan}</span> 
                    <span class="word-span" style="cursor: pointer;">${secondWord}</span> 
                    <span class="word-span" style="cursor: pointer;">${thirdWord}</span> 
                    <span class="word-span" style="cursor: pointer;">${forthWord}</span> 
                    <span class="word-span" style="cursor: pointer;">${fifthWord}</span> 
                    <span class="word-span" style="cursor: pointer;">${sixthWord}</span>
                    ${button2}
                    <br>
                    <div class="sentence1bba">${sentenceText2}</div>
                `);
$("<style>")
  .prop("type", "text/css")
  .html(".word-span:hover { background-color: #2ecc71; }")
  .appendTo("head");

                        let currentWordIndex = 0; // Indeks s≈Çowa, kt√≥re ma byƒá wy≈õwietlane

// Funkcja obs≈ÇugujƒÖca klikniƒôcia na s≈Çowa, przyjmujƒÖca clickedIndex
function handleWordClick(clickedIndex, indexDiv, matchingFiszki1) {
    console.log("Przekazano clickedIndex:", clickedIndex);

    // Pod≈õwietlenie klikniƒôtego s≈Çowa na sta≈Çe
    $('.word-span').removeClass('highlighted');
    $('.word-span').eq(clickedIndex).addClass('highlighted'); // Pod≈õwietlenie wed≈Çug clickedIndex

    // Zaktualizuj currentHighlightIndex na clickedIndex
    currentHighlightIndex = clickedIndex;
    console.log("Aktualny indeks pod≈õwietlenia:", currentHighlightIndex);

    // Wywo≈Çaj funkcjƒô wy≈õwietlania fiszek
    showFiszkiForLesson5(indexDiv, fiszki, clickedIndex, matchingFiszki1);

}
                        const $wordContainer = $('<div>').attr('id', 'wordDisplay').css({
                        }).appendTo($container);
                        let ostatniElement2 = tablica11b[tablica11b.length - 2];
console.log('hej55', ostatniElement2);
    // Sprawd≈∫, czy element 'wordDisplay' ju≈º istnieje
// Sprawd≈∫, czy element 'wordDisplay' ju≈º istnieje w odpowiednim kontenerze
if (ostatniElement2) {
    // Znajd≈∫ kontener na podstawie data-lesson
    const $container = $(`.image-container4[data-lesson="${ostatniElement2}"]`);
    
    // Szukamy 'wordDisplay' w tym kontenerze
    const $wordContainer = $container.find('#wordDisplay');
    
    // Je≈õli 'wordDisplay' istnieje, wykonaj co≈õ z tym elementem
    if ($wordContainer.length > 0) {
        console.log('Znaleziono wordDisplay:', $wordContainer);
        
        // Tutaj mo≈ºesz wykonaƒá akcje na $wordContainer, np. przesuniƒôcie
        $wordContainer.css({
            'right': '0px', // Przesu≈Ñ w lewo
            'transition': 'right 0.5s ease' // Animacja
        });
    } else {
        console.log('wordDisplay nie znaleziono w kontenerze');
    }
} else {
    console.log('Brak ostatniego elementu w tablica11b');
}

// Obs≈Çuga klikniƒôcia na indexDiv
$('.indexDiv').on('click', function () {
    const indexDiv = $(this).data('lesson'); // Pobierz atrybut data-lesson dla klikniƒôtego indexDiv
    handleIndexDivClick(indexDiv); // Wywo≈Çaj funkcjƒô przesuwania 'wordDisplay'
});
                        const $currentWordDisplay = $('<span>').appendTo($wordContainer);
    function updateWordDisplay2(currentWordIndex) {
        let fiszka = matchingFiszki1[currentFiszkaIndex];
        console.log('hej11', fiszka);
        if (fiszka && fiszka.sentence1) {
            const currentWord = fiszka.sentence1[currentWordIndex] || "";
            $currentWordDisplay.text(currentWord); // Aktualizujemy tylko tekst w osobnym elemencie
        } else if (fiszka && fiszka.sentence2) {
            const currentWord = fiszka.sentence2[currentWordIndex] || "";
            $currentWordDisplay.text(currentWord); // Aktualizujemy tylko tekst w osobnym elemencie
        }
    }
// Deklaracja clickedIndex jako zmiennej globalnej
let clickedIndex;

// Dodanie zdarzenia click
$(document).on('click', '.word-span', function() {
    const clickedWord = $(this).text();
    console.log("Klikniƒôto:", clickedWord);

    // Ustalanie clickedIndex dla klikniƒôtego s≈Çowa
    clickedIndex = words.indexOf(clickedWord);
    console.log('hej341', clickedIndex);
    updateHighlight($sentence10, clickedIndex, firstWord, secondWord, thirdWord, forthWord, fifthWord, sixthWord);
    // Wywo≈Çanie handleWordClick z clickedIndex
    handleWordClick(clickedIndex, indexDiv, matchingFiszki1);
});
function showFiszkiForLesson5(indexDiv, fiszki, currentFiszkaIndex, matchingFiszki1) {
    console.log('≈Åaduje siƒô');
    console.log('Obecny indeks fiszki:', currentFiszkaIndex);

if (currentFiszkaIndex >= 0 && currentFiszkaIndex < matchingFiszki1.length) {

        // Pobierz jednƒÖ fiszkƒô na podstawie currentFiszkaIndex
        const fiszka = matchingFiszki1[currentFiszkaIndex];
            const fiszkaBlock = generateFiszkaBlock2(fiszka, indexDiv);
        

    }
    return fiszkaBlock;
}

let currentHighlightIndex = 0; // Indeks pod≈õwietlenia

let displayWordsIndex = 0; // Indeks do wy≈õwietlania s≈Ç√≥w (mo≈ºna dostosowaƒá w zale≈ºno≈õci od wymaga≈Ñ)


// Obs≈Çuga klikniƒôcia na "next"
function handleNextClick(indexDiv, $sentence10, currentFiszkaIndex, firstWord, secondWord, thirdWord, forthWord, fifthWord, sixthWord) {
    // Sprawd≈∫, czy mo≈ºemy zwiƒôkszyƒá indeks pod≈õwietlenia
        console.log('hej55d', currentFiszkaIndex);
        updateHighlight(indexDiv, $sentence10, currentFiszkaIndex, firstWord, secondWord, thirdWord, forthWord, fifthWord, sixthWord);
                currentFiszkaIndex++;

        }
function handleNextClick2(indexDiv, $sentence10, currentFiszkaIndex, firstWord, secondWord, thirdWord, forthWord, fifthWord, sixthWord) {
    // Sprawd≈∫, czy mo≈ºemy zwiƒôkszyƒá indeks pod≈õwietlenia
        console.log('hej55d', currentFiszkaIndex);
        updateHighlight(indexDiv, $sentence10, currentFiszkaIndex, firstWord, secondWord, thirdWord, forthWord, fifthWord, sixthWord);
                currentFiszkaIndex--;

        }


function updateHighlight(indexDiv, $sentence10, index, firstWord, secondWord, thirdWord, forthWord, fifthWord, sixthWord) {
    const words = [firstWord, secondWord, thirdWord, forthWord, fifthWord, sixthWord];

    // Generuj pod≈õwietlone s≈Çowa
    const highlightedWords = words.map((word, i) => {
        return i === index
            ? `<span class="highlighted word-span" data-index="${i}" style="cursor: pointer;">${word}</span>`
            : `<span class="word-span" data-index="${i}" style="cursor: pointer;">${word}</span>`;
    });

    // Zaktualizuj HTML dla $sentence10
    $sentence10.html(`
        <button class="prev-button" id="prev-button">&lt;</button>
        ${highlightedWords.join(' ')}
        <button class="next-button" id="next-button">&gt;</button>
    `);

    // Obs≈Çuga zdarze≈Ñ klikniƒôcia s≈Ç√≥w
    $sentence10.find('.word-span').off('click').on('click', function () {
        const clickedIndex = $(this).data('index');


        // Wywo≈Çanie funkcji obs≈Çugi klikniƒôcia
        handleWordClick(clickedIndex, indexDiv, matchingFiszki1);

        // Ponowne zaktualizowanie pod≈õwietlenia
        updateHighlight($sentence10, index, firstWord, secondWord, thirdWord, forthWord, fifthWord, sixthWord);
    });
}


                                                
                // Funkcja displayWords przyjmuje teraz currentWordIndex
                function displayWords(nowy, indexDiv) {
                                console.log('index66', indexDiv);
                    console.log('hej4433', currentWordIndex);
       let currentFiszkaIndex = 0;

currentFiszkaIndex = nowy;

                        const $prevButton = $('<button>')
                            .text('<')
                            .attr('id', 'prev-button') 
                            .addClass('prev-button')
                            .css({
                            'position': 'absolute',
                            'left': '-20px',
                            'width': '30px',
                            'height': '30px',
                            'cursor': 'pointer',
                            'z-index': '1000001'
                        }).appendTo($wordContainer);

                        const $nextButton = $('<button>')
                            .text('>')
                            .attr('id', 'next-button') 
                            .addClass('next-button')
                            .css({
                                'position': 'absolute',
                                'right': '-20px',
                                'width': '30px',
                                'height': '30px',
                                'cursor': 'pointer',
                                'z-index': '1000001'
                            }).appendTo($wordContainer);

                        $prevButton.on('click', function() {
    console.log('Aktualny index fiszki:', currentFiszkaIndex);
    console.log('Dostƒôpne fiszki:', matchingFiszki1.length);

    if (currentFiszkaIndex <= matchingFiszki1.length - 1) {
        currentFiszkaIndex--; // Zwiƒôksz indeks fiszki
        $(`.image-container4`).css('z-index', 100); // Reset z-index dla wszystkich
$container.css('z-index', 102); // Podniesienie z-index tylko dla aktywnego
                        let ostatniElement2 = tablica11b[tablica11b.length - 2];
console.log('hej55', ostatniElement2);
    // Sprawd≈∫, czy element 'wordDisplay' ju≈º istnieje
// Sprawd≈∫, czy element 'wordDisplay' ju≈º istnieje w odpowiednim kontenerze
if (ostatniElement2) {
    // Znajd≈∫ kontener na podstawie data-lesson
    const $container = $(`.image-container4[data-lesson="${ostatniElement2}"]`);
    
    // Szukamy 'wordDisplay' w tym kontenerze
    const $wordContainer = $container.find('#wordDisplay');
    
    // Je≈õli 'wordDisplay' istnieje, wykonaj co≈õ z tym elementem
    if ($wordContainer.length > 0) {
        console.log('Znaleziono wordDisplay:', $wordContainer);
        
        // Tutaj mo≈ºesz wykonaƒá akcje na $wordContainer, np. przesuniƒôcie
        $wordContainer.css({
            'right': '0px', // Przesu≈Ñ w lewo
            'transition': 'right 0.5s ease' // Animacja
        });
    } else {
        console.log('wordDisplay nie znaleziono w kontenerze');
    }
} else {
    console.log('Brak ostatniego elementu w tablica11b');
}
                                                        tablica12b.push(currentFiszkaIndex);
                                                        console.log('hej68cx', fiszkaobject);
let indeks5; // Zainicjalizuj zmiennƒÖ przed warunkami
if (currentFiszkaIndex < 4) {
    indeks5 = tablica12b[tablica12b.length - 2];
} else if (currentFiszkaIndex === 4) {
    indeks5 = 5;
}
                                                        console.log('hej555', indeks5);
                                                        handleNextClick2(indexDiv, $sentence10, currentFiszkaIndex, firstWord, secondWord, thirdWord, forthWord, fifthWord, sixthWord);
                                                        wybierzRodzaj2b('all', indeks5, matchingFiszki1, indexDiv);
                                                        updateWordDisplay(currentWordIndex, indexDiv);
                                                        
console.log("indexDiv2", tablica12b);
        console.log('hej68c', currentFiszkaIndex);
    } else {
        console.log('Koniec fiszek!'); // Informacja o ko≈Ñcu fiszek
    }
                        });
                        if (currentFiszkaIndex === 0) {
                          tablica12b.push(0);  
                        }

                    console.log('hej26', tablica12b);
$nextButton.on('click', function () {
                                                    console.log('Aktualny index fiszki:', indexDiv);
                                                    console.log('Dostƒôpne fiszki:', matchingFiszki1);
                                                                                                            
                                                    console.log('hej303b', fiszkaobject);
                                                    if (currentFiszkaIndex <= matchingFiszki1.length - 1) {
                                                        currentFiszkaIndex++; // Zwiƒôksz indeks fiszki
$(`.image-container4`).css('z-index', 100); // Reset z-index dla wszystkich
$container.css('z-index', 102); // Podniesienie z-index tylko dla aktywnego

                                    console.log('Dodano warto≈õƒá33:', tablica11b);
                                                                                                            // Sprawd≈∫, czy `indexDiv` ju≈º istnieje w `fiszkaobject.data`
                                                    const existingIndex = fiszkaobject.data.findIndex(
                                                            (entry) => entry[0] === indexDiv
                                                    );

                                                    if (existingIndex !== -1) {
                                                        // Je≈õli istnieje, zastƒÖp warto≈õƒá
                                                        fiszkaobject.data[existingIndex] = [indexDiv, currentFiszkaIndex];
                                                    } else {
                                                        // Je≈õli nie istnieje, dodaj nowƒÖ tablicƒô
                                                        fiszkaobject.data.push([indexDiv, currentFiszkaIndex]);
                                                    }

                                                    // Sprawd≈∫, czy `indexDiv` ju≈º istnieje w `fiszkaobject.data`
                                                    const existingIndex2 = fiszkaobject.data.findIndex(
                                                            (entry) => entry[0] === indexDiv
                                                    );

                                                    if (existingIndex2 !== -1) {
                                                        // Je≈õli istnieje, zaktualizuj `currentFiszkaIndex`
                                                        fiszkaobject.data[existingIndex2][1] = currentFiszkaIndex;
                                                        console.log('hej303bb', currentFiszkaIndex);

                                                        console.log('hej303bbx', fiszkaobject.data[existingIndex2][1]);
                                                    } else {
                                                        // Je≈õli nie istnieje, dodaj nowƒÖ tablicƒô
                                                        fiszkaobject.data.push([indexDiv, currentFiszkaIndex]);
                                                    }
                                                    tablica12b.push(currentFiszkaIndex);
                                setTimeout(() => {
                                                        wybierzRodzaj2('all', currentFiszkaIndex, matchingFiszki1, indexDiv);
                                }, 800);

                                                                                                                console.log('hej68cx', currentFiszkaIndex);
                                                        handleNextClick(indexDiv, $sentence10, currentFiszkaIndex, firstWord, secondWord, thirdWord, forthWord, fifthWord, sixthWord);

                                                        updateWordDisplay(currentWordIndex, indexDiv);
                                                        // Wywo≈Çaj funkcjƒô, przekazujƒÖc zaktualizowany indeks
                                                        console.log("indexDiv2", tablica12b);
                                                    } else {
                                                        console.log('Koniec fiszek!'); // Informacja o ko≈Ñcu fiszek
                                                    }
                                                });

    function updateWordDisplay(currentWordIndex) {
        const fiszka = matchingFiszki1[currentFiszkaIndex];
        console.log('hej11d', fiszka);
        if (fiszka && fiszka.sentence1) {
            const currentWord = fiszka.sentence1[currentWordIndex] || "";
            $currentWordDisplay.text(currentWord); // Aktualizujemy tylko tekst w osobnym elemencie
        } else if (fiszka && fiszka.sentence2) {
            const currentWord = fiszka.sentence2[currentWordIndex] || "";
            $currentWordDisplay.text(currentWord); // Aktualizujemy tylko tekst w osobnym elemencie
        }
    }
                                                                                            console.log('hej444b', currentFiszkaIndex);
                                                                                            setTimeout(() => {

                                                                                        if (currentFiszkaIndex === 0) {
console.log("indexDiv2x", currentFiszkaIndex);
                                                                                            let indeks55x; // Zainicjalizuj zmiennƒÖ przed warunkami
if (currentFiszkaIndex === 0 || currentFiszkaIndex > 0) {
    indeks55x = currentFiszkaIndex;

                                                    wybierzRodzaj2c('all', indeks55x, matchingFiszki1, indexDiv);
                                                                            updateWordDisplay(currentWordIndex);
                                                                            }
                                                }
                                                                                }, 300);
                                                    updateWordDisplay(currentWordIndex);
                                                // Obs≈Çuga klikniƒôcia na `#wordDisplay`
$wordContainer.on('click', function () {
                const $container = $(`.image-container4[data-lesson="${indexDiv}"]`);
$(`.image-container4`).css('z-index', 100); // Reset z-index dla wszystkich
$container.css('z-index', 104); // Podniesienie z-index tylko dla aktywnego
                            let ostatniElement2 = tablica11b[tablica11b.length - 1];
console.log('hej55aa', ostatniElement2);
wybierzRodzaj2c('all', currentFiszkaIndex, matchingFiszki1, indexDiv);
    // Sprawd≈∫, czy element 'wordDisplay' ju≈º istnieje
// Sprawd≈∫, czy element 'wordDisplay' ju≈º istnieje w odpowiednim kontenerze
if (ostatniElement2 && indexDiv !== ostatniElement2) {
    // Znajd≈∫ kontener na podstawie data-lesson
    const $container = $(`.image-container4[data-lesson="${ostatniElement2}"]`);
    
    // Szukamy 'wordDisplay' w tym kontenerze
    const $wordContainer = $container.find('#wordDisplay');
    
    // Je≈õli 'wordDisplay' istnieje, wykonaj co≈õ z tym elementem
    if ($wordContainer.length > 0) {
        console.log('Znaleziono wordDisplay5:', $wordContainer);
        
        // Tutaj mo≈ºesz wykonaƒá akcje na $wordContainer, np. przesuniƒôcie
        $wordContainer.css({
            'right': '0px', // Przesu≈Ñ w lewo
            'transition': 'right 0.5s ease' // Animacja
        });
    } else {
        console.log('wordDisplay nie znaleziono w kontenerze');
    }
}
});


// Wywo≈Çaj funkcjƒô z podanƒÖ kategoriƒÖ
function wybierzRodzaj2(category, currentFiszkaIndex, matchingFiszki1, indexDiv) {

    console.log("Wybrany rodzaj s≈Çownictwa: ", currentFiszkaIndex);

    const matchingLessons = [];

    // Sprawdzenie, czy kategoria to 'all'
    if (category === 'all') {
        // Dodaj wszystkie lekcje do matchingLessons
        for (const fiszka of fiszki) {
            console.log(`Przetwarzanie fiszki: ${JSON.stringify(fiszka)}`);
            // Sprawdzanie, czy fiszka ma poprawne id
            if (fiszka.id && fiszka.id[1]) {
                // Sprawdzanie, czy id ju≈º jest w matchingLessons, aby uniknƒÖƒá duplikat√≥w
                if (!matchingLessons.includes(fiszka.id[1])) {
                    matchingLessons.push(fiszka.id[1]);
                }
                console.log('hej134b', matchingLessons);
            }
        }
    } else {
        // Iteracja przez fiszki
        for (const fiszka of fiszki) {
            console.log(`Przetwarzanie fiszki: ${JSON.stringify(fiszka)}`);
            if (fiszka.category !== 'all') {
                // Sprawdzenie, czy fiszka pasuje do zadanej kategorii
                const isInCategory2 = fiszka.category2 && fiszka.category2.includes(category);
                const isInCategory3 = fiszka.category3 && fiszka.category3.includes(category);

                // Je≈õli fiszka pasuje do zadanej kategorii, dodaj numer lekcji do tablicy matchingLessons
                if (isInCategory2 || isInCategory3) {
                    console.log(`Znaleziono fiszkƒô z kategoriƒÖ "${category}" w lekcji ${JSON.stringify(fiszka)}`);
                    if (fiszka.id && fiszka.id[1]) {
                        matchingLessons.push(fiszka.id[1]);
                    }
                }
            }
        }
    }
    
    console.log('hej222', matchingLessons);

    if (matchingLessons.length > 0) {
        const nextThreeLessons = matchingLessons.slice(0, 1);
        console.log('Wy≈õwietlanie kolejnych trzech lekcji:');
        nextThreeLessons.forEach(lessonId => {
            showFiszkiForLesson5(indexDiv, fiszki, currentFiszkaIndex, matchingFiszki1);
            console.log('hej68ll', currentFiszkaIndex);
        });
    } else {
        console.log(`Nie znaleziono fiszek z kategoriƒÖ "${category}".`);
    }
}

// Wywo≈Çaj funkcjƒô z podanƒÖ kategoriƒÖ
function wybierzRodzaj2b(category, indeks5, matchingFiszki1, indexDiv) {

    console.log("Wybrany rodzaj s≈Çownictwa: ", currentFiszkaIndex);

    const matchingLessons = [];

    // Sprawdzenie, czy kategoria to 'all'
    if (category === 'all') {
        // Dodaj wszystkie lekcje do matchingLessons
        for (const fiszka of fiszki) {
            console.log(`Przetwarzanie fiszki: ${JSON.stringify(fiszka)}`);
            // Sprawdzanie, czy fiszka ma poprawne id
            if (fiszka.id && fiszka.id[1]) {
                // Sprawdzanie, czy id ju≈º jest w matchingLessons, aby uniknƒÖƒá duplikat√≥w
                if (!matchingLessons.includes(fiszka.id[1])) {
                    matchingLessons.push(fiszka.id[1]);
                }
                console.log('hej134b', matchingLessons);
            }
        }
    } else {
        // Iteracja przez fiszki
        for (const fiszka of fiszki) {
            console.log(`Przetwarzanie fiszki: ${JSON.stringify(fiszka)}`);
            if (fiszka.category !== 'all') {
                // Sprawdzenie, czy fiszka pasuje do zadanej kategorii
                const isInCategory2 = fiszka.category2 && fiszka.category2.includes(category);
                const isInCategory3 = fiszka.category3 && fiszka.category3.includes(category);

                // Je≈õli fiszka pasuje do zadanej kategorii, dodaj numer lekcji do tablicy matchingLessons
                if (isInCategory2 || isInCategory3) {
                    console.log(`Znaleziono fiszkƒô z kategoriƒÖ "${category}" w lekcji ${JSON.stringify(fiszka)}`);
                    if (fiszka.id && fiszka.id[1]) {
                        matchingLessons.push(fiszka.id[1]);
                    }
                }
            }
        }
    }
    
    console.log('hej222', matchingLessons);

    if (matchingLessons.length > 0) {
        const nextThreeLessons = matchingLessons.slice(0, 1);
        console.log('Wy≈õwietlanie kolejnych trzech lekcji:');
        nextThreeLessons.forEach(lessonId => {
            showFiszkiForLesson5b(indexDiv, fiszki, indeks5, matchingFiszki1);
            console.log('hej68ll', currentFiszkaIndex);
        });
    } else {
        console.log(`Nie znaleziono fiszek z kategoriƒÖ "${category}".`);
    }
}
function wybierzRodzaj2c(category, indeks5, matchingFiszki1, indexDiv) {

    console.log("Wybrany rodzaj s≈Çownictwa: ", currentFiszkaIndex);

    const matchingLessons = [];

    // Sprawdzenie, czy kategoria to 'all'
    if (category === 'all') {
        // Dodaj wszystkie lekcje do matchingLessons
        for (const fiszka of fiszki) {
            console.log(`Przetwarzanie fiszki: ${JSON.stringify(fiszka)}`);
            // Sprawdzanie, czy fiszka ma poprawne id
            if (fiszka.id && fiszka.id[1]) {
                // Sprawdzanie, czy id ju≈º jest w matchingLessons, aby uniknƒÖƒá duplikat√≥w
                if (!matchingLessons.includes(fiszka.id[1])) {
                    matchingLessons.push(fiszka.id[1]);
                }
                console.log('hej134b', matchingLessons);
            }
        }
    } else {
        // Iteracja przez fiszki
        for (const fiszka of fiszki) {
            console.log(`Przetwarzanie fiszki: ${JSON.stringify(fiszka)}`);
            if (fiszka.category !== 'all') {
                // Sprawdzenie, czy fiszka pasuje do zadanej kategorii
                const isInCategory2 = fiszka.category2 && fiszka.category2.includes(category);
                const isInCategory3 = fiszka.category3 && fiszka.category3.includes(category);

                // Je≈õli fiszka pasuje do zadanej kategorii, dodaj numer lekcji do tablicy matchingLessons
                if (isInCategory2 || isInCategory3) {
                    console.log(`Znaleziono fiszkƒô z kategoriƒÖ "${category}" w lekcji ${JSON.stringify(fiszka)}`);
                    if (fiszka.id && fiszka.id[1]) {
                        matchingLessons.push(fiszka.id[1]);
                    }
                }
            }
        }
    }
    
    console.log('hej222', matchingLessons);

    if (matchingLessons.length > 0) {
        const nextThreeLessons = matchingLessons.slice(0, 1);
        console.log('Wy≈õwietlanie kolejnych trzech lekcji:');
        nextThreeLessons.forEach(lessonId => {
            showFiszkiForLesson5c(indexDiv, fiszki, indeks5, matchingFiszki1);
            console.log('hej68ll', currentFiszkaIndex);
        });
    } else {
        console.log(`Nie znaleziono fiszek z kategoriƒÖ "${category}".`);
    }
}

function showFiszkiForLesson5(indexDiv, fiszki, currentFiszkaIndex, matchingFiszki1) {
    console.log('≈Åaduje siƒô');
    console.log('Obecny indeks fiszki:', currentFiszkaIndex);
        

    if (currentFiszkaIndex > 0 && currentFiszkaIndex < matchingFiszki1.length) {
        if (matchingFiszki1.length > 0) {
            let id = matchingFiszki1[currentFiszkaIndex - 1].id;
            console.log('hej2x', id);
            let parametr = '';
            // Sprawd≈∫, czy id jest tablicƒÖ
            if (Array.isArray(id)) {
                // Po≈ÇƒÖcz warto≈õci z tablicy id w jeden ciƒÖg znak√≥w oddzielony przecinkami
                id = id.slice(0, 3).join(',');
                // Obs≈Çuga ewentualnego dodatkowego parametru (np. czwartego elementu w tablicy)
                if (id.length > 3) {
                    parametr = matchingFiszki1[currentFiszkaIndex].id[3]; // Pobierz czwarty element z tablicy
                }
            }
// Tworzenie klasy CSS
const className = `fiszka-${id}${parametr ? ',' + parametr : ''}`;
const selector = `.${className.replace(/,/g, '\\,')}`;
console.log('Usuwam fiszkƒô o klasie5:', className);
// Znalezienie i usuniƒôcie diva z klasƒÖ `className`
let $divToRemove = $(selector);
if ($divToRemove.length) {  // Sprawdza, czy element istnieje
    $divToRemove.remove();   // Usuwa ca≈Çy div z DOM
}
                // Pobierz jednƒÖ fiszkƒô na podstawie currentFiszkaIndex
            const fiszka = matchingFiszki1[currentFiszkaIndex];
            console.log('≈Åadowana fiszka:', selector);
            const fiszkaBlock = generateFiszkaBlock2(fiszka, indexDiv);
            return fiszkaBlock;
    }
} else if (currentFiszkaIndex === 0) {
    if (matchingFiszki1.length >= 0) {
                    // Pobierz jednƒÖ fiszkƒô na podstawie currentFiszkaIndex
            const fiszka = matchingFiszki1[currentFiszkaIndex];
            console.log('≈Åadowana fiszka5:', currentFiszkaIndex);
            const fiszkaBlock = generateFiszkaBlock2(fiszka, indexDiv);
            return fiszkaBlock;
}
}
}

function showFiszkiForLesson5b(indexDiv, fiszki, indeks5, matchingFiszki1) {
    console.log('≈Åaduje siƒô');
    console.log('Obecny indeks fiszki:', currentFiszkaIndex);
        

    if (currentFiszkaIndex >= 0 && currentFiszkaIndex <= matchingFiszki1.length) {
        if (matchingFiszki1.length >= 0) {
            let id = matchingFiszki1[currentFiszkaIndex + 1].id;
            console.log('hej2', id);
            let parametr = '';
            // Sprawd≈∫, czy id jest tablicƒÖ
            if (Array.isArray(id)) {
                // Po≈ÇƒÖcz warto≈õci z tablicy id w jeden ciƒÖg znak√≥w oddzielony przecinkami
                id = id.slice(0, 3).join(',');
                // Obs≈Çuga ewentualnego dodatkowego parametru (np. czwartego elementu w tablicy)
                if (id.length > 3) {
                    parametr = matchingFiszki1[currentFiszkaIndex].id[3]; // Pobierz czwarty element z tablicy
                }
            }
// Tworzenie klasy CSS
const className = `fiszka-${id}${parametr ? '-' + parametr : ''}`;
const selector = `.${className.replace(/,/g, '\\,')}`;
console.log('Usuwam fiszkƒô o klasie5:', className);
// Znalezienie i usuniƒôcie diva z klasƒÖ `className`
let $divToRemove = $(selector);
if ($divToRemove.length) {  // Sprawdza, czy element istnieje
    $divToRemove.remove();   // Usuwa ca≈Çy div z DOM
}
                // Pobierz jednƒÖ fiszkƒô na podstawie currentFiszkaIndex
            const fiszka = matchingFiszki1[currentFiszkaIndex];
            console.log('≈Åadowana fiszka:', selector);
            const fiszkaBlock = generateFiszkaBlock2(fiszka, indexDiv);
            return fiszkaBlock;
    }
}
}
function showFiszkiForLesson5c(indexDiv, fiszki, currentFiszkaIndex, matchingFiszki1) {
    console.log('≈Åaduje siƒô');
    console.log('Obecny indeks fiszki:', currentFiszkaIndex);
        

if (currentFiszkaIndex === 0) {
    if (matchingFiszki1.length >= 0) {
                    // Pobierz jednƒÖ fiszkƒô na podstawie currentFiszkaIndex
            const fiszka = matchingFiszki1[currentFiszkaIndex];
            console.log('≈Åadowana fiszka5:', currentFiszkaIndex);
            const fiszkaBlock = generateFiszkaBlock2(fiszka, indexDiv);
            return fiszkaBlock;
}
}
}
        }

                displayWords(currentWordIndex, indexDiv); // Wywo≈Çanie z indeksem
                
                // Dostosuj rozmiar czcionki
                updateWordDisplay(currentWordIndex);
                adjustFontSize($sentence10);
            } else {
                console.log('Nie znaleziono s≈Ç√≥w w sentence10.');
            }
        } else {
            console.log('Nie znaleziono elementu .sentence10 w kontenerze.');
        }
    } else {
        console.log('Nie znaleziono kontenera o data-lesson = ' + indexDiv);
    }
}

// Funkcja dostosowujƒÖca rozmiar czcionki
                            function adjustFontSize($sentence10) {
                                const $sentenceContainer = $sentence10.closest('.image-container4');

                                // Ustal poczƒÖtkowy rozmiar czcionki
                                let fontSize = parseFloat($sentenceContainer.css('font-size'));
                                console.log('PoczƒÖtkowy rozmiar czcionki:', fontSize);

                                // Sprawdzenie, czy fontSize nie jest NaN
                                if (isNaN(fontSize)) {
                                    console.error('Nie uda≈Ço siƒô pobraƒá rozmiaru czcionki.');
                                    return; // Zako≈Ñcz funkcjƒô, je≈õli fontSize jest NaN
                                }

                                // Funkcja do obliczania, czy tekst mie≈õci siƒô w jednej linii
                                const isTextOverflowing = () => {
                                    const textWidth = $sentenceContainer[0].scrollWidth;
                                    const containerWidth = $sentenceContainer[0].clientWidth;
                                    const overflowing = textWidth > containerWidth;
                                    console.log('Szeroko≈õƒá tekstu:', textWidth, 'Szeroko≈õƒá kontenera:', containerWidth);
                                    console.log('Tekst przekracza szeroko≈õƒá jednej linii:', overflowing);
                                    return overflowing; // Zwr√≥ƒá informacjƒô, czy tekst przekracza szeroko≈õƒá
                                };

                                // Zmniejszaj rozmiar czcionki, a≈º tekst siƒô zmie≈õci w jednej linii
                                while (isTextOverflowing() && fontSize > 8) { // Ustaw minimalny rozmiar czcionki
                                    console.log('Zmniejszanie rozmiaru czcionki z:', fontSize);
                                    fontSize -= 1; // Zmniejsz rozmiar czcionki
                                    $sentenceContainer.css('font-size', `${fontSize}px`);
                                    console.log('Nowy rozmiar czcionki:', fontSize);
                                }

                                if (fontSize <= 8) {
                                    console.log('OsiƒÖgniƒôto minimalny rozmiar czcionki.');
                                }
                            }


                            // Je≈õli kontener nie zosta≈Ç jeszcze wybrany, wybierz losowy kontener
                            addBackgroundToText1b(matchingFiszki1, matchingIndexes, true, lesson1PartLength, polski);
                        }
                        addVideo3(0);
                    }
                    let videoNotVisibleFlag = false;
                    // Funkcja do sprawdzania widoczno≈õci co okre≈õlony czas
// Ustawienie interwa≈Çu
                    const checkVideoVisibility = setInterval(() => {
                        if (currentVideoElement && isVideoPlaying) {
                            if (!isVideoVisible(currentVideoElement)) {
                                if (!videoNotVisibleFlag) { // Sprawd≈∫, czy funkcja ju≈º by≈Ça wywo≈Çana
                                    console.log("Wideo jest niewidoczne, losowanie nowej tablicy...");
                                    isVideoPlaying = false;
                                    countVisibleContainers(); // Wywo≈Çaj funkcjƒô losujƒÖcƒÖ nowe tablice
                                    videoNotVisibleFlag = true; // Ustaw flagƒô, aby uniknƒÖƒá kolejnych wywo≈Ça≈Ñ
                                }
                            }
                        }
                    }, 1200); // Sprawdzaj co 1 sekundƒô

                    if ((index50 === 0) || (newIndex === 0)) {
                        var $sentenceDivB = $('<div></div>');
                        $sentenceDivB.addClass('sentenceBC'); // Dodanie klasy 'sentence'
                        $sentenceDivB.html(`
    ${sentence10}${sentence11}<br>
    <div class="sentence1b">${sentence1b}</div>
    <div class="sentence1b2">${sentence1b2}</div>
`);
                        $sentenceDivB.css({
                            'position': 'absolute',
                            'font-size': '18px',
                            'margin-top': '80px',
                            'text-align': 'center',
                            'z-index': '999'
                        });
                    } else {
                        var $sentenceDiv = $('<div></div>');
                        $sentenceDiv.addClass('sentenceBB'); // Dodanie klasy 'sentence'
                        $sentenceDiv.html(`
    ${sentence10}${sentence11}<br>
    <div class="sentence1bba">${sentence1bba}</div>
    <div class="sentence1bbab">${sentence1bbab}</div>
`);
                        $sentenceDiv.css({
                            'position': 'absolute',
                            'font-size': '18px',
                            'margin-top': '-10px',
                            'text-align': 'center',
                            'z-index': '5'
                        });
                    }
                    function showFiszkiForLesson6(ostatniElement2, ostatniElement3) {

                        console.log('hej11z', ostatniElement2);
                        if (ostatniElement3 === undefined) {
                            ostatniElement3 = 0;
                        }
                        const $container = $(`.image-container4[data-lesson="${ostatniElement2}"]`);

                        console.log('ostatniElement2:', ostatniElement2);
                        console.log('ostatniElement3:', ostatniElement3);

                        console.log('hej22x', tablica12b);
                        console.log('hej64xxh', ostatniElement3);
                        if (matchingFiszki1.length > 0) {
                            tablica15a.push(matchingFiszki1);

                            console.log('hej64xx', tablica15a);
                            let ostatniElement4 = tablica15a[tablica15a.length - 2];
                            console.log('hej64xx', ostatniElement4);
                            if (ostatniElement3 >= 0 && ostatniElement3 < ostatniElement4.length) {

                                let id = ostatniElement4[ostatniElement3].id;
                                console.log('hej2dd', id);
                                let parametr = '';

                                // Sprawd≈∫, czy id jest tablicƒÖ
                                if (Array.isArray(id)) {
                                    // Po≈ÇƒÖcz warto≈õci z tablicy id w jeden ciƒÖg znak√≥w oddzielony przecinkami
                                    id = id.slice(0, 3).join(',');

                                    // Obs≈Çuga ewentualnego dodatkowego parametru (np. czwartego elementu w tablicy)
                                    if (id.length > 3) {
                                        parametr = matchingFiszki1[ostatniElement3].id[3]; // Pobierz czwarty element z tablicy
                                    }
                                }
                                console.log('hej44', $container);

                                const className = `fiszka-${id}${parametr ? ',' + parametr : ''}`;
                                const selector = `.${className.replace(/,/g, '\\,')}`;
                                tablica13a.push(selector);
                                console.log('Generated selector:', tablica13a);
                                let selector2 = tablica13a[tablica13a.length - 1];
                                setTimeout(() => {
                                    // Znajd≈∫ element wewnƒÖtrz kontenera
                                    const $divToRemove = $container.find(selector2);
                                    console.log('Element to remove:', $divToRemove);

                                    if ($divToRemove.length) {
                                        $divToRemove.remove(); // Usuniƒôcie elementu
                                        console.log('Removed:', $divToRemove);
                                    } else {
                                        console.log('Element not found within container:', selector);
                                    }
                                }, 500); // Op√≥≈∫nienie

                            }
                            console.log('hej44d', $container);
                        }
                        console.log('Container found:', $container.length > 0 ? 'Yes' : 'No');
                        console.log('Container content:', $container.html());
                    }
                    const $button = $('<button></button>');
                    $button.addClass('run-button2');
                    $button.text('Uruchom'); // Ustawiamy tekst przycisku na 'Uruchom'

                    // Dodajemy atrybut 'data-index' z warto≈õciƒÖ indexDiv do przycisku
                    $button.attr('data-index', indexDiv);
                    $button.on('click', function () {


                        const index5 = $button.attr('data-index');
                        const index55 = parseInt(index5, 10); // Zamieniamy index55 na liczbƒô
                        // Alternatywnie mo≈ºna u≈ºyƒá Number(index55)
                        // const numericIndex = Number(index55);
                        buttonindex = true;
                        setTimeout(() => {
                            console.log('Klikniƒôto przycisk o indeksie:', index55);
                            przekazArgument0(tablica3[2], index55, true, tablica3[0], true, true, tablica3[1], tablica3[4]);
                            console.log('hej26', czas);
                        }, 100);
                        // Usuniƒôcie kontenera po wstawieniu nowego
                    });
                    $button.css({
                        'position': 'absolute',
                        'right': '-200px', // Przyk≈Çadowa warto≈õƒá odstƒôpu od lewej krawƒôdzi
                        'top': '5px',
                        'font-size': '10px',
                        'height': '30px',
                        'width': '170px',
                        'color': 'blue',
                        'background-color': 'white',
                        'z-index': '12' // Ustawienie z-index dla buttona wiƒôksze ni≈º dla sentenceDiv
                    });
                    $container.append($button);

                    const $buttonb2 = $('<button></button>');
                    $buttonb2.addClass('run-button3');
                    $buttonb2.text('Otw√≥rz lekcjƒô w nowym oknie'); // Ustawiamy tekst przycisku na 'Uruchom'
                    // Dodajemy atrybut 'data-index' z warto≈õciƒÖ indexDiv do przycisku
                    $buttonb2.attr('data-index2', indexDiv);
                    $buttonb2.on('click', function () {

                        const index5b2 = $buttonb2.attr('data-index2');
                        const index55b2 = parseInt(index5b2, 10); // Zamieniamy index55 na liczbƒô
                        // Alternatywnie mo≈ºna u≈ºyƒá Number(index55)
                        // const numericIndex = Number(index55);

                        setTimeout(() => {
                            console.log('hej554', index55b2);
                            if (index55b2 === 1) { // Por√≥wnaj jako liczby
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo1angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 2) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo2angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 3) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo3angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 4) { // Por√≥wnaj jako liczby
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo4angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 5) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo5angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 6) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo6angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 7) { // Por√≥wnaj jako liczby
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo7angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 8) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo8angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 9) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo9angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 10) { // Por√≥wnaj jako liczby
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo10angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 11) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo11angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 12) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo12angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 13) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo13angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 14) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo14angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 15) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo15angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 16) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo16angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 17) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo17angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 18) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo18angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 19) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo19angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 20) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo20angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 21) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo21angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 22) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo22angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 23) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo23angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 24) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo24angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 25) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo25angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 26) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo26angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 27) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo27angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 28) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo28angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 29) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo29angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 30) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo30angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 31) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo31angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 32) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo32angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 33) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo33angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                                                        if (index55b2 === 34) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo34angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 35) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo35angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 36) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo36angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                                                        if (index55b2 === 37) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo37angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 38) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo38angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 39) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo39angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                                                                                    if (index55b2 === 37) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo37angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 38) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo38angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 39) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo39angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                                                                                    if (index55b2 === 40) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo40angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 41) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo41angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 42) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo42angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                                                                                    if (index55b2 === 43) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo43angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 44) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo44angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 45) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo45angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                                                                                    if (index55b2 === 46) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo46angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 47) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo47angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                            if (index55b2 === 48) {
                                // Bezpo≈õrednio przekierowujemy u≈ºytkownika do strony
                                window.location.href = 'demo48angielskib.html?category=' + encodeURIComponent(globalCategory);
                            }
                        }, 1000);
                        // Usuniƒôcie kontenera po wstawieniu nowego
                    });
                    $buttonb2.css({
                        'position': 'absolute', // Przyk≈Çadowa warto≈õƒá odstƒôpu od lewej krawƒôdzi
                        'margin-bottom': '-105px',
                        'font-size': '10px',
                        'height': '25px',
                        'color': 'blue',
                        'background-color': 'white',
                        'width': '170px',
                        'z-index': '999999'
                    });
                    $container.append($buttonb2);
                    // Dodanie diva z zdaniem do kontenera
                    $container.append($sentenceDiv);
                    $container.append($sentenceDivB);
                    tablica15.push(srcWords);
                    console.log('hej6', tablica15);
                    $('.image-container4').on('click', function () {
    // Zresetuj z-index dla wszystkich kontener√≥w .image-container4
    $('.image-container4').css('z-index', 1); 

    // Podnie≈õ z-index dla klikniƒôtego kontenera
    $(this).css('z-index', 1000); 
});
                }
            }
            function showCombinedSentenceForLesson5(index50, lessonIdToShow1, newIndex, indexDiv, buttonindex, lessonLength) {
                // Tutaj reszta kodu funkcji
                const matchingFiszki1 = fiszki.filter(fiszka => fiszka.id[2] === lessonIdToShow1);
                const matchingFiszki10 = fiszki.filter(fiszka => fiszka.id[2] === lessonIdToShow1);
                console.log('hej10', matchingFiszki1);

                if (matchingFiszki10.length > 0) {
                    const srcWord1 = pobierzSrcWordDlaLekcji(lessonIdToShow1, fiszki);
                    const srcWord10 = pobierzSrcWordDlaLekcji2(lessonIdToShow1, fiszki);
                    const srcWord1b = pobierzSrcWordDlaLekcji3(lessonIdToShow1, fiszki);
                    function pobierzSrcWordDlaLekcji(lessonId, fiszki) {
                        const matchingFiszka = fiszki.find(fiszka => fiszka.id[2] === lessonId);
                        return matchingFiszka ? matchingFiszka.srcWord2[0] : null;
                    }
                    function pobierzSrcWordDlaLekcji2(lessonId, fiszki) {
                        const matchingFiszka = fiszki.find(fiszka => fiszka.id[1] === lessonId);
                        return matchingFiszka ? matchingFiszka.srcWordimage : null;
                    }
                    function pobierzSrcWordDlaLekcji3(lessonId, fiszki) {
                        const matchingFiszka = fiszki.find(fiszka => fiszka.id[1] === lessonId);
                        return matchingFiszka ? matchingFiszka.srcWord[1] : null; // Zwracamy srcWord[1] zamiast srcWord
                    }
                    let sentence10 = ""; // Deklaracja zmiennej sentence1 na poziomie lokalnym
                    let sentence1b = "";
                    let sentence1b2 = "";
                    function addBackgroundToText(matchingFiszki1, matchingIndexes, currentIndexValue, aktualny) {
                        setTimeout(function () {
                            sentence10 = "";
                            sentence1b = "";
                            sentence1b2 = "";
                            console.log('hej22', polski);
                            console.log('Rozpoczƒôcie funkcji addBackgroundToText');
                            console.log('matchingFiszki1:', matchingFiszki1);
                            console.log('lessonIdToShow1:', lessonIdToShow1);
                            console.log('matchingIndexes:', matchingIndexes);
                            console.log('currentIndexValue:', currentIndexValue);
                            console.log('aktualny:', aktualny);
                            for (let i = 0; i < matchingFiszki1.length; i++) {
                                const fiszka = matchingFiszki1[i];
                                console.log('fiszka:', fiszka);
                                if (!fiszka.sentence1 || fiszka.sentence1.length === 0) {
                                    console.log('fiszka.sentence1 is undefined or empty');
                                    continue; // Je≈õli sentence1 nie istnieje lub jest puste, przejd≈∫ do nastƒôpnej fiszki
                                }

                                // Iteracja przez elementy sentence1
                                for (let ki = 0; ki < fiszka.sentence1.length; ki++) {
                                    let sentencePart = fiszka.sentence1[ki];
                                    console.log('sentencePart5:', sentencePart);
                                    const indexToCheck = i + lesson1FirstPartLength + 1;
                                    console.log('indexToCheck5:', indexToCheck);
                                    if (aktualny) {
                                        if (!matchingIndexes.includes(indexToCheck) && currentIndexValue == 0) {
                                            const spanElement = document.createElement('span');
                                            spanElement.innerHTML = sentencePart; // U≈ºyj innerHTML zamiast textContent
                                            sentencePart = spanElement.outerHTML;
                                        } else if (matchingIndexes.includes(indexToCheck) && currentIndexValue == 0) {
                                            console.log('dzia≈Ça255', matchingIndexes.includes(indexToCheck));
                                            const spanElement = document.createElement('span');
                                            spanElement.innerHTML = sentencePart; // U≈ºyj innerHTML zamiast textContent
                                            if (!spanElement.classList.contains('highlighted-sentence')) {
                                                spanElement.classList.add('yellow');
                                                spanElement.classList.add('highlighted-sentence');
                                            }
                                            sentencePart = spanElement.outerHTML;
                                        } else if (currentIndexValue == 0) {
                                            const spanElement = document.createElement('span');
                                            spanElement.innerHTML = sentencePart; // U≈ºyj innerHTML zamiast textContent
                                            spanElement.classList.add('highlighted-sentence');
                                            sentencePart = spanElement.outerHTML;
                                        } else if (currentIndexValue == 1 && matchingIndexes.includes(indexToCheck)) {
                                            const spanElement = document.createElement('span');
                                            spanElement.innerHTML = sentencePart; // U≈ºyj innerHTML zamiast textContent
                                            spanElement.classList.remove('highlighted-sentence');
                                            spanElement.classList.add('yellow');
                                            sentencePart = spanElement.outerHTML;
                                        }
                                    }

                                    console.log('sentencePart po przetworzeniu:', sentencePart); // Dodaj log po przetworzeniu
                                    sentence10 += sentencePart + " ";
                                }
                            }
                            console.log('final sentence10:', sentence10); // Dodaj log dla ostatecznego wyniku
                            // Iteracja przez elementy sentence1

                            // Iteracja przez matchingFiszki2 dla sentence2

                            for (let li = 0; li < matchingFiszki1.length; li++) {
                                const fiszka = matchingFiszki1[li];
                                console.log('fiszka:', fiszka);
                                let sentencePart333 = fiszka.translateb;
                                console.log('sentencePart333:', sentencePart333);
                                if (aktualny) {
                                    // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                    const spanElement = document.createElement('span');
                                    spanElement.textContent = sentencePart333;
                                    sentencePart333 = spanElement.outerHTML;
                                }
                                sentence1b += sentencePart333 + " ";
                            }
                            if (sentence1b === "") {
                                let sentencePart333 = fiszka.translateb ? fiszka.translateb : "";
                                sentence1b += sentencePart333 + " ";
                            }
                            for (let li = 0; li < matchingFiszki1.length; li++) {
                                const fiszka = matchingFiszki1[li];
                                console.log('fiszka:', fiszka);
                                let sentencePart333 = fiszka.translate;
                                console.log('sentencePart333:', sentencePart333);
                                if (aktualny) {
                                    // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                    const spanElement = document.createElement('span');
                                    spanElement.textContent = sentencePart333;
                                    sentencePart333 = spanElement.outerHTML;
                                }
                                sentence1b2 += sentencePart333 + " ";
                            }
                            if (sentence1b2 === "") {
                                let sentencePart333 = fiszka.translate ? fiszka.translate : "";
                                sentence1b2 += sentencePart333 + " ";
                            }
                            // Dodanie tre≈õci do diva wraz z przyciskiem

                            $sentenceDivB.html(`
${sentence10}<br>
<div class="sentence1b">${sentence1b}</div>
<div class="sentence1b2">${sentence1b2}</div>
`);

                            if ($sentence1b.css('display') === 'none') {
                                // Pokazujemy zdanie .sentence1bb
                                $sentence1b.css('display', 'block');
                                $sentence1b.css({
                                    'margin-bottom': '0px',
                                    'top': '0px',
                                    'position': 'relative'
                                });
                            }
                        }, 0);
                    }

                    let sentence1bba = "";
                    let sentence1bbab = "";
                    function addBackgroundToText1b(matchingFiszki1, matchingIndexes, aktualny, lessonLength) {
                        $(document).ready(function () {
                            sentence1bba = "";
                            sentence1bbab = "";
                            setTimeout(() => {
                                for (let i = 0; i < matchingFiszki1.length; i++) {
                                    const fiszka = matchingFiszki1[i];
                                    console.log('fiszka:', fiszka);
                                    if (!fiszka.sentence || fiszka.sentence.length === 0) {
                                        console.log('fiszka.sentence1 is undefined or empty');
                                        continue; // Je≈õli sentence1 nie istnieje lub jest puste, przejd≈∫ do nastƒôpnej fiszki
                                    }

                                    // Iteracja przez elementy sentence1
                                    for (let ki = 0; ki < fiszka.sentence.length; ki++) {
                                        let sentencePart = fiszka.sentence[ki];
                                        console.log('sentencePart5:', sentencePart);
                                        const indexToCheck = i + lessonLength + 1;
                                        console.log('indexToCheck5:', indexToCheck);
                                        // Sprawd≈∫, czy indeks jest r√≥wny 0
                                        if (aktualny) {
                                            if (matchingIndexes.includes(indexToCheck)) {
                                                // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawiera≈Ç utworzony element span
                                                sentencePart = spanElement.outerHTML;
                                            }
                                        }

                                        sentence10 += sentencePart + " ";
                                    }
                                    break; // Zako≈Ñcz pƒôtlƒô po pierwszym przetworzeniu fiszki
                                }
                                for (let li = 0; li < matchingFiszki1.length; li++) {
                                    const fiszka = matchingFiszki1[li];
                                    console.log('fiszka:', fiszka);
                                    let sentencePart3 = fiszka.translateb2;
                                    console.log('sentencePart3:', sentencePart3);
                                    if (aktualny) {
                                        // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                        const spanElement = document.createElement('span');
                                        spanElement.textContent = sentencePart3;
                                        sentencePart3 = spanElement.outerHTML;

                                    }
                                    sentence1bba += sentencePart3 + " ";
                                }
                                for (let li = 0; li < matchingFiszki1.length; li++) {
                                    const fiszka = matchingFiszki1[li];
                                    console.log('fiszka:', fiszka);
                                    let sentencePart3 = fiszka.translate;
                                    console.log('sentencePart3:', sentencePart3);
                                    if (aktualny) {
                                        // Sprawdzenie, czy indeks bie≈ºƒÖcej fiszki znajduje siƒô w tablicy matchingIndexes
                                        const spanElement = document.createElement('span');
                                        spanElement.textContent = sentencePart3;
                                        sentencePart3 = spanElement.outerHTML;

                                    }
                                    sentence1bbab += sentencePart3 + " ";
                                }

                                console.log('hej20', sentence1bba);

                                $sentenceDiv.html(`
${sentence10}<br>
<div class="sentence1bba">${sentence1bba}</div>
<div class="sentence1bbab">${sentence1bbab}</div>
`);
                                if ($sentence1bba.css('display') === 'none') {
                                    // Pokazujemy zdanie .sentence1bb
                                    $sentence1bba.css('display', 'block');
                                    $sentence1bba.css({
                                        'margin-bottom': '-20px',
                                        'top': '0px',
                                        'position': 'relative'
                                    });
                                }
                            }, 300);
                        });
                        console.log('Zawarto≈õƒá zmiennej sentence1:', sentence1b); // Wy≈õwietlenie zawarto≈õci zmiennej sentence1                          
                    }



                    const $container = $('<div></div>'); // Tworzymy nowy element div za pomocƒÖ jQuery
                    $container.addClass('image-container5'); // Dodajemy klasƒô do nowego diva
                    $container.css('position', 'relative'); // Ustawiamy pozycjƒô diva na relative

                    // Mo≈ºesz r√≥wnie≈º dodaƒá dodatkowe atrybuty, takie jak 'data-lesson'
                    $container.attr('data-lesson', indexDiv);
                    $('.grid-container').append($container);
                    const srcWords = [srcWord1];
                    console.log('hej2', srcWords);
                    const srcWords2 = [srcWord1b];
                    console.log('hej2', srcWords2);
                    const srcWordimage = [srcWord10];
                    console.log('hej2', srcWordimage);
                    let videoDurations = [];
                    let totalDuration = 0;
                    for (let i = 0; i < srcWords.length; i++) {
                        const video = document.createElement('video');
                        video.src = srcWords[i];
                        video.addEventListener('loadedmetadata', function () {
                            totalDuration += this.duration;
                            console.log('tablica8', totalDuration);
                            console.log('dzia≈Ça5');
                        });
                    }
                    console.log('hej');
                    console.log('tablica11', videoDurations);
                    function removePreviousVideo() {
                        const previousVideo = $container.find('video'); // Poprawne odwo≈Çanie do poprzedniego wideo
                        if (previousVideo.length > 0) {
                            previousVideo.remove(); // Usuniƒôcie poprzedniego wideo z kontenera
                        }
                    }

                    if (newIndex === 0 && !buttonindex) {
                        console.log('hej3331', buttonindex);
                        let funkcjaWywolana = false;
                        function addVideo1(index) {
                            // Sprawd≈∫, czy jeste≈õmy poza zakresem tablicy
                            if (index >= srcWords.length && !funkcjaWywolana) {
                                funkcjaWywolana = true;
                                countVisibleContainers();
                                przekazArgument0(tablica3[2], undefined, false, tablica3[0], true, true, tablica3[1], tablica3[4]);
                                console.log("wykonuje siƒô");
                            }
                            // Usu≈Ñ poprzednie wideo
                            removePreviousVideo();
                            console.log('hej78', index);
                            const $vidDiv = $('<div>').addClass('background-video');
                            // Utw√≥rz element <video> i ustaw atrybuty
                            const $videoElement = $('<video>').attr({
                                'autoplay': true, // Automatyczne odtwarzanie wideo
                                'muted': true, // Wyciszenie d≈∫wiƒôku wideo
                                'loop': true // Zapƒôtlenie wideo
                            });
                            // Dodaj klasƒô CSS zale≈ºnie od indeksu wideo
                            if (index === 0) {
                                $videoElement.addClass('scaled-video');
                            } else {
                                $videoElement.addClass('next-video');
                            }
                            // Utw√≥rz element <source> dla wideo i ustaw atrybuty
                            const $sourceElement = $('<source>').attr({
                                'src': srcWords[index], // Poprawne u≈ºycie interpolacji
                                'type': 'video/mp4'     // Typ pliku wideo
                            });
                            // Dodaj element source do elementu video
                            $sourceElement.appendTo($videoElement);
                            // Dodaj element video do diva dla wideo
                            $videoElement.appendTo($vidDiv);
                            // Dodaj element <source> do elementu <video>

                            // Obs≈Çuga b≈Çƒôdu ≈Çadowania wideo
                            $videoElement.onerror = function () {
                                console.error('Nie mo≈ºna za≈Çadowaƒá pliku wideo.');
                            };
                            let currentIndexValue = [];

                            // Funkcja obs≈Çugi zdarzenia loadedmetadata
                            $videoElement.on('loadedmetadata', function () {
                                const videoDuration = this.duration;
                                videoDurations[index] = videoDuration;
                                console.log('tablica77', totalDuration);
                                // Uruchomienie funkcji countVisibleContainers co 2 sekundy

                                $videoElement.on('timeupdate', function () {
                                    let adjustedProgress = 0;
                                    for (let i = 0; i < index; i++) {
                                        adjustedProgress += (videoDurations[i] / totalDuration) * 100;
                                    }
                                    adjustedProgress += (this.currentTime / videoDuration) * (videoDurations[index] / totalDuration) * 100;
                                    updateProgress(adjustedProgress);
                                    console.log('hej786', index);
                                    // Sprawd≈∫, czy warto≈õƒá index nie zosta≈Ça jeszcze dodana do tablicy currentIndex
                                    if (!currentIndexValue.includes(index)) {
                                        // Dodaj index do tablicy currentIndex
                                        currentIndexValue.push(index);
                                        console.log('hej70', currentIndexValue);
                                        // Wywo≈Çaj funkcjƒô addBackgroundToText tylko raz
                                        if (currentIndexValue[0] === 0) {
                                            addBackgroundToText(matchingFiszki1, matchingIndexes, currentIndexValue, true);
                                        }
                                    }

                                    // Sprawd≈∫, czy wideo zosta≈Ço zako≈Ñczone
                                    if ($videoElement[0].duration - $videoElement[0].currentTime < 1) {
                                        console.log('Wideo zako≈Ñczone, uruchamiam nastƒôpne.');
                                        // Odtw√≥rz nastƒôpne wideo po zako≈Ñczeniu poprzedniego
                                        addVideo1(index + 1);
                                        updateProgress(0);
                                    }
                                });
                            });
                            addScenes(index);
                            // Dodaj div z wideo do t≈Ça kontenera
                            $vidDiv.appendTo($container);
                            function updateProgress(progress) {
                                // Aktualizuj pasek postƒôpu na dole kontenera
                                $('.progress-bar').css('width', progress + '%');
                            }

                            // Inicjalizacja paska postƒôpu
                            const $progressBar = $('<div>').addClass('progress-bar');
                            $progressBar.css({
                                'position': 'absolute',
                                'z-index': '2',
                                'bottom': '0',
                                'left': '0',
                                'height': '5px', // Wysoko≈õƒá paska postƒôpu
                                'background-color': '#007bff', // Kolor paska postƒôpu
                                'width': '140%', // Delikatne powiƒôkszenie paska postƒôpu o 2% w ka≈ºdym kierunku
                                'margin-bottom': '-2%',
                                'margin-left': '-4%',
                                'margin-right': '-4%'// Zapewnienie r√≥wnowagi dla powiƒôkszenia paska postƒôpu
                            });
// Funkcja dodajƒÖca nowe elementy <div>
                            function addScenes(index) {
                                // Sprawd≈∫, czy istnieje element <div> o klasie 'scene-description'
                                let $sceneDiv = $container.find('.scene-description');

                                if ($sceneDiv.length) {
                                    // Je≈õli istnieje, wyczy≈õƒá jego zawarto≈õƒá
                                    $sceneDiv.empty();
                                } else {
                                    // Je≈õli nie istnieje, stw√≥rz nowy element <div>
                                    $sceneDiv = $('<div>').addClass('scene-description').appendTo($container);
                                }

                                // Dodaj nowy tekst do <div>
                                $sceneDiv.text(`Scena z filmu ${srcWords2[index]}`);
                            }
                        }
                        addVideo1(0);
                    } else if (index50 === 0 && buttonindex) {
                        console.log('hej3331', buttonindex);
                        let funkcjaWywolana2 = false;
                        function addVideo2(index) {
                            console.log('hej80', index);
                            // Sprawd≈∫, czy jeste≈õmy poza zakresem tablicy
                            if (index >= srcWords.length && !funkcjaWywolana2) {
                                setTimeout(function () {
                                    $('.progress-bar').remove();
                                }, 200); // Op√≥≈∫nienie w milisekundach (tu: 1 sekunda)
                                buttonindex = false;
                                przekazArgument0(tablica3[2], undefined, false, tablica3[0], true, true, tablica3[1], tablica3[4]);
                                console.log("wykonuje siƒô");
                                funkcjaWywolana2 = true;
                            }
                            // Usu≈Ñ poprzednie wideo
                            removePreviousVideo();
                            console.log('hej78', index);
                            const $vidDiv = $('<div>').addClass('background-video');
                            // Utw√≥rz element <video> i ustaw atrybuty
                            const $videoElement = $('<video>').attr({
                                'autoplay': true, // Automatyczne odtwarzanie wideo
                                'muted': true, // Wyciszenie d≈∫wiƒôku wideo
                                'loop': true // Zapƒôtlenie wideo
                            });
                            // Dodaj klasƒô CSS zale≈ºnie od indeksu wideo
                            if (index === 0) {
                                $videoElement.addClass('scaled-video');
                            } else {
                                $videoElement.addClass('next-video');
                            }
                            // Utw√≥rz element <source> dla wideo i ustaw atrybuty
                            const $sourceElement = $('<source>').attr({
                                'src': srcWords[index], // Poprawne u≈ºycie interpolacji
                                'type': 'video/mp4'     // Typ pliku wideo
                            });
                            // Dodaj element source do elementu video
                            $sourceElement.appendTo($videoElement);
                            // Dodaj element video do diva dla wideo
                            $videoElement.appendTo($vidDiv);
                            // Dodaj element <source> do elementu <video>

                            // Obs≈Çuga b≈Çƒôdu ≈Çadowania wideo
                            $videoElement.onerror = function () {
                                console.error('Nie mo≈ºna za≈Çadowaƒá pliku wideo.');
                            };
                            let currentIndexValue = [];
                            // Funkcja obs≈Çugi zdarzenia loadedmetadata
                            $videoElement.on('loadedmetadata', function () {
                                const videoDuration = this.duration;
                                videoDurations[index] = videoDuration;
                                console.log('tablica77', totalDuration);
                                $videoElement.on('timeupdate', function () {
                                    let adjustedProgress = 0;
                                    for (let i = 0; i < index; i++) {
                                        adjustedProgress += (videoDurations[i] / totalDuration) * 100;
                                    }
                                    adjustedProgress += (this.currentTime / videoDuration) * (videoDurations[index] / totalDuration) * 100;
                                    updateProgress(adjustedProgress);
                                    console.log('hej78', index);
                                    // Sprawd≈∫, czy warto≈õƒá index nie zosta≈Ça jeszcze dodana do tablicy currentIndex
                                    if (!currentIndexValue.includes(index)) {
                                        // Dodaj index do tablicy currentIndex
                                        currentIndexValue.push(index);
                                        console.log('hej70', currentIndexValue);
                                        // Wywo≈Çaj funkcjƒô addBackgroundToText tylko raz
                                        if (currentIndexValue[0] === 0) {
                                            setTimeout(() => {
                                                addBackgroundToText(matchingFiszki1, matchingIndexes, currentIndexValue, true);
                                            }, 300);
                                        }
                                    }

                                    // Sprawd≈∫, czy wideo zosta≈Ço zako≈Ñczone
                                    if ($videoElement[0].duration - $videoElement[0].currentTime < 1) {
                                        console.log('Wideo zako≈Ñczone, uruchamiam nastƒôpne.');
                                        // Odtw√≥rz nastƒôpne wideo po zako≈Ñczeniu poprzedniego
                                        addVideo2(index + 1);
                                        updateProgress(0);
                                    }
                                });
                            });
                            // Dodaj div z wideo do t≈Ça kontenera
                            $vidDiv.appendTo($container);
                            function updateProgress(progress) {
                                // Aktualizuj pasek postƒôpu na dole kontenera
                                $('.progress-bar').css('width', progress + '%');
                            }

                            // Inicjalizacja paska postƒôpu
                            const $progressBar = $('<div>').addClass('progress-bar');
                            $progressBar.css({
                                'position': 'absolute',
                                'z-index': '2',
                                'bottom': '0',
                                'left': '0',
                                'height': '5px', // Wysoko≈õƒá paska postƒôpu
                                'background-color': '#007bff', // Kolor paska postƒôpu
                                'width': '140%', // Delikatne powiƒôkszenie paska postƒôpu o 2% w ka≈ºdym kierunku
                                'margin-bottom': '-2%',
                                'margin-left': '-4%',
                                'margin-right': '-4%'// Zapewnienie r√≥wnowagi dla powiƒôkszenia paska postƒôpu
                            });
                            $progressBar.appendTo($container);
                        }
                        addVideo2(0);
                    } else {
                        function addVideo3(index) {
                            // Utw√≥rz element <video> i ustaw atrybuty
                            const $videoElement = $('<video>').attr({
                                'muted': true, // Wyciszenie d≈∫wiƒôku wideo
                                'loop': true, // Zapƒôtlenie wideo
                                'style': 'z-index: 1',
                                'poster': srcWordimage[index] // Dodanie plakatu do wideo
                            });
                            // Utw√≥rz element <div> dla nak≈Çadki
                            const $overlay = $('<div>').addClass('overlay');
                            const $buttonb = $('<img>').attr({
                                'src': 'https://www.arbulang.com/img/startsystem.png', // Wzglƒôdna ≈õcie≈ºka do pliku PNG
                                'class': 'overlay-button' // Klasa dla styl√≥w CSS
                            }).css({
                                'position': 'absolute',
                                'z-index': '1000000',
                                'bottom': '10px',
                                'right': '10px',
                                'width': '30px',
                                'height': '30px',
                                'cursor': 'pointer',
                                'border-radius': '8px'
                            });
                            // Dodaj element video do diva dla wideo
                            $videoElement.appendTo($container);
                            // Dodaj nak≈Çadkƒô do kontenera, po dodaniu wideo
                            $overlay.appendTo($container);
                            // Dodaj przycisk do nak≈Çadki
                            $buttonb.appendTo($container);

                            // Dodaj funkcjƒô hover do kontenera
                            $container.hover(function () {
                                $('.overlay', this).css('transform', 'translateX(0)');

                                // Tw√≥rz nowy dynamiczny div
                                const $dynamicDiv = $('<div>').addClass('dynamic-div').text('Szybka lekcja - kliknij');
                                // Dodaj dynamiczny div do kontenera
                                $dynamicDiv.appendTo($(this)).fadeIn(300);
                            }, function () {
                                $('.overlay', this).css('transform', 'translateX(100%)');

                                // Usu≈Ñ dynamiczny div po zako≈Ñczeniu hovera
                                $('.dynamic-div', this).fadeOut(300, function () {
                                    $(this).remove();
                                });
                            });
                            // Set up the click handler for the overlay button
                            $buttonb.on('click', function () {
                                console.log('Button clicked');

                                const $newButton = $('<button>').text('Szybka lekcja').addClass('slide-button');
                                $newButton.appendTo($container); // Append to container

                                console.log('New button added');

                                // Ensure button is visible before animating
                                $newButton.show();
                                console.log('Button should be visible');

                                $newButton.animate({
                                    right: '10px' // Move to visible position within the container
                                }, 500, function () {
                                    console.log('Animation complete');
                                });
                            });

                            // Je≈õli kontener nie zosta≈Ç jeszcze wybrany, wybierz losowy kontener
                            addBackgroundToText1b(matchingFiszki1, matchingIndexes, true, lessonLength);
                        }
                        addVideo3(0);
                    }
                    if ((index50 === 0) || (newIndex === 0)) {
                        var $sentenceDivB = $('<div></div>');
                        $sentenceDivB.addClass('sentenceB'); // Dodanie klasy 'sentence'
                        $sentenceDivB.html(`
    ${sentence10}<br>
    <div class="sentence1b">${sentence1b}</div>
    <div class="sentence1b2">${sentence1b2}</div>
`);
                        $sentenceDivB.css({
                            'position': 'absolute',
                            'font-size': '18px',
                            'margin-top': '80px',
                            'text-align': 'center',
                            'z-index': '999'
                        });
                    } else {
                        var $sentenceDiv = $('<div></div>');
                        $sentenceDiv.addClass('sentence'); // Dodanie klasy 'sentence'
                        $sentenceDiv.html(`
    ${sentence10}<br>
    <div class="sentence1bba">${sentence1bba}</div>
    <div class="sentence1bbab">${sentence1bbab}</div>
`);
                        $sentenceDiv.css({
                            'position': 'absolute',
                            'font-size': '28px',
                            'margin-top': '-80px',
                            'text-align': 'center',
                            'z-index': '5'
                        });
                    }

                    const $button = $('<button></button>');
                    $button.addClass('run-button2');
                    $button.text('Uruchom'); // Ustawiamy tekst przycisku na 'Uruchom'

                    // Dodajemy atrybut 'data-index' z warto≈õciƒÖ indexDiv do przycisku
                    $button.attr('data-index', indexDiv);
                    $button.on('click', function () {


                        const index5 = $button.attr('data-index');
                        const index55 = parseInt(index5, 10); // Zamieniamy index55 na liczbƒô
                        // Alternatywnie mo≈ºna u≈ºyƒá Number(index55)
                        // const numericIndex = Number(index55);
                        buttonindex = true;
                        setTimeout(() => {
                            console.log('Klikniƒôto przycisk o indeksie:', index55);
                            przekazArgument0(tablica3[2], index55, true, tablica3[0], true, true, tablica3[1], tablica3[4]);
                            console.log('hej26', czas);
                        }, 100);
                        // Usuniƒôcie kontenera po wstawieniu nowego
                    });
                    $button.css({
                        'position': 'absolute',
                        'left': '50%', // Przyk≈Çadowa warto≈õƒá odstƒôpu od lewej krawƒôdzi
                        'top': '10px',
                        'z-index': '10' // Ustawienie z-index dla buttona wiƒôksze ni≈º dla sentenceDiv
                    });
                    $container.append($button);
                    // Dodanie diva z zdaniem do kontenera
                    $container.append($sentenceDiv);
                    $container.append($sentenceDivB);
                    tablica20.push(srcWords);
                    console.log('hej6', tablica20);
                }
            }



            function wybierzTematyke(tematyka) {
                console.log("Wybrana ulubiona tematyka fiszek: " + tematyka);
                // Dodaj logikƒô lub akcje zwiƒÖzane z wyborem tematyki fiszek.
            }

            function wplecUlubioneFiszki() {
                console.log("Wp≈Çywaj ulubione fiszki!");
                // Dodaj logikƒô lub akcje zwiƒÖzane z wpleceniem ulubionych fiszek.
            }
            let visibleIndexes = [];
            let previousVisibleIndexes = [];
            let countVisibleContainersCalled = false;
            let timeoutId = null;
            let scrollTimeoutId = null;  // Nowy timeout dla scrollowania
            let lastChangeTime = 0;
            let isFirstCall = true;


            function countVisibleContainers() {
                console.log('hej124', isVideoPlaying);
                // Sprawd≈∫, czy wideo jest odtwarzane i widoczne
                if (isVideoPlaying && currentVideoElement && isVideoVisible(currentVideoElement)) {
                    return; // Nie wykonuj nic, je≈õli wideo jest odtwarzane i widoczne
                }
                indexes = [];

                $('.grid-container .image-container4').each(function (index) {

                    const containerRect = this.getBoundingClientRect();
                    const isVisible = (
                            containerRect.top >= 0 &&
                            containerRect.left >= 0 &&
                            containerRect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                            containerRect.right <= (window.innerWidth || document.documentElement.clientWidth)
                            );

                    if (isVisible) {
                        indexes.push(index + 1); // Dodanie +1, aby indeksy zaczyna≈Çy siƒô od 1
                    }
                });

                // Je≈õli to pierwsze wywo≈Çanie, uruchom od razu
                if (isFirstCall && indexes.length) {
                    isFirstCall = false;
                    console.log('Aktualne widoczne indeksy:', indexes);
                    otherFunction(indexes);
                }

                // Obliczenie czasu od ostatniej zmiany
                const currentTime = Date.now();
                const elapsedTime = currentTime - lastChangeTime;

                // Zresetuj losowanie previousVisibleIndexes przy ka≈ºdym scrollowaniu, ale losuj tylko raz
                if (!scrollTimeoutId) {
                    previousVisibleIndexes = [...indexes]; // Losowanie once
                }
if (window.matchMedia("(min-width: 999px)").matches) {
                // Je≈õli warunek jest spe≈Çniony i poprzedni timeout nie istnieje
                if (indexes.length >= 8 && !hasPreviousIndexesBeenSet) {
                    if (timeoutId) {
                        clearTimeout(timeoutId); // Wyczy≈õƒá poprzedni timeout, je≈õli istnieje
                    }
                    // Ustaw timeout na 2 sekundy po zatrzymaniu scrollowania
                    timeoutId = setTimeout(() => {
                        previousVisibleIndexes = [...indexes]; // Losowanie
                        hasPreviousIndexesBeenSet = true;
                        console.log('Aktualne widoczne indeksy:', indexes);
                        otherFunction(indexes);
                        timeoutId = null; // Resetuj timeoutId po wykonaniu funkcji
                    }, 200); // Czekaj 2 sekundy od ostatniego scrollowania
                }
                } else if (window.matchMedia("(max-width: 999px)").matches) {
                                    // Je≈õli warunek jest spe≈Çniony i poprzedni timeout nie istnieje
                if (indexes.length >= 10 && !hasPreviousIndexesBeenSet) {
                    if (timeoutId) {
                        clearTimeout(timeoutId); // Wyczy≈õƒá poprzedni timeout, je≈õli istnieje
                    }
                    // Ustaw timeout na 2 sekundy po zatrzymaniu scrollowania
                    timeoutId = setTimeout(() => {
                        previousVisibleIndexes = [...indexes]; // Losowanie
                        hasPreviousIndexesBeenSet = true;
                        console.log('Aktualne widoczne indeksy:', indexes);
                        otherFunction(indexes);
                        timeoutId = null; // Resetuj timeoutId po wykonaniu funkcji
                    }, 200); // Czekaj 2 sekundy od ostatniego scrollowania
                }
                }

                // Aktualizacja czasu ostatniej zmiany
                lastChangeTime = currentTime;
            }

            let debounceTimer;

            $(window).on('scroll', function () {
                // Je≈õli istnieje aktywny timer, anuluj go
                clearTimeout(debounceTimer);
                hasPreviousIndexesBeenSet = false;
                // Ustaw nowy timer
                debounceTimer = setTimeout(function () {
                    console.log('hej5432');
                    // Wywo≈Çanie funkcji po zako≈Ñczeniu przewijania

                }, 1000); // Czas w milisekundach, po kt√≥rym funkcja zostanie wywo≈Çana
            });

// Funkcja otherFunction z przekazanymi indeksami
            function otherFunction(indexes) {

                console.log('Przekazane indeksy do otherFunction:', indexes);
                console.log('wywo≈Çana');
                przekazArgument0(tablica3[2], undefined, false, 'zdania', false, false, tablica3[1], tablica3[4]);
            }
            document.addEventListener("DOMContentLoaded", () => {
                // Pobierz userAgent przeglƒÖdarki
                const userAgent = navigator.userAgent || navigator.vendor || window.opera;

                // Warunki sprawdzajƒÖce czy aplikacja to Messenger lub Facebook
                const isFacebookMessenger = /FBAN|FBAV|Messenger/i.test(userAgent);

                // Je≈õli wykryto, ≈ºe strona jest otwierana z Messengera
                if (isFacebookMessenger) {
                    alert("Wykryto, ≈ºe przeglƒÖdasz stronƒô w Messengerze. Dla pe≈Çnej funkcjonalno≈õci zalecamy otwarcie strony w przeglƒÖdarce, np. Chrome.");

                    // Dodanie sugestii z przyciskiem do otwarcia strony w przeglƒÖdarce
                    const suggestion = document.createElement('div');
                    suggestion.innerHTML = `
            <div style="position: fixed; top: 20px; left: 20px; right: 20px; background: rgba(255, 255, 255, 0.9); padding: 15px; border: 1px solid #ccc; z-index: 9999; border-radius: 5px;">
                <p style="font-size: 16px; color: #333;">Aby w pe≈Çni korzystaƒá ze strony, otw√≥rz jƒÖ w przeglƒÖdarce Chrome.</p>
                <button id="openInChrome" style="padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">Otw√≥rz w Chrome</button>
            </div>
        `;
                    document.body.appendChild(suggestion);

                    // Obs≈Çuga klikniƒôcia przycisku
                    document.getElementById('openInChrome').addEventListener('click', () => {
                        // Otw√≥rz stronƒô w zewnƒôtrznej przeglƒÖdarce
                        window.open(window.location.href, '_blank');
                    });
                }
            });
            ustawTryb('fiszki');
            przekazArgument0(tablica3[2], '', false, 'fiszki', true, true, tablica3[1], tablica3[4], false, '', '');


        </script>

        <script id="demoScript" data-category=""></script>
    </body>
</html>

                <button class="left-button2">+<br></button>TE LEKCJE MAJƒÑ DOSTƒòPNE SKOJARZENIA W WIƒòKSZYM ZAKRESIE TEMAT√ìW
                
                        function showStory(index) {
            const currentFiszka = fiszkaContainer;

            // Ukrywamy wszystkie historie w tej konkretnej fiszce
            currentFiszka.find('.fiszka_story').hide();

            // Obs≈Çuga mnemoniki
            if (Array.isArray(fiszka.story)) {
                if (index >= 0 && index < fiszka.story.length) {
                    currentFiszka.find('.story-' + index).show();
                }
            } else if (fiszka.story) {
                currentFiszka.find('.story-0').show();
            }

            // Ukrywamy wszystkie obrazy
            currentFiszka.find('.fiszka_img').hide();

            // Obs≈Çuga obraz√≥w
            let imgIndex; // Zmienna do przechowywania indeksu obrazka

            if (Array.isArray(fiszka.img)) {
                imgIndex = Math.min(index, fiszka.img.length - 1);
                currentFiszka.find('.fiszka_img').eq(imgIndex).show();
                specificLesson2Ref = fiszka.img[imgIndex];
                console.log("Index obrazka:", imgIndex);
            } else {
                imgIndex = 0; // Ustawienie imgIndex na 0, gdy fiszka.img nie jest tablicƒÖ
                currentFiszka.find('.fiszka_img').eq(imgIndex).show();
                specificLesson2Ref = fiszka.img;
                console.log("Index obrazka:", imgIndex);
            }

            lastClickedIndex = index;

            return imgIndex;
        }