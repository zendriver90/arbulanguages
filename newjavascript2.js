                if (czas === 'fiszki' && czas !== "zdania" && !isSearching) {
                    console.log('Warunek czas === "fiszki" jest spełniony');
                    $('.grid-container .image-container4').remove();
                    $('.grid-container .image-container5').remove();

                    if (myVariable.length > 1) {
                        let zeroWylosowane = false;
                        let indexDiv = 0;

                        let previousCumulativeFirstPartLength3 = 0;
                        let cumulativeFirstPartLength1 = 0;
                        let cumulativeFirstPartLength2 = 0;
                        let cumulativeFirstPartLength3 = 0;

                        let startIndex = 0;
                        const lengthDividedByThree = myVariable.length / 3;

                        let indices = Array.from({length: lengthDividedByThree}, (_, i) => i + 1);
                        let indices2 = [];
                        for (let i = 1; i <= lengthDividedByThree; i++) {
                            indices2.push(i);
                        }


                        const zeroIndex = Math.floor(Math.random() * lengthDividedByThree);
                        const zeroIndex2 = index55 - 1;
                        indices[zeroIndex] = 0;
                        indices2[zeroIndex2] = 0;
                        losowaniaCounter++; // Inkrementuj licznik przy każdym wywołaniu
                        tablica33.push(losowaniaCounter); // Dodaj zaktualizowany licznik do tablicy
                        const ostatniaWartosc = tablica33[tablica33.length - 1];
                        for (let i = 0; i < myVariable.length; i += 3) {
    indexDiv++;

    const lessonId1 = myVariable[i];
    const lessonId2 = myVariable[i + 1];
    const lessonId3 = myVariable[i + 2];

    const newIndex = indices[Math.floor(i / 3)];
    const index50 = indices2[Math.floor(i / 3)];
                                                    if (losowaniaCounter >= 7) {
                                console.log('Osiągnięto 7 losowań, wyświetlam powiadomienie');
                                powiadomienieCounter++; // Zwiększenie licznika powiadomień

                                if (confirm('Osiągnięto 7 losowań. Czy chcesz kontynuować losowania?')) {
                                    console.log('Użytkownik potwierdził dalsze losowania');
                                    losowaniaCounter = 0; // Zresetowanie licznika losowań
                                } else {
                                    console.log('Użytkownik przerwał dalsze losowania');
                                    break; // Przerwanie pętli, jeśli użytkownik nie chce kontynuować
                                }
                            }
if ((tablica10.length <= indexDivRange || tablica10.length === 0) && ostatniaWartosc < 6 && ostatniaWartosc > 4) {
    const maxOstatnia = 20; // lub dowolna wartość końcowa

for (let i = ostatniaWartosc; i <= maxOstatnia; i += 2) {
    const first = i;
    const second = i + 1;

    // --- OSOBNY KOD DLA FIRST: 4, 6, 8, 10...
    console.log("To jest first:", first);
    if (first <= maxOstatnia) {
                                    let number = true;
                            let number1 = false;
                            let newIndex5;
                            console.log('hejhej511', indexDiv0b);
                let newIndex10 = (indexDiv === indexDiv0b) ? 0 : indexDiv;
                /// USUNIĘCIE TRZECIEJ MINIATURY
                if (newIndex10 === 0) {
                    showCombinedSentenceForLesson22b(
        number1, selectedCategory, matchingIndexes3, rodzaj, matchingIndexes2,
        buttonindex, index50, lessonId1, lessonId2, lessonId3, fiszki, matchingIndexes,
        startIndex, newIndex, newIndex5, newIndex10, indexDiv, indexDiv0, indexDiv0b, lessonsArray,
        lesson1PartLength, lesson2PartLength, lesson3PartLength,
        lesson1Sentences, lesson2Sentences, lesson3Sentences,
        lesson1FirstPartLength, lesson2FirstPartLength, lesson3FirstPartLength,
        lesson1SecondPartLength, lesson2SecondPartLength, lesson3SecondPartLength,
        cumulativeFirstPartLength1, cumulativeFirstPartLength2, cumulativeFirstPartLength3,
        lessonsArrayZ, matchingLessons5, matchingLessons5b, isSearching
    );
            }
    }
    // --- OSOBNY KOD DLA SECOND: 5, 7, 9, 11...
    if (second <= maxOstatnia) {
        console.log("To jest second:", second);

                        let number = false;
                        let number2 = true;
                        let newIndex10;
                    let newIndex11 = (indexDiv === indexDiv0b) ? 0 : indexDiv;
                            console.log("To jest first:", newIndex11);
                            /// DODANIE TRZECIEJ (I KOLEJNYCH) LEKCJI AUTOMATYCZNEJ
                                            if (newIndex11 === 0) {
                                                                                const currentIndexDiv = indexDiv;
    setTimeout(() => {
        tablica43.push(currentIndexDiv);
            }, 0);
            showCombinedSentenceForLesson(
                number2, number, selectedCategory, matchingIndexes3, rodzaj, matchingIndexes2,
                buttonindex, index50, lessonId1, lessonId2, lessonId3, fiszki, matchingIndexes,
                startIndex, newIndex, newIndex10, indexDiv, indexDiv0b, lessonsArray,
                lesson1PartLength, lesson2PartLength, lesson3PartLength,
                lesson1Sentences, lesson2Sentences, lesson3Sentences,
                lesson1FirstPartLength, lesson2FirstPartLength, lesson3FirstPartLength,
                lesson1SecondPartLength, lesson2SecondPartLength, lesson3SecondPartLength,
                cumulativeFirstPartLength1, cumulativeFirstPartLength2, cumulativeFirstPartLength3,
                lessonsArrayZ, matchingLessons5, matchingLessons5b, isSearching
            );
    continue;
            }
    }
}
                        }
                        
                        const urlParams = new URLSearchParams(window.location.search);
            const category = urlParams.get('category');
                        const tablica11 = [];
                        
function showCombinedSentenceForLesson22b(number1, number2, selectedCategory, matchingIndexes3, rodzaj, matchingIndexes2, buttonindex, index50, lessonIdToShow1, lessonIdToShow2, lessonIdToShow3, fiszki, matchingIndexes, startIndex, newIndex, newIndex5, newIndex10, indexDiv, indexDiv0, indexDiv0b, indexDiv0b2, lessonsArray, lesson1PartLength, lesson2PartLength, lesson3PartLength, lesson1Sentences, lesson2Sentences, lesson3Sentences, lesson1FirstPartLength, lesson2FirstPartLength, lesson3FirstPartLength, lesson1SecondPartLength, lesson2SecondPartLength, lesson3SecondPartLength, cumulativeFirstPartLength1, cumulativeFirstPartLength2, cumulativeFirstPartLength3, lessonsArrayZ, matchingLessons5, matchingLessons5b, isSearching) {      
    console.log('hejhej11v', matchingLessons5b);
                            let tablica60 = [];
                const matchingFiszki1 = fiszki10.filter(fiszka => fiszka.id[1] === lessonIdToShow1);
                const matchingFiszki2 = fiszki10.filter(fiszka => fiszka.id[1] === lessonIdToShow2);
                const matchingFiszki3 = fiszki10.filter(fiszka => fiszka.id[1] === lessonIdToShow3);

                console.log('hej450b', tablica60);
                console.log('hej444d', newIndex);
    const id1 = matchingFiszki1[0]?.id[1] || 'unknown1';
    const id2 = matchingFiszki2[0]?.id[1] || 'unknown2';
    const id3 = matchingFiszki3[0]?.id[1] || 'unknown3';
                if (matchingFiszki1.length > 0 || matchingFiszki2.length > 0 || matchingFiszki3.length > 0) {

                    const srcWord1 = pobierzSrcWordDlaLekcji(lessonIdToShow1, fiszki10);
                    const srcWord1b = pobierzSrcWordDlaLekcji3(lessonIdToShow1, fiszki10);
                    const srcWord1d = pobierzSrcWordDlaLekcji4(lessonIdToShow1, fiszki10);
                    const srcWord2 = pobierzSrcWordDlaLekcji(lessonIdToShow2, fiszki10);
                    const srcWord2b = pobierzSrcWordDlaLekcji3(lessonIdToShow2, fiszki10);
                    const srcWord2d = pobierzSrcWordDlaLekcji4(lessonIdToShow2, fiszki10);
                    const srcWord3 = pobierzSrcWordDlaLekcji(lessonIdToShow3, fiszki10);
                    const srcWord3b = pobierzSrcWordDlaLekcji3(lessonIdToShow3, fiszki10);
                    const srcWord3d = pobierzSrcWordDlaLekcji4(lessonIdToShow3, fiszki10);
                    const srcWord10 = pobierzSrcWordDlaLekcji2(lessonIdToShow1, fiszki10);
                    function pobierzSrcWordDlaLekcji(lessonId, fiszki10) {
                        const matchingFiszka = fiszki10.find(fiszka => fiszka.id[1] === lessonId);
                        return matchingFiszka ? matchingFiszka.srcWord[0] : null;
                    }
                    function pobierzSrcWordDlaLekcji3(lessonId, fiszki10) {
                        const matchingFiszka = fiszki10.find(fiszka => fiszka.id[1] === lessonId);
                        return matchingFiszka ? matchingFiszka.srcWord[1] : null; // Zwracamy srcWord[1] zamiast srcWord
                    }
                    function pobierzSrcWordDlaLekcji2(lessonId, fiszki10) {
                        const matchingFiszka = fiszki10.find(fiszka => fiszka.id[1] === lessonId);
                        return matchingFiszka ? matchingFiszka.srcWordimage : null;
                    }
                    function pobierzSrcWordDlaLekcji4(lessonId, fiszki10) {
                        const matchingFiszka = fiszki10.find(fiszka => fiszka.id[1] === lessonId);
                        return matchingFiszka ? matchingFiszka.srcWordimage : null;
                    }
                    console.log(`Fiszki dla lekcji ${lessonIdToShow1}, ${lessonIdToShow2} i ${lessonIdToShow3}:`);

                    let sentence30 = ""; // Deklaracja zmiennej sentence1 na poziomie lokalnym
                    let sentence33 = "";

                    // Zmienna do liczenia wystąpień indexToCheck
                                        let sentence10 = ""; // Deklaracja zmiennej sentence1 na poziomie lokalnym
                    let sentence11 = "";
                    let sentence1bba = "";
                    let sentence1bbab = "";
                    
                    function addBackgroundToText1b(matchingFiszki1, matchingIndexes, aktualny, lesson1PartLength, matchingIndexes2, rodzaj, matchingIndexes3, matchingLessons5b) {
                        
        $(document).ready(function () {
function isFiszkaActive2(className) {
    const learned = getLearned2();
    console.log('[📦 ZAWARTOŚĆ ColorClass]', learned);

    const entry = learned.find(e => e.className === className);
    console.log('[🔍 SZUKAM]', className, '->', entry);

    return entry && entry.classToAdd === "active2";
}
                            console.log('hejkh', lesson1PartLength);
                            sentence1bba = "";
                            sentence1bbab = "";
                            setTimeout(() => {
                                for (let i = 0; i < matchingFiszki1.length; i++) {
                                    const fiszka = matchingFiszki1[i];
                                    console.log('fiszka:', fiszka);
                                    if (!fiszka.sentence1 || fiszka.sentence1.length === 0) {
                                        console.log('fiszka.sentence2 is undefined or empty');
                                        continue;
                                    }

                                    // Iteracja przez elementy sentence1
                                    for (let ki = 0; ki < fiszka.sentence1.length; ki++) {
                                        let sentencePart = fiszka.sentence1[ki];
const classNameToCheck = `fiszka-${fiszka.id}`;
console.log('[🟢 SPRAWDZAM FISZKĘ]', classNameToCheck);

const isActive = isFiszkaActive2(classNameToCheck);
console.log('[🟢 Czy aktywna (active2)?]', isActive);

    if (isActive) {
        const spanGreen = document.createElement('span');
        spanGreen.textContent = sentencePart;
        spanGreen.classList.add('orange');
        sentencePart = spanGreen.outerHTML;

        console.log('[✅ PODŚWIETLONO NA ZIELONO]', sentencePart);
    }
                                        console.log('matchingIndexes1000:', matchingIndexes);
                                        const indexToCheck = i + lesson1PartLength + 1;
                                        const indexToCheck2 = i + lesson1PartLength + 1;
                                            if (matchingIndexes.includes(indexToCheck) && matchingIndexes !== null) {
                                                // Sprawdzenie, czy indeks bieżącej fiszki znajduje się w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawierał utworzony element span
                                                sentencePart = spanElement.outerHTML;
                                            }
                                       
                                        // Dodaj sentencePart do sentence10
                                        sentence10 += sentencePart + " ";

                                    }

                                }
                                for (let ii = 0; ii < matchingFiszki1.length; ii++) {
                                    const fiszka = matchingFiszki1[ii];
                                    console.log('fiszka2:', fiszka);
                                    if (!fiszka.sentence2 || fiszka.sentence2.length === 0) {
                                        console.log('fiszka.sentence2 is undefined or empty');
                                        continue;
                                    }

                                    // Iteracja przez elementy sentence1
                                    for (let kii = 0; kii < fiszka.sentence2.length; kii++) {
                                        let sentencePart2 = fiszka.sentence2[kii];
    const classNameToCheck = `fiszka-${fiszka.id}`;
    const isActive = isFiszkaActive2(classNameToCheck);

    if (isActive) {
        const spanGreen2 = document.createElement('span');
        spanGreen2.textContent = sentencePart2;
        spanGreen2.classList.add('orange');
        sentencePart2 = spanGreen2.outerHTML;

        console.log('[✅ PODŚWIETLONO NA ZIELONO w sentence2]', sentencePart2);
    }
                                        const indexToCheck = ii + lesson1PartLength + 1;
                                        const indexToCheck2 = ii + lesson1PartLength + 1;
                                        console.log('indexToCheck77:', indexToCheck);
                                            if (matchingIndexes.includes(indexToCheck) && matchingIndexes !== null) {
                                                // Sprawdzenie, czy indeks bieżącej fiszki znajduje się w tablicy matchingIndexes
                                                const spanElement = document.createElement('span');
                                                spanElement.textContent = sentencePart2;
                                                spanElement.classList.add('yellow');
                                                // Zaktualizuj sentencePart, aby zawierał utworzony element span
                                                sentencePart2 = spanElement.outerHTML;
                                            }
                                        
                                        // Dodaj sentencePart do sentence10
                                        sentence11 += sentencePart2 + " ";

                                    }
                                }

                                for (let li = 0; li < matchingFiszki1.length; li++) {
                                    const fiszka = matchingFiszki1[li];
                                    console.log('fiszka:', fiszka);
                                    let sentencePart3 = fiszka.translateb;
                                    console.log('sentencePart3:', sentencePart3);
                                    if (aktualny) {
                                        // Sprawdzenie, czy indeks bieżącej fiszki znajduje się w tablicy matchingIndexes
                                        const spanElement = document.createElement('span');
                                        spanElement.textContent = sentencePart3;
                                        sentencePart3 = spanElement.outerHTML;

                                    }
                                    sentence1bba += sentencePart3 + " ";
                                }
                                for (let li = 0; li < matchingFiszki1.length; li++) {
                                    const fiszka = matchingFiszki1[li];
                                    console.log('fiszka:', fiszka);
                                    let sentencePart3 = fiszka.translate;
                                    console.log('sentencePart3:', sentencePart3);
                                    if (aktualny) {
                                        // Sprawdzenie, czy indeks bieżącej fiszki znajduje się w tablicy matchingIndexes
                                        const spanElement = document.createElement('span');
                                        spanElement.textContent = sentencePart3;
                                        sentencePart3 = spanElement.outerHTML;

                                    }
                                    sentence1bbab += sentencePart3 + " ";
                                }
                                

                                console.log('hej20', sentence1bba);
 $sentenceDiv.html(`
<div class="sentence-block" data-name="${id1}">
    <button class="left-button first-button">+<br></button>
    ${sentence10}${sentence11}<br>
    <div class="sentence1bba">${sentence1bba}</div>
    <div class="sentence1bba">${sentence1bbab}</div>
</div>

<div class="sentence-block" data-name="${id2}">
    <button class="left-buttonb second-button">+<br></button>
    ${sentence20}${sentence22}<br>
    <div class="sentence1bb1b">${sentence1bb1b}</div>
    <div class="sentence1bba2">${sentence1bba2}</div>
</div>

<div class="sentence-block" data-name="${id3}">
    <button class="left-buttonbb third-button">+<br></button>
    ${sentence30}${sentence33}<br>
    <div class="sentence1bb3">${sentence1bb3}</div>
    <div class="sentence1bb1c">${sentence1bb1c}</div>
</div>
`);

// Kolory przypisane do kategorii
const colorMapping = {
    'sport': '#28a745',        // Zielony
    'natura': '#007bff',       // Niebieski
    'nauka': '#dc3545',        // Czerwony
    'czarnyhumor': '#ffc107',  // Żółty
    'zwiazki': '#fd7e14',      // Pomarańczowy
    'all': '#800080',
    'wszystkie': 'yellow'       
};

// Zakres pokolorowanych przycisków
const startRange2 = 1;
const endRange2 = 7;

document.addEventListener('DOMContentLoaded', () => {
    // Kliknięcie w kategorię
    document.querySelectorAll('.category-btn').forEach(button => {
        button.addEventListener('click', (event) => {
            event.preventDefault(); // zapobiega przeładowaniu
            selectedCategory = button.getAttribute('data-category');
            updateButtonColors();
        });
    });
});
let previousTrojkiJSON = '';
const tablica60 = [];
function updateButtonColors() {
    tablica60.length = 0;

        const color = colorMapping[selectedCategory] || '#800080';

        document.querySelectorAll('.sentence-block, .sentence-blockB').forEach(block => {
            const dataName = parseInt(block.getAttribute('data-name'), 10);
            tablica60.push(dataName);
        if (dataName >= startRange2 && dataName <= endRange2) {
            const button = block.querySelector('button.left-button, button.left-buttonb, button.left-buttonbb');
            if (button) {
                if (dataName >= startRange2 && dataName <= endRange2) {
                    button.style.backgroundColor = color;
                    button.style.color = 'white';
                } else {
                    button.style.backgroundColor = '';
                    button.style.color = '';
                }
            }
        }
        });
    
    // PodziaĹ na trĂłjki
    const trojki = [];
    for (let i = 0; i < tablica60.length; i += 3) {
        trojki.push(tablica60.slice(i, i + 3));
    }

    const currentTrojkiJSON = JSON.stringify(trojki);
    if (currentTrojkiJSON !== previousTrojkiJSON) {
        previousTrojkiJSON = currentTrojkiJSON;

        console.log('Nowe trĂłjki:', trojki);

        // UsuĹ stare linki
        $('.hidden-link').remove();
        console.log('UsuniÄto stare linki');

        // Wygeneruj nowe linki (dla pierwszych dwĂłch trĂłjek, jeĹli istniejÄ)
        const firstTrojka = trojki[0] || [];
        const secondTrojka = trojki[1] || [];
        const thirdTrojka = trojki[2] || [];
        const cztery = trojki[3] || [];
        const piec = trojki[4] || [];
        const szesc = trojki[5] || [];
        const siedem = trojki[6] || [];
        const osiem = trojki[7] || [];
        const dziewiec = trojki[8] || [];
        const dziesiec = trojki[9] || [];
        const jedenascie = trojki[10] || [];
        const dwanascie = trojki[11] || [];
        const trzynascie = trojki[12] || [];
        const czternascie = trojki[13] || [];
        const pietnascie = trojki[14] || [];
        const szstnascie = trojki[15] || [];
        const siedemnascie = trojki[16] || [];
        const osiemnascie = trojki[17] || [];
                const dziewietnascie = trojki[18] || [];
        const link1 = `demo1angielski.html?category=${selectedCategory}&data=${firstTrojka.join(',')}`;
        const link2 = `demo1angielski.html?category=${selectedCategory}&data=${secondTrojka.join(',')}`;
        const link3 = `demo1angielski.html?category=${selectedCategory}&data=${thirdTrojka.join(',')}`;
        const link4 = `demo1angielski.html?category=${selectedCategory}&data=${cztery.join(',')}`;
        const link5 = `demo1angielski.html?category=${selectedCategory}&data=${piec.join(',')}`;
        const link6 = `demo1angielski.html?category=${selectedCategory}&data=${szesc.join(',')}`;
        const link7 = `demo1angielski.html?category=${selectedCategory}&data=${siedem.join(',')}`;
        const link8 = `demo1angielski.html?category=${selectedCategory}&data=${osiem.join(',')}`;
        const link9 = `demo1angielski.html?category=${selectedCategory}&data=${dziewiec.join(',')}`;
        const link10 = `demo1angielski.html?category=${selectedCategory}&data=${dziesiec.join(',')}`;
        const link11 = `demo1angielski.html?category=${selectedCategory}&data=${jedenascie.join(',')}`;
        const link12 = `demo1angielski.html?category=${selectedCategory}&data=${dwanascie.join(',')}`;
        const link13 = `demo1angielski.html?category=${selectedCategory}&data=${trzynascie.join(',')}`;
        const link14 = `demo1angielski.html?category=${selectedCategory}&data=${czternascie.join(',')}`;
        const link15 = `demo1angielski.html?category=${selectedCategory}&data=${pietnascie.join(',')}`;
        const link16 = `demo1angielski.html?category=${selectedCategory}&data=${szstnascie.join(',')}`;
        const link17 = `demo1angielski.html?category=${selectedCategory}&data=${siedemnascie.join(',')}`;
        const link18 = `demo1angielski.html?category=${selectedCategory}&data=${osiemnascie.join(',')}`;
        const link19 = `demo1angielski.html?category=${selectedCategory}&data=${dziewietnascie.join(',')}`;

        const linksHTML = `
            <a href="${link1}" class="hidden-link lesson-link-1" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 1</a>
            <a href="${link2}" class="hidden-link lesson-link-2" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 2</a>
        <a href="${link3}" class="hidden-link lesson-link-3" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 3</a>
                    <a href="${link4}" class="hidden-link lesson-link-4" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 1</a>
            <a href="${link5}" class="hidden-link lesson-link-5" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 2</a>
        <a href="${link6}" class="hidden-link lesson-link-6" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 3</a>
                    <a href="${link7}" class="hidden-link lesson-link-7" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 1</a>
            <a href="${link8}" class="hidden-link lesson-link-8" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 2</a>
        <a href="${link9}" class="hidden-link lesson-link-9" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 3</a>
                    <a href="${link10}" class="hidden-link lesson-link-10" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 1</a>
            <a href="${link11}" class="hidden-link lesson-link-11" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 2</a>
        <a href="${link12}" class="hidden-link lesson-link-12" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 3</a>
                    <a href="${link13}" class="hidden-link lesson-link-13" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 1</a>
            <a href="${link14}" class="hidden-link lesson-link-14" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 2</a>
        <a href="${link15}" class="hidden-link lesson-link-15" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 3</a>
                    <a href="${link16}" class="hidden-link lesson-link-16" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 1</a>
            <a href="${link17}" class="hidden-link lesson-link-17" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 2</a>
        <a href="${link18}" class="hidden-link lesson-link-18" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 3</a>
                <a href="${link19}" class="hidden-link lesson-link-19" target="_blank" rel="noopener noreferrer">PrzejdĹş do lekcji 3</a>
        `;

        $('body').append(linksHTML);
        console.log('Dodano linki:', link1, link2);
    }
}
    setTimeout(() => {
// Uruchom na poczÄtku
updateButtonColors();
}, 0); // opóźnienie np. 100ms

                            }, 0);
                        });                       
                    }