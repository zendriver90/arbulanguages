<!DOCTYPE html>
<title>Smart Angielski</title>
<meta charset="UTF-8">

<head>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/alert.css">
    <link rel="stylesheet" type="text/css" href="css/lista.css">
    <link rel="stylesheet" type="text/css" href="css/fiszki.css">
    <link rel="stylesheet" type="text/css" href="css/styl7.css">
        <link rel="stylesheet" type="text/css" href="js/audioaudio.css">
    <link rel="stylesheet" type="text/css" href="css/1nowe-pc.css">
            <script src="js/story.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2654094815555460"
    crossorigin="anonymous"></script>
</head>
<body>
    <div id="kontenery">
        <div id='karta1'>
            <p>Zdanie 1sze</p><img id="as" src="img/karty/as.jpg">
        </div>
        <div class="obrazek-container" id="obrazek-container1">
        </div>
        <div id='karta2'>
            <p>Zdanie 2gie</p><img id="as" src="img/karty/krol.jpg">
        </div>
        <div class="obrazek-container" id="obrazek-container2">
        </div>
        <div id='karta3'>
            <p>Zdanie 3cie</p><img id="as" src="img/karty/dama.jpg">
        </div>
        <div class="obrazek-container" id="obrazek-container3">
        </div>
    </div>
    <div id="kontenery2">
        <div class="obrazek-container" id="obrazek-container2b">
        </div>
        <div class="obrazek-container" id="obrazek-container2b">
        </div>
        <div class="obrazek-container" id="obrazek-container2b">
        </div>
        <div id='karta3b'>
            <p>Zdanie 3cie</p><img id="as" src="img/karty/dama.jpg">
        </div>
    </div>
    <button id="nauka">
        <p>UCZE SIƒò: <span id="liczbaKlikniec2">0</span>
    </button>
    <div id="right-container"><button id="nauka2">NAUCZY≈ÅEM SIƒò X</button></div>
    <div id="bottom-container"><button id="nauka2">
            <p>POSTƒòP: <span id="liczbaKlikniec">0</span>- ZAZNAJOMIONYCH
        </button></div>
        <script src="js/lista.js"></script>
    <div class="grid-containerb">
    </div>
                                <script src="start\testowybv5.js"></script>
                                                        <script src="start\testowybv6.js"></script>
                <script src="start\testowybv7.js"></script>
                                        <script src="start\testowyb.js"></script>
                                <script src="start\root-tablica.js"></script>
<script>
// Wywo≈Çaj funkcjƒô z otrzymanƒÖ warto≈õciƒÖ
function wybierzRodzaj(category, one, two, three) {
        console.log("Wybrany rodzaj s≈Çownictwa: " + category);
    console.log("Parametry data -> one:", one, "two:", two, "three:", three);
    console.log("Wybrany rodzaj s≈Çownictwa: " + category);

    const matchingLessons = [];

    // Sprawdzenie, czy kategoria to 'all'
    if (category === 'all') {
        // Dodaj wszystkie lekcje do matchingLessons
        for (const fiszka of fiszki) {
            console.log(`Przetwarzanie fiszki: ${JSON.stringify(fiszka)}`);
            // Sprawdzanie, czy fiszka ma poprawne id
            if (fiszka.id && fiszka.id[1]) {
                // Sprawdzanie, czy id ju≈º jest w matchingLessons, aby uniknƒÖƒá duplikat√≥w
                if (!matchingLessons.includes(fiszka.id[1])) {
                    matchingLessons.push(fiszka.id[1]);
                }
            }
        }
    } else if (category === 'sport') {
        // Dodaj wszystkie lekcje do matchingLessons
        for (const fiszka of fiszki) {
            console.log(`Przetwarzanie fiszki: ${JSON.stringify(fiszka)}`);
            // Sprawdzanie, czy fiszka ma poprawne id
            if (fiszka.id && fiszka.id[1]) {
                // Sprawdzanie, czy id ju≈º jest w matchingLessons, aby uniknƒÖƒá duplikat√≥w
                if (!matchingLessons.includes(fiszka.id[1])) {
                    matchingLessons.push(fiszka.id[1]);
                }
            }
        }
    } else if (category === 'natura') {
        // Dodaj wszystkie lekcje do matchingLessons
        for (const fiszka of fiszki) {
            console.log(`Przetwarzanie fiszki: ${JSON.stringify(fiszka)}`);
            // Sprawdzanie, czy fiszka ma poprawne id
            if (fiszka.id && fiszka.id[1]) {
                // Sprawdzanie, czy id ju≈º jest w matchingLessons, aby uniknƒÖƒá duplikat√≥w
                if (!matchingLessons.includes(fiszka.id[1])) {
                    matchingLessons.push(fiszka.id[1]);
                }
            }
        }
    } else if (category === 'nauka') {
        // Dodaj wszystkie lekcje do matchingLessons
        for (const fiszka of fiszki) {
            console.log(`Przetwarzanie fiszki: ${JSON.stringify(fiszka)}`);
            // Sprawdzanie, czy fiszka ma poprawne id
            if (fiszka.id && fiszka.id[1]) {
                // Sprawdzanie, czy id ju≈º jest w matchingLessons, aby uniknƒÖƒá duplikat√≥w
                if (!matchingLessons.includes(fiszka.id[1])) {
                    matchingLessons.push(fiszka.id[1]);
                }
            }
        }
    } else if (category === 'czarny humor' || category === 'czarnyhumor') {
        // Dodaj wszystkie lekcje do matchingLessons
        for (const fiszka of fiszki) {
            console.log(`Przetwarzanie fiszki: ${JSON.stringify(fiszka)}`);
            // Sprawdzanie, czy fiszka ma poprawne id
            if (fiszka.id && fiszka.id[1]) {
                // Sprawdzanie, czy id ju≈º jest w matchingLessons, aby uniknƒÖƒá duplikat√≥w
                if (!matchingLessons.includes(fiszka.id[1])) {
                    matchingLessons.push(fiszka.id[1]);
                }
            }
        }
    } else if (category === 'zwiazki') {
        // Dodaj wszystkie lekcje do matchingLessons
        for (const fiszka of fiszki) {
            console.log(`Przetwarzanie fiszki: ${JSON.stringify(fiszka)}`);
            // Sprawdzanie, czy fiszka ma poprawne id
            if (fiszka.id && fiszka.id[1]) {
                // Sprawdzanie, czy id ju≈º jest w matchingLessons, aby uniknƒÖƒá duplikat√≥w
                if (!matchingLessons.includes(fiszka.id[1])) {
                    matchingLessons.push(fiszka.id[1]);
                }
            }
        }
    } else {
    // Iteracja przez fiszki
    for (const fiszka of fiszki) {
        console.log(`Przetwarzanie fiszki: ${JSON.stringify(fiszka)}`);
if (fiszka.category !== 'all') {
        // Sprawdzenie, czy kategoria fiszki nie jest r√≥wna 'all'
        if (fiszka.category !== 'all') {
            // Sprawdzenie, czy fiszka pasuje do zadanej kategorii
            const isInCategory2 = fiszka.category2 && fiszka.category2.includes(category);
            const isInCategory3 = fiszka.category3 && fiszka.category3.includes(category);

            // Je≈õli fiszka pasuje do zadanej kategorii, dodaj numer lekcji do tablicy matchingLessons
            if (isInCategory2 || isInCategory3) {
                console.log(`Znaleziono fiszkƒô z kategoriƒÖ "${category}" w lekcji ${JSON.stringify(fiszka)}`);
                if (fiszka.id && fiszka.id[1]) {
                    matchingLessons.push(fiszka.id[1]);
                }
            }
        }
    }
}
    }

    // Dodaj one, two, three je≈õli istniejƒÖ i nie sƒÖ ju≈º dodane
    [one, two, three].forEach(val => {
        if (val && !matchingLessons.includes(val)) {
            matchingLessons.push(val);
            console.log(`‚ûï Dodano lekcjƒô z parametru data: ${val}`);
        }
    });

    // Wy≈õwietl fiszki tylko dla lessonId: one, two, three
    if (one) {
        console.log("üìò Wy≈õwietlam lekcjƒô dla one:", one);
        showFiszkiForLesson(one, fiszki, category);
    }
    if (two) {
        console.log("üìó Wy≈õwietlam lekcjƒô dla two:", two);
        showFiszkiForLesson(two, fiszki, category);
    }
    if (three) {
        console.log("üìô Wy≈õwietlam lekcjƒô dla three:", three);
        showFiszkiForLesson(three, fiszki, category);
    }
}

const urlParams = new URLSearchParams(window.location.search);
const category = urlParams.get('category');
const dataParam = urlParams.get('data');

// Zamie≈Ñ warto≈õƒá 'data' na tablicƒô liczb
let selectedData = [];
if (dataParam) {
    selectedData = dataParam.split(',').map(num => parseInt(num, 10));
    console.log("Wybrane dane (data):", selectedData);
}

// Przypisz odpowiednio
const one = selectedData[0];
const two = selectedData[1];
const three = selectedData[2];

// Wywo≈Çaj funkcjƒô z dodatkowymi parametrami
wybierzRodzaj(category, one, two, three);

function showFiszkiForLesson(lessonIdToShow, fiszki, category) {
    const matchingFiszki = fiszki.filter(fiszka => fiszka.id[1] === lessonIdToShow);

    if (matchingFiszki.length > 0) {
        console.log(`Fiszki dla lekcji ${lessonIdToShow}:`);
        matchingFiszki.forEach(fiszka => {
            console.log(`Processing fiszka with ID: [${fiszka.id.join(', ')}]`);
            generateFiszkaBlock(fiszka, lessonIdToShow, category); // Upewnij siƒô, ≈ºe funkcja generateFiszkaBlock() jest zdefiniowana
            console.log(`Generated fiszka with ID: [${fiszka.id.join(', ')}]`);
        });
    } else {
        console.log(`No fiszki found for Lesson ${lessonIdToShow}.`);
    }
}
</script>
<script src="js/scroll.js"></script>
<script src="js/scrollapp.js"></script>
<script src="js/repeating.js"></script>
<script src="js/storage.js"></script>
</body>
<div id="footer"></div>
<div id="footer"></div>

</html>